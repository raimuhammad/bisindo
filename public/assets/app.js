var Wi=Object.defineProperty,Ji=Object.defineProperties;var ji=Object.getOwnPropertyDescriptors;var Ye=Object.getOwnPropertySymbols;var rn=Object.prototype.hasOwnProperty,on=Object.prototype.propertyIsEnumerable;var vt=(e,t,n)=>t in e?Wi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))rn.call(t,n)&&vt(e,n,t[n]);if(Ye)for(var n of Ye(t))on.call(t,n)&&vt(e,n,t[n]);return e},x=(e,t)=>Ji(e,ji(t));var U=(e,t)=>{var n={};for(var r in e)rn.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ye)for(var r of Ye(e))t.indexOf(r)<0&&on.call(e,r)&&(n[r]=e[r]);return n};var v=(e,t,n)=>(vt(e,typeof t!="symbol"?t+"":t,n),n);import{r as u,j as i,u as Xe,A as _e,m as ee,R as Ki,a as an,M as Yi,t as o,Q as $,w as V,b as q,h as _t,c as Xi,d as Zi,e as er,f as sn,g as tr,o as bt,i as pe,k as N,l as nr,L as ir,n as rr,p as Te,F as S,S as or,q as ar,s as sr,V as dr,v as dn,x as Ge,y as un,z as wt,B as ur,C as Ve,D as C,E as H,G as c,H as lr,I as h,J as he,T as y,K as cr,P as ln,N as be,O as cn,U as b,W as pr,X as L,Y as Le,Z as hr,_ as Ct,$ as pn,a0 as Ze,a1 as St,a2 as hn,a3 as Fe,a4 as te,a5 as gn,a6 as J,a7 as Ue,a8 as gr,a9 as j,aa as mn,ab as F,ac as B,ad as It,ae as mr,af as et,ag as fr,ah as fn,ai as xr,aj as tt,ak as Pt,al as yr,am as vr,an as we,ao as xn,ap as nt,aq as Q,ar as _r,as as br,at as wr,au as Cr,av as yn,aw as Sr,ax as Ir,ay as Pr,az as kr,aA as $r,aB as qr,aC as Dr,aD as K,aE as vn,aF as Er,aG as Mr,aH as zr,aI as Ar,aJ as kt,aK as _n,aL as Ne,aM as $t,aN as Tr,aO as bn,aP as Gr,aQ as wn,aR as Vr,aS as qt,aT as Lr,aU as Fr,aV as Ur,aW as Nr,aX as ne,aY as Hr,aZ as Cn,a_ as Sn,a$ as In,b0 as Pn,b1 as Dt,b2 as Br,b3 as kn,b4 as He,b5 as $n,b6 as qn,b7 as Dn,b8 as En,b9 as Mn,ba as Qr,bb as zn,bc as An,bd as Tn,be as Rr,bf as Or,bg as Wr,bh as Jr,bi as jr,bj as Kr}from"./vendor.js";const Yr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}};Yr();const Gn=u.exports.createContext(null);function ie(){return u.exports.useContext(Gn)}class Xr extends u.exports.Component{constructor(t){super(t);v(this,"setUser",t=>{this.setState(n=>x(g({},n),{user:t,routes:[...this.props.getRoutes(t)]}))});v(this,"getContext",()=>x(g({},this.state),{setUser:this.setUser}));this.state={routes:[],user:null,initilizing:!0}}componentDidMount(){const{authFunctions:t,getRoutes:n}=this.props;t().then(r=>{this.setState({initilizing:!1,routes:n(r),user:r})})}render(){return i(Gn.Provider,{value:this.getContext(),children:this.state.initilizing?"Initializing":this.props.children})}}const Vn=({children:e})=>{const{pathname:t}=Xe();return i(_e,{exitBeforeEnter:!0,children:i(ee.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},transition:{opacity:{type:"tween"}},style:{minHeight:"100vh"},children:e},t)})},Zr=({getFallback:e})=>{const{routes:t,user:n}=ie(),r=e(n);if(!t.find(s=>s.path.replaceAll("/*","")===r))throw new Error(`Path ${r} is not exist in routes`);return i(Ki,{children:t.map(({path:s,component:d,groups:l})=>{const p=l!=null?l:[];return i(an,{path:s,element:i(Vn,{children:i(d,{})}),children:p.map(({path:m,component:f})=>i(an,{path:m,element:i(Vn,{children:i(f,{})})},m))},s)})})},D=Yi;var ge;(function(e){e.ADMIN="ADMIN",e.STUDENT="STUDENT"})(ge||(ge={}));const eo=o.enumeration("AppRole",["ADMIN","STUDENT"]),to=D.named("User").props({__typename:o.optional(o.literal("User"),"User"),id:o.identifier,name:o.union(o.undefined,o.string),email:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),role:o.union(o.undefined,eo),need_change_password:o.union(o.undefined,o.boolean),active:o.union(o.undefined,o.null,o.boolean)}).views(e=>({get store(){return e.__getStore()}}));class R extends ${get id(){return this.__attr("id")}get name(){return this.__attr("name")}get email(){return this.__attr("email")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get role(){return this.__attr("role")}get need_change_password(){return this.__attr("need_change_password")}get active(){return this.__attr("active")}}function no(){return new R}const me=no().name.email.created_at.updated_at.role.need_change_password.active,Ce=to.actions(e=>({log(){console.log(JSON.stringify(e))}})),io=V()(D.named("Progress").props({__typename:o.optional(o.literal("Progress"),"Progress"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,q(o.late(()=>Ce))),video_histories:o.union(o.undefined,o.string),quiz_histories:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}})));class de extends ${get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get video_histories(){return this.__attr("video_histories")}get quiz_histories(){return this.__attr("quiz_histories")}user(t){return this.__child("user",R,t)}}function ro(){return new de}const Be=ro().user_id.video_histories.quiz_histories,it=io.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get videoHistories(){return e.video_histories?JSON.parse(e.video_histories):[]},get quizHistories(){return e.quiz_histories?JSON.parse(e.quiz_histories):[]}})),oo=V()(D.named("StudentGrade").props({__typename:o.optional(o.literal("StudentGrade"),"StudentGrade"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),student:o.union(o.undefined,o.null,q(o.late(()=>Ce))),grade:o.union(o.undefined,o.null,q(o.late(()=>Re))),progress:o.union(o.undefined,q(o.late(()=>it)))}).views(e=>({get store(){return e.__getStore()}})));class rt extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}student(t){return this.__child("student",R,t)}grade(t){return this.__child("grade",ue,t)}progress(t){return this.__child("progress",de,t)}}function ao(){return new rt}const so=ao().created_at.updated_at,ot=oo.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get studentName(){return e.student?e.student.name:""},get gradeName(){return e.grade?e.grade.name:""}})),uo=V()(D.named("Grade").props({__typename:o.optional(o.literal("Grade"),"Grade"),id:o.identifier,student_count:o.union(o.undefined,o.integer),video_count:o.union(o.undefined,o.integer),name:o.union(o.undefined,o.string),students:o.union(o.undefined,o.array(q(o.late(()=>ot)))),videos:o.union(o.undefined,o.array(q(o.late(()=>st)))),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class ue extends ${get id(){return this.__attr("id")}get student_count(){return this.__attr("student_count")}get video_count(){return this.__attr("video_count")}get name(){return this.__attr("name")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}students(t){return this.__child("students",rt,t)}videos(t){return this.__child("videos",Y,t)}}function lo(){return new ue}const Qe=lo().student_count.video_count.name.created_at.updated_at,Re=uo.actions(e=>({log(){console.log(JSON.stringify(e))}})),co=D.named("MultipleChoise").props({__typename:o.optional(o.literal("MultipleChoise"),"MultipleChoise"),id:o.identifier,image:o.union(o.undefined,o.string),text:o.union(o.undefined,o.string),index:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class Ln extends ${get id(){return this.__attr("id")}get image(){return this.__attr("image")}get text(){return this.__attr("text")}get index(){return this.__attr("index")}}function po(){return new Ln}po().image.text.index;const Et=co.actions(e=>({log(){console.log(JSON.stringify(e))}}));var A;(function(e){e.IMAGE_MATCH="IMAGE_MATCH",e.LETTER_SEQUENCE="LETTER_SEQUENCE",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE"})(A||(A={}));const ho=o.enumeration("QuizType",["IMAGE_MATCH","LETTER_SEQUENCE","MULTIPLE_CHOICE"]),go=V()(D.named("Quiz").props({__typename:o.optional(o.literal("Quiz"),"Quiz"),id:o.identifier,video_id:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),show_at:o.union(o.undefined,o.number),type:o.union(o.undefined,ho),choises:o.union(o.undefined,o.array(q(o.late(()=>Et)))),question:o.union(o.undefined,o.string),questionAnswer:o.union(o.undefined,o.integer),additional_image:o.union(o.undefined,o.string),image_matcher:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}})));class re extends ${get id(){return this.__attr("id")}get video_id(){return this.__attr("video_id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get show_at(){return this.__attr("show_at")}get type(){return this.__attr("type")}get question(){return this.__attr("question")}get questionAnswer(){return this.__attr("questionAnswer")}get additional_image(){return this.__attr("additional_image")}get image_matcher(){return this.__attr("image_matcher")}choises(t){return this.__child("choises",Ln,t)}}function mo(){return new re}const Se=mo().video_id.created_at.updated_at.show_at.type.question.questionAnswer.additional_image.image_matcher;_t.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){if(e===12&&(e=0),t==="pagi")return e;if(t==="siang")return e>=11?e:e+12;if(t==="sore"||t==="malam")return e+12},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}});function fo(e){var n;const t=_t((n=e.createdAt)!=null?n:e.created_at).locale("id");return{get isMoreThan3Days(){return _t(new Date).diff(t,"days")>3},get hummanize(){return e.isMoreThan3Days?t.format("LL"):t.fromNow()},get createdMoment(){return t}}}function xo(e){let t=e,n=0;for(;t>=60;)n+=1,t-=60;const r=e%60;return{minute:n,modulo:r}}function Oe(e){const{minute:t,modulo:n}=xo(e),r=t<10?`0${t}`:`${t}`,a=n<10?`0${n}`:`${n}`;return`${r}:${a}`}const yo={MULTIPLE_CHOICE:"Pilihan ganda",IMAGE_MATCH:"Pencocokan gambar",LETTER_SEQUENCE:"Urut gambar"},at=go.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get typeLabel(){return yo[e.type]}})).views(fo).views(e=>({get durationText(){var t;return Oe((t=e.show_at)!=null?t:0)}})),vo=V()(D.named("Video").props({__typename:o.optional(o.literal("Video"),"Video"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),title:o.union(o.undefined,o.string),caption:o.union(o.undefined,o.string),description:o.union(o.undefined,o.string),content:o.union(o.undefined,o.string),thumbnail:o.union(o.undefined,o.string),duration:o.union(o.undefined,o.integer),grades:o.union(o.undefined,o.array(q(o.late(()=>Re)))),quizes:o.union(o.undefined,o.array(q(o.late(()=>at)))),student_progress:o.union(o.undefined,o.array(q(o.late(()=>it)))),quiz_count:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}})));class Y extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get title(){return this.__attr("title")}get caption(){return this.__attr("caption")}get description(){return this.__attr("description")}get content(){return this.__attr("content")}get thumbnail(){return this.__attr("thumbnail")}get duration(){return this.__attr("duration")}get quiz_count(){return this.__attr("quiz_count")}grades(t){return this.__child("grades",ue,t)}quizes(t){return this.__child("quizes",re,t)}student_progress(t){return this.__child("student_progress",de,t)}}function _o(){return new Y}const fe=_o().created_at.updated_at.title.caption.description.content.thumbnail.duration.quiz_count,st=vo.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get durationText(){var t;return Oe((t=e.duration)!=null?t:0)}})),bo=D.named("QuizAnswer").props({__typename:o.optional(o.literal("QuizAnswer"),"QuizAnswer"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),user_id:o.union(o.undefined,o.string),quiz_id:o.union(o.undefined,o.string),to:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),from:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),items:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),selected:o.union(o.undefined,o.null,o.string)}).views(e=>({get store(){return e.__getStore()}}));class Mt extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get user_id(){return this.__attr("user_id")}get quiz_id(){return this.__attr("quiz_id")}get to(){return this.__attr("to")}get from(){return this.__attr("from")}get items(){return this.__attr("items")}get selected(){return this.__attr("selected")}}function wo(){return new Mt}const Fn=wo().created_at.updated_at.user_id.quiz_id.to.from.items.selected,Un=bo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Co=D.named("PaginatorInfo").props({__typename:o.optional(o.literal("PaginatorInfo"),"PaginatorInfo"),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),firstItem:o.union(o.undefined,o.null,o.integer),hasMorePages:o.union(o.undefined,o.boolean),lastItem:o.union(o.undefined,o.null,o.integer),lastPage:o.union(o.undefined,o.integer),perPage:o.union(o.undefined,o.integer),total:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class xe extends ${get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get firstItem(){return this.__attr("firstItem")}get hasMorePages(){return this.__attr("hasMorePages")}get lastItem(){return this.__attr("lastItem")}get lastPage(){return this.__attr("lastPage")}get perPage(){return this.__attr("perPage")}get total(){return this.__attr("total")}}function So(){return new xe}So().count.currentPage.firstItem.hasMorePages.lastItem.lastPage.perPage.total;const Ie=Co.actions(e=>({log(){console.log(JSON.stringify(e))}})),Io=V()(D.named("VideoPaginator").props({__typename:o.optional(o.literal("VideoPaginator"),"VideoPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Ie)),data:o.union(o.undefined,o.array(q(o.late(()=>st))))}).views(e=>({get store(){return e.__getStore()}})));class Nn extends ${paginatorInfo(t){return this.__child("paginatorInfo",xe,t)}data(t){return this.__child("data",Y,t)}}function Po(){return new Nn}const ko=Po(),$o=Io.actions(e=>({log(){console.log(JSON.stringify(e))}})),qo=V()(D.named("QuizPaginator").props({__typename:o.optional(o.literal("QuizPaginator"),"QuizPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Ie)),data:o.union(o.undefined,o.array(q(o.late(()=>at))))}).views(e=>({get store(){return e.__getStore()}})));class Hn extends ${paginatorInfo(t){return this.__child("paginatorInfo",xe,t)}data(t){return this.__child("data",re,t)}}function Do(){return new Hn}const Eo=Do(),Mo=qo.actions(e=>({log(){console.log(JSON.stringify(e))}})),zo=V()(D.named("StudentGradePaginator").props({__typename:o.optional(o.literal("StudentGradePaginator"),"StudentGradePaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Ie)),data:o.union(o.undefined,o.array(q(o.late(()=>ot))))}).views(e=>({get store(){return e.__getStore()}})));class dt extends ${paginatorInfo(t){return this.__child("paginatorInfo",xe,t)}data(t){return this.__child("data",rt,t)}}function Ao(){return new dt}const zt=Ao(),To=zo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Go=V()(D.named("GradePaginator").props({__typename:o.optional(o.literal("GradePaginator"),"GradePaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Ie)),data:o.union(o.undefined,o.array(q(o.late(()=>Re))))}).views(e=>({get store(){return e.__getStore()}})));class Bn extends ${paginatorInfo(t){return this.__child("paginatorInfo",xe,t)}data(t){return this.__child("data",ue,t)}}function Vo(){return new Bn}const Lo=Vo(),Fo=Go.actions(e=>({log(){console.log(JSON.stringify(e))}})),Uo=V()(D.named("DiscussionReply").props({__typename:o.optional(o.literal("DiscussionReply"),"DiscussionReply"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,q(o.late(()=>Ce))),discussion:o.union(o.undefined,q(o.late(()=>ut))),content:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class We extends ${get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get content(){return this.__attr("content")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}user(t){return this.__child("user",R,t)}discussion(t){return this.__child("discussion",Pe,t)}}function No(){return new We}const At=No().user_id.content.created_at.updated_at,Tt=Uo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Ho=V()(D.named("Discussion").props({__typename:o.optional(o.literal("Discussion"),"Discussion"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,q(o.late(()=>Ce))),content:o.union(o.undefined,o.string),replies:o.union(o.undefined,o.array(o.union(o.null,q(o.late(()=>Tt))))),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class Pe extends ${get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get content(){return this.__attr("content")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}user(t){return this.__child("user",R,t)}replies(t){return this.__child("replies",We,t)}}function Bo(){return new Pe}const Gt=Bo().user_id.content.created_at.updated_at,ut=Ho.actions(e=>({log(){console.log(JSON.stringify(e))}})),Qo=V()(D.named("DiscussionPaginator").props({__typename:o.optional(o.literal("DiscussionPaginator"),"DiscussionPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Ie)),data:o.union(o.undefined,o.array(q(o.late(()=>ut))))}).views(e=>({get store(){return e.__getStore()}})));class Qn extends ${paginatorInfo(t){return this.__child("paginatorInfo",xe,t)}data(t){return this.__child("data",Pe,t)}}function Ro(){return new Qn}const Oo=Ro(),Wo=Qo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Jo=D.named("VideoGrade").props({__typename:o.optional(o.literal("VideoGrade"),"VideoGrade"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),video_id:o.union(o.undefined,o.string),grade_id:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}}));class Rn extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get video_id(){return this.__attr("video_id")}get grade_id(){return this.__attr("grade_id")}}function jo(){return new Rn}const Ko=jo().created_at.updated_at.video_id.grade_id,On=Jo.actions(e=>({log(){console.log(JSON.stringify(e))}}));var Wn;(function(e){e.ASC="ASC",e.DESC="DESC"})(Wn||(Wn={}));o.enumeration("SortOrder",["ASC","DESC"]);const Yo=D.named("SimplePaginatorInfo").props({__typename:o.optional(o.literal("SimplePaginatorInfo"),"SimplePaginatorInfo"),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),firstItem:o.union(o.undefined,o.null,o.integer),lastItem:o.union(o.undefined,o.null,o.integer),perPage:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class Xo extends ${get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get firstItem(){return this.__attr("firstItem")}get lastItem(){return this.__attr("lastItem")}get perPage(){return this.__attr("perPage")}}function Zo(){return new Xo}Zo().count.currentPage.firstItem.lastItem.perPage;const ea=Yo.actions(e=>({log(){console.log(JSON.stringify(e))}})),ta=D.named("PageInfo").props({__typename:o.optional(o.literal("PageInfo"),"PageInfo"),hasNextPage:o.union(o.undefined,o.boolean),hasPreviousPage:o.union(o.undefined,o.boolean),startCursor:o.union(o.undefined,o.null,o.string),endCursor:o.union(o.undefined,o.null,o.string),total:o.union(o.undefined,o.integer),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),lastPage:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class na extends ${get hasNextPage(){return this.__attr("hasNextPage")}get hasPreviousPage(){return this.__attr("hasPreviousPage")}get startCursor(){return this.__attr("startCursor")}get endCursor(){return this.__attr("endCursor")}get total(){return this.__attr("total")}get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get lastPage(){return this.__attr("lastPage")}}function ia(){return new na}ia().hasNextPage.hasPreviousPage.startCursor.endCursor.total.count.currentPage.lastPage;const ra=ta.actions(e=>({log(){console.log(JSON.stringify(e))}}));var Jn;(function(e){e.ONLY="ONLY",e.WITH="WITH",e.WITHOUT="WITHOUT"})(Jn||(Jn={}));o.enumeration("Trashed",["ONLY","WITH","WITHOUT"]);var oe;(function(e){e.queryAuth="queryAuth",e.queryVideo="queryVideo",e.queryGetVideoByGrade="queryGetVideoByGrade",e.queryVideoNotInGrade="queryVideoNotInGrade",e.queryQuizAnswers="queryQuizAnswers",e.queryIsUniqueEmail="queryIsUniqueEmail",e.queryUserByGrade="queryUserByGrade",e.queryVideoByGrade="queryVideoByGrade",e.queryQuizByGrade="queryQuizByGrade",e.queryProgressByGrade="queryProgressByGrade",e.queryGradeAll="queryGradeAll",e.queryGradeById="queryGradeById",e.queryGradeQuizes="queryGradeQuizes",e.queryProgress="queryProgress",e.queryGradeByAuth="queryGradeByAuth",e.queryStudentProgress="queryStudentProgress",e.queryVideos="queryVideos",e.queryQuizes="queryQuizes",e.queryStudents="queryStudents",e.queryGrades="queryGrades",e.queryGetStudentByGrade="queryGetStudentByGrade",e.queryStudentGrades="queryStudentGrades",e.queryDiscussion="queryDiscussion"})(oe||(oe={}));var P;(function(e){e.mutateLogin="mutateLogin",e.mutateLogout="mutateLogout",e.mutateVideo="mutateVideo",e.mutateVideoUpdate="mutateVideoUpdate",e.mutateVideoDelete="mutateVideoDelete",e.mutateQuizDelete="mutateQuizDelete",e.mutateMultipleChoiseQuiz="mutateMultipleChoiseQuiz",e.mutateImageMatchQuiz="mutateImageMatchQuiz",e.mutateLetterSequenceQuiz="mutateLetterSequenceQuiz",e.mutateQuizAnswer="mutateQuizAnswer",e.mutateUser="mutateUser",e.mutateLoginWithInvitation="mutateLoginWithInvitation",e.mutateUserChangeUserPassword="mutateUserChangeUserPassword",e.mutateSentInvitation="mutateSentInvitation",e.mutateUserEdit="mutateUserEdit",e.mutateUserActivation="mutateUserActivation",e.mutateUserDelete="mutateUserDelete",e.mutateGrade="mutateGrade",e.mutateGradeEdit="mutateGradeEdit",e.mutateAddVideoInGrade="mutateAddVideoInGrade",e.mutateUpdateVideoProgress="mutateUpdateVideoProgress",e.mutateUpdateQuizProgress="mutateUpdateQuizProgress",e.mutateDiscussion="mutateDiscussion",e.mutateDiscussionReply="mutateDiscussionReply",e.mutateUpdateDiscussion="mutateUpdateDiscussion",e.mutateUpdateDiscussionReply="mutateUpdateDiscussionReply",e.mutateDeleteDiscussion="mutateDeleteDiscussion",e.mutateDeleteDiscussionReply="mutateDeleteDiscussionReply"})(P||(P={}));const oa=V()(Xi.named("RootStore").extend(Zi([["User",()=>Ce],["Video",()=>st],["Grade",()=>Re],["StudentGrade",()=>ot],["Progress",()=>it],["Quiz",()=>at],["MultipleChoise",()=>Et],["QuizAnswer",()=>Un],["VideoPaginator",()=>$o],["PaginatorInfo",()=>Ie],["QuizPaginator",()=>Mo],["StudentGradePaginator",()=>To],["GradePaginator",()=>Fo],["DiscussionPaginator",()=>Wo],["Discussion",()=>ut],["DiscussionReply",()=>Tt],["VideoGrade",()=>On],["SimplePaginatorInfo",()=>ea],["PageInfo",()=>ra]],["User","Video","Grade","StudentGrade","Progress","Quiz","MultipleChoise","QuizAnswer","Discussion","DiscussionReply","VideoGrade"],"js")).props({users:o.optional(o.map(o.late(()=>Ce)),{}),videos:o.optional(o.map(o.late(()=>st)),{}),grades:o.optional(o.map(o.late(()=>Re)),{}),studentGrades:o.optional(o.map(o.late(()=>ot)),{}),progresses:o.optional(o.map(o.late(()=>it)),{}),quizzes:o.optional(o.map(o.late(()=>at)),{}),multipleChoises:o.optional(o.map(o.late(()=>Et)),{}),quizAnswers:o.optional(o.map(o.late(()=>Un)),{}),discussions:o.optional(o.map(o.late(()=>ut)),{}),discussionReplies:o.optional(o.map(o.late(()=>Tt)),{}),videoGrades:o.optional(o.map(o.late(()=>On)),{})}).actions(e=>({queryAuth(t,n=me.toString(),r={}){return e.query(`query auth { auth {
        ${typeof n=="function"?n(new R).toString():n}
      } }`,t,r)},queryVideo(t,n=fe.toString(),r={}){return e.query(`query video($id: ID!) { video(id: $id) {
        ${typeof n=="function"?n(new Y).toString():n}
      } }`,t,r)},queryGetVideoByGrade(t,n=fe.toString(),r={}){return e.query(`query getVideoByGrade($gradeId: ID!) { getVideoByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new Y).toString():n}
      } }`,t,r)},queryVideoNotInGrade(t,n=fe.toString(),r={}){return e.query(`query videoNotInGrade($id: ID!) { videoNotInGrade(id: $id) {
        ${typeof n=="function"?n(new Y).toString():n}
      } }`,t,r)},queryQuizAnswers(t,n=Fn.toString(),r={}){return e.query(`query quizAnswers { quizAnswers {
        ${typeof n=="function"?n(new Mt).toString():n}
      } }`,t,r)},queryIsUniqueEmail(t,n={}){return e.query("query isUniqueEmail($email: String!) { isUniqueEmail(email: $email) }",t,n)},queryUserByGrade(t,n=me.toString(),r={}){return e.query(`query userByGrade($gradeId: ID!) { userByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new R).toString():n}
      } }`,t,r)},queryVideoByGrade(t,n=fe.toString(),r={}){return e.query(`query videoByGrade($gradeId: ID!) { videoByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new Y).toString():n}
      } }`,t,r)},queryQuizByGrade(t,n=Se.toString(),r={}){return e.query(`query quizByGrade($gradeId: ID!) { quizByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new re).toString():n}
      } }`,t,r)},queryProgressByGrade(t,n=Be.toString(),r={}){return e.query(`query progressByGrade($gradeId: ID!) { progressByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new de).toString():n}
      } }`,t,r)},queryGradeAll(t,n=Qe.toString(),r={}){return e.query(`query gradeAll { gradeAll {
        ${typeof n=="function"?n(new ue).toString():n}
      } }`,t,r)},queryGradeById(t,n=Qe.toString(),r={}){return e.query(`query gradeById($id: ID!) { gradeById(id: $id) {
        ${typeof n=="function"?n(new ue).toString():n}
      } }`,t,r)},queryGradeQuizes(t,n=Se.toString(),r={}){return e.query(`query gradeQuizes($gradeId: ID!) { gradeQuizes(grade_id: $gradeId) {
        ${typeof n=="function"?n(new re).toString():n}
      } }`,t,r)},queryProgress(t,n=Be.toString(),r={}){return e.query(`query progress { progress {
        ${typeof n=="function"?n(new de).toString():n}
      } }`,t,r)},queryGradeByAuth(t,n=so.toString(),r={}){return e.query(`query gradeByAuth { gradeByAuth {
        ${typeof n=="function"?n(new rt).toString():n}
      } }`,t,r)},queryStudentProgress(t,n=Be.toString(),r={}){return e.query(`query studentProgress($userId: ID!) { studentProgress(user_id: $userId) {
        ${typeof n=="function"?n(new de).toString():n}
      } }`,t,r)},queryVideos(t,n=ko.toString(),r={}){return e.query(`query videos($gradeId: ID, $search: String, $first: Int, $page: Int) { videos(grade_id: $gradeId, search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new Nn).toString():n}
      } }`,t,r)},queryQuizes(t,n=Eo.toString(),r={}){return e.query(`query quizes($videoId: String!, $first: Int, $page: Int) { quizes(videoId: $videoId, first: $first, page: $page) {
        ${typeof n=="function"?n(new Hn).toString():n}
      } }`,t,r)},queryStudents(t,n=zt.toString(),r={}){return e.query(`query students($search: String, $gradeId: String, $first: Int, $page: Int) { students(search: $search, grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new dt).toString():n}
      } }`,t,r)},queryGrades(t,n=Lo.toString(),r={}){return e.query(`query grades($search: String, $first: Int, $page: Int) { grades(search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new Bn).toString():n}
      } }`,t,r)},queryGetStudentByGrade(t,n=zt.toString(),r={}){return e.query(`query getStudentByGrade($gradeId: ID!, $first: Int, $page: Int) { getStudentByGrade(grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new dt).toString():n}
      } }`,t,r)},queryStudentGrades(t,n=zt.toString(),r={}){return e.query(`query studentGrades($gradeId: String, $search: String, $first: Int, $page: Int) { studentGrades(grade_id: $gradeId, search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new dt).toString():n}
      } }`,t,r)},queryDiscussion(t,n=Oo.toString(),r={}){return e.query(`query discussion($gradeId: ID!, $first: Int, $page: Int) { discussion(grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new Qn).toString():n}
      } }`,t,r)},mutateLogin(t,n){return e.mutate("mutation login($email: String!, $password: String!) { login(email: $email, password: $password) }",t,n)},mutateLogout(t,n){return e.mutate("mutation logout { logout }",t,n)},mutateVideo(t,n=fe.toString(),r){return e.mutate(`mutation video($gradeId: String!, $title: String!, $caption: String!, $description: String!, $content: Upload!) { video(grade_id: $gradeId, title: $title, caption: $caption, description: $description, content: $content) {
        ${typeof n=="function"?n(new Y).toString():n}
      } }`,t,r)},mutateVideoUpdate(t,n=fe.toString(),r){return e.mutate(`mutation videoUpdate($id: ID!, $title: String!, $caption: String!, $description: String!) { videoUpdate(id: $id, title: $title, caption: $caption, description: $description) {
        ${typeof n=="function"?n(new Y).toString():n}
      } }`,t,r)},mutateVideoDelete(t,n=fe.toString(),r){return e.mutate(`mutation videoDelete($id: ID!) { videoDelete(id: $id) {
        ${typeof n=="function"?n(new Y).toString():n}
      } }`,t,r)},mutateQuizDelete(t,n=Se.toString(),r){return e.mutate(`mutation quizDelete($id: ID!) { quizDelete(id: $id) {
        ${typeof n=="function"?n(new re).toString():n}
      } }`,t,r)},mutateMultipleChoiseQuiz(t,n=Se.toString(),r){return e.mutate(`mutation multipleChoiseQuiz($videoId: String!, $showAt: Int!, $options: [MultipleChoiseInput!]!, $answer: Int!, $additionalFile: Upload, $question: String!) { multipleChoiseQuiz(video_id: $videoId, show_at: $showAt, options: $options, answer: $answer, additionalFile: $additionalFile, question: $question) {
        ${typeof n=="function"?n(new re).toString():n}
      } }`,t,r)},mutateImageMatchQuiz(t,n=Se.toString(),r){return e.mutate(`mutation imageMatchQuiz($videoId: String!, $showAt: Int!, $text: String!) { imageMatchQuiz(video_id: $videoId, show_at: $showAt, text: $text) {
        ${typeof n=="function"?n(new re).toString():n}
      } }`,t,r)},mutateLetterSequenceQuiz(t,n=Se.toString(),r){return e.mutate(`mutation letterSequenceQuiz($videoId: String!, $showAt: Int!, $text: String!) { letterSequenceQuiz(video_id: $videoId, show_at: $showAt, text: $text) {
        ${typeof n=="function"?n(new re).toString():n}
      } }`,t,r)},mutateQuizAnswer(t,n=Fn.toString(),r){return e.mutate(`mutation quizAnswer($args: CreateQuizAnswerInput!) { quizAnswer(args: $args) {
        ${typeof n=="function"?n(new Mt).toString():n}
      } }`,t,r)},mutateUser(t,n=me.toString(),r){return e.mutate(`mutation user($args: CreateUserInput!) { user(args: $args) {
        ${typeof n=="function"?n(new R).toString():n}
      } }`,t,r)},mutateLoginWithInvitation(t,n){return e.mutate("mutation loginWithInvitation($invitation: String!, $password: String!) { loginWithInvitation(invitation: $invitation, password: $password) }",t,n)},mutateUserChangeUserPassword(t,n){return e.mutate("mutation userChangeUserPassword($password: String!, $passwordConfirmation: String!) { userChangeUserPassword(password: $password, password_confirmation: $passwordConfirmation) }",t,n)},mutateSentInvitation(t,n){return e.mutate("mutation sentInvitation($id: String!) { sentInvitation(id: $id) }",t,n)},mutateUserEdit(t,n=me.toString(),r){return e.mutate(`mutation userEdit($id: String!, $name: String, $email: String) { userEdit(id: $id, name: $name, email: $email) {
        ${typeof n=="function"?n(new R).toString():n}
      } }`,t,r)},mutateUserActivation(t,n=me.toString(),r){return e.mutate(`mutation userActivation($id: String!, $password: String!) { userActivation(id: $id, password: $password) {
        ${typeof n=="function"?n(new R).toString():n}
      } }`,t,r)},mutateUserDelete(t,n=me.toString(),r){return e.mutate(`mutation userDelete($id: String!) { userDelete(id: $id) {
        ${typeof n=="function"?n(new R).toString():n}
      } }`,t,r)},mutateGrade(t,n=Qe.toString(),r){return e.mutate(`mutation grade($name: String!) { grade(name: $name) {
        ${typeof n=="function"?n(new ue).toString():n}
      } }`,t,r)},mutateGradeEdit(t,n=Qe.toString(),r){return e.mutate(`mutation gradeEdit($id: ID!, $name: String) { gradeEdit(id: $id, name: $name) {
        ${typeof n=="function"?n(new ue).toString():n}
      } }`,t,r)},mutateAddVideoInGrade(t,n=Ko.toString(),r){return e.mutate(`mutation addVideoInGrade($videoId: ID!, $gradeId: ID!) { addVideoInGrade(video_id: $videoId, grade_id: $gradeId) {
        ${typeof n=="function"?n(new Rn).toString():n}
      } }`,t,r)},mutateUpdateVideoProgress(t,n=Be.toString(),r){return e.mutate(`mutation updateVideoProgress($videoId: ID!) { updateVideoProgress(video_id: $videoId) {
        ${typeof n=="function"?n(new de).toString():n}
      } }`,t,r)},mutateUpdateQuizProgress(t,n=Be.toString(),r){return e.mutate(`mutation updateQuizProgress($quizId: ID!, $correct: Boolean!) { updateQuizProgress(quiz_id: $quizId, correct: $correct) {
        ${typeof n=="function"?n(new de).toString():n}
      } }`,t,r)},mutateDiscussion(t,n=Gt.toString(),r){return e.mutate(`mutation discussion($gradeId: ID!, $userId: ID!, $content: String!) { discussion(grade_id: $gradeId, user_id: $userId, content: $content) {
        ${typeof n=="function"?n(new Pe).toString():n}
      } }`,t,r)},mutateDiscussionReply(t,n=At.toString(),r){return e.mutate(`mutation discussionReply($userId: ID!, $discussionId: ID!, $content: String!) { discussionReply(user_id: $userId, discussion_id: $discussionId, content: $content) {
        ${typeof n=="function"?n(new We).toString():n}
      } }`,t,r)},mutateUpdateDiscussion(t,n=Gt.toString(),r){return e.mutate(`mutation updateDiscussion($id: ID!, $content: String!) { updateDiscussion(id: $id, content: $content) {
        ${typeof n=="function"?n(new Pe).toString():n}
      } }`,t,r)},mutateUpdateDiscussionReply(t,n=At.toString(),r){return e.mutate(`mutation updateDiscussionReply($id: ID!, $content: String!) { updateDiscussionReply(id: $id, content: $content) {
        ${typeof n=="function"?n(new We).toString():n}
      } }`,t,r)},mutateDeleteDiscussion(t,n=Gt.toString(),r){return e.mutate(`mutation deleteDiscussion($id: ID!) { deleteDiscussion(id: $id) {
        ${typeof n=="function"?n(new Pe).toString():n}
      } }`,t,r)},mutateDeleteDiscussionReply(t,n=At.toString(),r){return e.mutate(`mutation deleteDiscussionReply($id: ID!) { deleteDiscussionReply(id: $id) {
        ${typeof n=="function"?n(new We).toString():n}
      } }`,t,r)}}))),aa=oa.actions(e=>({log(){console.log(JSON.stringify(e))}})),jn=er(sn),z=tr(jn,sn),sa=bt(pe({email:N().required().email(),password:N().required().min(6)})),da=e=>[{name:"email",type:"email",label:"Masukan email anda",icon:nr},{name:"password",type:"password",label:"Password",icon:ir}].map(t=>x(g({},t),{disabled:e,fullWidth:!0})),Kn=u.exports.createContext(null),Vt=()=>u.exports.useContext(Kn);function Yn(){const e=Vt();return u.exports.useCallback(async t=>{const n=await e.queryAuth();if(t&&n&&n.auth){const{auth:r}=n;return t({id:r.id,name:r.name,email:r.email,role:r.role})}if(n&&n.auth){const{auth:r}=n;return{name:r.name,email:r.email,role:r.role}}return null},[])}function ua(e){const t=Te({resolver:sa}),{setQuery:n,loading:r,data:a}=z(),s=a&&!a.login&&!r;u.exports.useEffect(()=>{a&&a.login&&e()},[a]);const d=t.handleSubmit(l=>n(p=>p.mutateLogin(l)));return{form:t,onSubmit:d,loading:r,isCredentialInvalid:s}}class la extends u.exports.Component{constructor(t){super(t);v(this,"rootStore");this.rootStore=aa.create(void 0,{gqlHttpClient:new rr.GraphQLClient(this.props.url,{credentials:"include"})})}render(){return i(jn.Provider,{value:this.rootStore,children:i(Kn.Provider,{value:this.rootStore,children:this.props.children})})}}const ca="imandidikr@gmail.com",pa="password";var ha={email:ca,password:pa};function T(e=!1){const[t,n]=u.exports.useState(e),r=u.exports.useCallback(s=>()=>n(s),[]),a=u.exports.useCallback(()=>{n(!t)},[t]);return[t,{force:r,toggle:a,inline:n}]}const ga=()=>{const[e,{force:t}]=T(),{user:n,setUser:r}=ie(),a=Yn(),s=Vt(),d=u.exports.useCallback(()=>s.mutateLogin(ha).then(({login:l})=>{if(l)return a(r)}),[]);return i(S,{children:i(or,{ariaLabel:"SpeedDial example",open:e,sx:{position:"fixed",bottom:"1rem",right:"1rem"},onMouseEnter:t(!0),onMouseLeave:t(!1),icon:i(ar,{}),children:i(sr,{onClick:d,FabProps:{disabled:Boolean(n)},tooltipTitle:"Login",icon:i(dr,{})})})})};function ma(){const[e]=dn("admin-sidebar-open"),[t,n]=dn("admin-sidebar-open"),r=()=>n(!0),a=()=>n(!1),[s,d]=u.exports.useState(""),l=Ge(),p=un(l.breakpoints.down("md"));return u.exports.useEffect(()=>{p&&e&&n(!1)},[e,p]),{title:s,setTitle:d,sidebaropen:Boolean(t),handleCloseDrawer:a,handleOpenDrawer:r}}const Xn=u.exports.createContext(null),Lt=()=>u.exports.useContext(Xn);function Ft(){const e=Ge();return un(e.breakpoints.down("sm"))}function ke(e){return wt(e).replaceAll("query","").replaceAll("mutate","").camelCase().value()}function $e({api:e,merge:t={},parser:n}){const{data:r,loading:a,error:s,setQuery:d}=z(),l=ke(e),p=m=>(n&&(m=g({},n(m))),d(f=>f[e](g(g({},m),t))));return[{loading:a,response:r?r[l]:null,error:s},p]}const fa=240,xa=ur(Ve,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:t})=>g({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},t&&{marginLeft:fa,[e.breakpoints.down("sm")]:{marginLeft:0,width:"100%"},transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})})),ya={paddingLeft:[0,0],paddingRight:[0,0],display:["block","flex"],color:"#2c3e50","& > .page-info":{paddingX:2,display:"flex",alignItems:"center"},"& > .search-bar":{borderRadius:1,display:"flex",bgcolor:"red",alignItems:"center",border:"solid 1px #f8f8f8",boxShadow:"inset 0 1px 2px #eee","& > .icon-container":{alignItems:"center",display:"flex",paddingX:2,background:"#f9f9f9",height:42}}},va=C(()=>{const{user:e}=ie(),t=Ft(),[n,r]=u.exports.useState(null),[{loading:a,response:s},d]=$e({api:P.mutateLogout}),{setUser:l}=ie(),p=H();u.exports.useEffect(()=>{s&&(p("/"),l(null))},[s]);const m=()=>{d({})},f=w=>{r(n?null:w.target)};if(!e)return i(S,{});const{name:_}=e;return c(S,{children:[i(lr,{sx:{zIndex:100*100,color:"white"},open:a,children:c(h,{sx:{textAlign:"center"},children:[i(he,{color:"inherit"}),i(y,{children:"Mengeluarkan akun anda"})]})}),i(cr,{PaperProps:{elevation:1,sx:{width:200}},onClose:()=>r(null),open:Boolean(n),anchorEl:n,children:i(ln,{onClick:m,children:"Logout"})}),i(h,{sx:{marginLeft:"auto",position:["absolute","static"],top:0,right:0},children:t?i(be,{onClick:f,children:i(cn,{})}):i(b,{onClick:f,endIcon:i(pr,{}),startIcon:i(cn,{}),children:t?"":_})})]})}),Zn=()=>i(S,{children:i(xa,{sx:{borderLeft:"none",background:"white",color:"black"},variant:"outlined",elevation:0,position:"fixed",open:!1,children:i(L,{children:c(Le,{sx:ya,children:[i(h,{className:"page-info",children:c(h,{sx:{display:"flex",alignItems:"center",bgcolor:e=>e.palette.grey.A100,borderRadius:2},children:[i(hr,{sx:{flex:1,paddingLeft:2},placeholder:"Pencarian"}),i(Ct,{sx:{mr:2}})]})}),i(va,{})]})})})}),ei=()=>{const{user:e}=ie();return e?i(h,{sx:{minHeight:"10vh",display:"flex",alignItems:"center",bgcolor:"primary.dark",color:"white",py:3},children:c(L,{children:[c(y,{sx:{fontWeight:"bolder"},variant:"h4",children:["Selamat datang, ",e.name]}),i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:e.role})]})}):i(S,{})},ti=u.exports.createContext(null),ae=()=>u.exports.useContext(ti);class _a extends u.exports.Component{constructor(t){super(t);v(this,"updateNav",t=>{this.setState({navs:[...t]})});v(this,"updateBackUrl",(t=null)=>{this.setState({backurl:t})});v(this,"getContextValue",()=>x(g({},this.state),{updateNavs:this.updateNav,updateBackUrl:this.updateBackUrl}));this.state={navs:[],backurl:null}}render(){return i(ti.Provider,{value:this.getContextValue(),children:this.props.children})}}const ni=()=>{const{navs:e,backurl:t}=ae(),n=H(),{pathname:r}=Xe(),a=l=>{n(l)};console.log(r),u.exports.useEffect(()=>{document.body.scroll({top:0});const l=document.getElementById("root");l&&(l.scrollTo(0,0),window.scrollTo({top:0,behavior:"smooth"}))},[r]);const s=()=>{t&&n(t.url)},d=()=>{const l=e.findIndex(p=>p.path===r.replaceAll("%20"," "));return console.log(e),l===-1?0:l};return i(Ve,{component:ee.div,animate:{height:e.length?"fit-content":0},sx:{overflow:"hidden"},position:"static",color:"transparent",elevation:0,variant:"outlined",children:c(L,{sx:{"& > *":{color:"white"},py:0,minHeight:"fit-content",display:"flex",alignItems:"center"},children:[i(pn,{sx:{py:0},value:d(),children:e.map((l,p)=>i(Ze,{onClick:()=>a(l.path),sx:{py:0,my:0,textTransform:"none",fontWeight:"bolder"},label:l.label,value:p},l.path))}),i(ee.div,{style:{flex:1,marginLeft:"auto",width:"fit-content",textAlign:"right"},animate:{opacity:t?1:0},children:i(b,{onClick:s,startIcon:i(St,{}),sx:{textTransform:"none"},children:t==null?void 0:t.label})})]})})},ba=({children:e})=>{const t=ma();return t.sidebaropen,t.handleOpenDrawer,Ft(),ae(),u.exports.useEffect(()=>{},[]),i(Xn.Provider,{value:t,children:c(h,{sx:{background:"#f9f9f9",minHeight:"100vh"},children:[i(hn,{}),i(Zn,{}),c(h,{id:"main-component",component:"main",sx:{flexGrow:1,minHeight:"100vh"},children:[i(Le,{}),i(ei,{}),i(ni,{}),e]})]})})},wa=({children:e})=>i(S,{children:e});function Ca(){const{user:e}=ie(),{loading:t,data:n}=z(d=>{var l;return d.queryStudentProgress({userId:(l=e==null?void 0:e.id)!=null?l:""})}),r=()=>{var d;return n&&((d=n.studentProgress)==null?void 0:d.videoHistories)?n.studentProgress.videoHistories:[]},a=()=>{var d;return n&&((d=n.studentProgress)==null?void 0:d.videoHistories)?n.studentProgress.quizHistories:[]},s=d=>{const l=r().find(p=>p.video_id.toString()===d);return l?l.time:0};return{progress:n?n.studentProgress:null,loading:!n||t,videoHistory:r(),quizHistory:a(),getPlaying:s}}function Sa(){const{loading:e,data:t}=z(n=>n.queryGradeByAuth({},r=>r.id.grade(a=>a.id.name.video_count)));return{studentGrade:t?t.gradeByAuth:null,loading:!t||e}}function Ia({studentGrade:e}){const{data:t,loading:n,setQuery:r}=z(),a=t?t.getVideoByGrade:[],s=(d,l)=>{const p=a.find(m=>m.id===d);return p?Math.floor(p.duration/l):0};return u.exports.useEffect(()=>{e&&r(d=>d.queryGetVideoByGrade({gradeId:e.grade.id}))},[e]),{videos:a,loading:!t||n,getPlayingPercentage:s}}function Pa(){const e=Ca(),t=Sa(),n=Ia(t),r=[e.loading,t.loading,n.loading].find(Boolean);return{progressInfo:e,videoList:n,gradeInfo:t,isPageLoading:Boolean(r)}}const ii=u.exports.createContext(null);function lt(){return u.exports.useContext(ii)}const ct=()=>i(h,{sx:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%,-50%)",zIndex:100*100},children:i(he,{size:150})}),ka=C(({children:e})=>{const t=Pa();return i(ii.Provider,{value:t,children:c(h,{sx:{background:"#f9f9f9",minHeight:"100vh"},children:[i(hn,{}),i(Zn,{}),c(h,{id:"main-component",component:"main",sx:{flexGrow:1,minHeight:"100vh"},children:[i(Le,{}),i(ei,{}),i(ni,{}),t.isPageLoading?i(ct,{}):e]})]})})});function Ut(e){const{updateNavs:t,navs:n}=ae();u.exports.useEffect(()=>{!e.length&&!n.length&&t([{label:"Dashboard",path:"/"},{label:"Diskusi",path:"/discussion"}])},[e])}const $a={[ge.ADMIN]:ba,[ge.STUDENT]:ka,GUEST:wa},qa=e=>{const{user:t}=ie(),n=t?t.role:"GUEST",r=$a[n];return i(r,g({},e))};class ri extends u.exports.Component{constructor(){super(...arguments);v(this,"getValue",()=>{const{type:t="text",select:n,controller:r}=this.props;switch(t){case"number":return 0;case"money":return 0;default:{if(n)return"__default__";if(r){const{value:a}=r.field;if(!(a instanceof File))return a!=null?a:""}return this.props.value?this.props.value:""}}});v(this,"handleChange",t=>{const n=t.target.value,{onChange:r}=this.props;r&&r(n),this.props.controller&&this.props.controller.field.onChange(n)})}propBuilder(){var p;const a=this.props,{controller:t}=a,n=U(a,["controller"]),r={onChange:this.handleChange,value:this.getValue()};if(t){const s=t,{field:d}=s,l=d,{ref:m}=l,f=U(l,["ref"]),{fieldState:_}=s;if(_.error){const{message:w}=_.error;r.helperText=w,r.error=!0}return r.onChange=w=>{f==null||f.onChange(w),this.handleChange(w)},x(g(g(g({},n),f),r),{inputRef:m,inputProps:g({},(p=n.inputProps)!=null?p:{})})}return g(g({},n),r)}render(){return i(gn,g({},this.propBuilder()))}}const E=n=>{var r=n,{noUseForm:e}=r,t=U(r,["noUseForm"]);const a=Fe();if(!a&&!e&&!t.onChange)throw new Error("Please provide onChange props if without use useForm");if(e)return i(ri,g({},t));const s=te({name:t.name,control:a.control});return i(ri,g({controller:s},t))},Da=({component:e,makeProps:t,getKey:n,data:r})=>i(S,{children:r.map(a=>{let s=n?n(a):a;typeof a=="object"&&"key"in a&&(s=a.key);const d=x(g({},t?t(a):a),{key:s});return i(e,g({},d))})});function Ea(e){return u.exports.useCallback(()=>i(Da,g({},e)),[e])}const Ma={display:{sm:"block",md:"flex"},bgcolor:"primary.main",height:"100vh",overflow:"hidden","& > .content":{display:"flex",alignItems:"center",justifyContent:"center",width:{sm:"100%",md:"50%"},height:"100%"}},za=n=>{var r=n,{icon:e}=r,t=U(r,["icon"]);return i(h,{sx:{marginY:2,padding:2},children:i(E,x(g({},t),{InputProps:{endAdornment:i(mn,{position:"end",children:i(e,{})})}}))})},Aa=()=>{const e=Yn(),{enqueueSnackbar:t}=j(),n=ie(),r=H();return()=>{e().then(a=>{if(a){const{name:s}=a;t(`Selamat datang ${s}`),r(a.role===ge.ADMIN?"/classroom":"/"),n.setUser(a)}})}},Ta=C(()=>{const e=Aa(),{isCredentialInvalid:t,form:n,onSubmit:r,loading:a}=ua(e),s=da(a),d=Ea({getKey({name:l}){return l},component:za,data:s});return i(J,x(g({},n),{children:c("form",{onSubmit:r,children:[i(d,{}),c(h,{textAlign:"right",padding:2,children:[i(Ue,{in:t,timeout:"auto",children:i(y,{sx:{color:"error.light",marginY:2},variant:"subtitle2",children:"Kombinasi email & password salah"})}),i(b,{variant:"contained",size:"large",type:"submit",endIcon:a?i(he,{sx:{color:"white"},size:15}):i(gr,{}),children:"Masuk"})]})]})}))}),Ga=()=>c(h,{component:"main",sx:Ma,children:[i("div",{className:"content",children:c(h,{sx:{color:"white"},children:[i(y,{variant:"h1",children:"Bisindo"}),i(y,{variant:"h5",children:"Selamat datang"}),i(y,{children:"Kami adalah platform kursus online untuk pembelajaran bahasa isyarat."})]})}),i("div",{className:"content",children:c(F,{sx:{padding:2,width:"80%",height:"60%",color:"#2c3e50"},children:[i(y,{align:"center",variant:"h5",sx:{fontWeight:"light"},children:"Login dengan email & password anda"}),i(B,{sx:{marginY:2}}),i(Ta,{})]})})]});function Va(e){return e?{data:e.data,paginator:e.paginatorInfo}:{data:[],paginator:{perPage:10,currentPage:0,count:0,lastPage:0,lastItem:0,firstItem:0,hasMorePages:!1,total:0,__typename:"PaginatorInfo"}}}const La=(e,t)=>{const n=ke(e),{data:r,loading:a,setQuery:s}=z(),d=p=>s(m=>m[e](p,f=>f.data(t).paginatorInfo(new xe().currentPage.hasMorePages.lastPage.perPage.count.total.lastItem.firstItem)));return{result:Va(r&&r[n]?r[n]:null),fetch:d,loading:a,hasResponse:Boolean(r)}},Fa=({include:e,callback:t})=>{const[n,r]=u.exports.useState(e);return{updateParameter:d=>l=>{const p=x(g({},n),{[d]:l});r(g({},p)),t(x(g({},p),{page:1,first:10}))},removeParam:d=>{let l={};r(p=>(delete p[d],l=p,g({},p))),t(x(g({},l),{page:1,first:10}))},parameter:n}},Ua=({callback:e,paginator:t,merge:n})=>{const r=u.exports.useCallback((d,l)=>{e(x(g({},n),{page:d,first:l}))},[n]);return{go:r,next:()=>r(t.currentPage+1,10),prev:()=>r(t.currentPage+1,10)}};function Na({includeQuery:e,api:t,selector:n}){const{fetch:r,loading:a,result:s,hasResponse:d}=La(t,n),{parameter:l,updateParameter:p,removeParam:m}=Fa({include:e,callback:r}),f=Ua({callback:r,paginator:s.paginator,merge:l}),_=u.exports.useCallback(()=>{r(g({page:1,first:10},e))},[e]),w=d&&s.data.length===0;return{result:s,actions:x(g({},f),{updateParameter:p,parameter:l,removeParam:m}),loading:a,initialFetch:_,isEmpty:w,hasResponse:d}}function pt(e,t){return(n={})=>Na({includeQuery:n,api:e,selector:t})}const Ha={quizByVideo:pt(oe.queryQuizes,e=>e.show_at.id.type.additional_image.question.questionAnswer.image_matcher.choises(t=>t.id.image.text.index)),grades:pt(oe.queryGrades,Qe),students:pt(oe.queryStudents,e=>e.id.student(me).grade(t=>t.id.name)),discussion:pt(oe.queryDiscussion,e=>e.id.content.created_at.user_id.user(t=>t.name.id).replies(t=>t.user_id.id.user(n=>n.name).content.user_id.created_at))},oi=u.exports.createContext(null);function G(){return u.exports.useContext(oi)}const ht=C(({dataKey:e,includes:t={},children:n})=>{const r=Ha[e];if(!r)throw new Error(`Paginator for ${e} is not defined`);const a=r(t);return i(oi.Provider,{value:a,children:n})}),Ba=["videos","student","editor","discussion"],Qa=()=>{const[e,t]=u.exports.useState({selected:null,mobileControlTab:"list",tab:"videos"}),{selected:n,mobileControlTab:r}=e;Ft();const a=u.exports.useCallback(p=>{t(m=>x(g({},m),{selected:p,mobileControlTab:"manage"}))},[r]),s=u.exports.useCallback(p=>{t(m=>x(g({},m),{tab:p}))},[]),d=u.exports.useCallback(p=>{t(m=>x(g({},m),{mobileControlTab:p}))},[]);u.exports.useEffect(()=>{n&&s("videos")},[n]);const l=u.exports.useCallback(p=>()=>a(p),[]);return{selected:n,tablist:Ba,activeTab:e.tab,mobileControlTab:r,setMobileControlTab:d,setActiveTab:s,setModel:l}},ai=u.exports.createContext(null);function Ra(){return u.exports.useContext(ai)}function Oa({api:e,rule:t,parser:n,merge:r={}}){const a=Te({resolver:bt(t)}),s=ke(e),{data:d,store:l}=z(),[p,m]=u.exports.useState(!1),[f,_]=u.exports.useState(!1),[w,k]=u.exports.useState({response:null}),I=u.exports.useCallback(Z=>{_(!1),k({response:null});const se=n?n(g(g({},Z),r)):g(g({},Z),r);return m(!0),l[e](se).currentPromise().then(Ae=>{m(!1),Ae&&Ae[s]&&k({response:Ae}),_(!1)}).catch(()=>{console.log("Error"),_(!0),m(!1)})},[e]),M=a.handleSubmit(I),X=u.exports.useCallback(()=>{a.reset({})},[]),ce=u.exports.useCallback(Z=>{Object.values(se=>{a.setValue(se,Z[se])})},[]);return{response:w.response,form:a,setFormValue:ce,reset:X,loading:p,handler:M,error:f}}function O({api:e,rule:t}){return(n={},r)=>Oa({api:e,rule:t,merge:n,parser:r})}const Nt=pe({name:N().required()}),Ht={videos:{required:"Silahkan pilih video terlebih dahulu"},title:{required:"Silahkan isi judul video"},caption:{required:"Silahkan isi caption video"},description:{required:"Silahkan isi deskripsi video"}},Wa=It().test("video",Ht.videos.required,e=>e&&e instanceof File),si=It().test("description validator",Ht.description.required,e=>{try{return e.blocks.length===1?e.blocks[0].text!=="":e.blocks.length>0}catch{return!1}}),Ja=pe({content:Wa.required(Ht.videos.required),title:N().required(),caption:N().required(),description:si.required()}),ja=pe({title:N().required(),caption:N().required(),description:si.required()}),di=pe({email:N().required().email(),name:N().required()}),Ka=pe({password:N().required("Password wajib disi").min(6,"Minimal password  6 karakter"),passwordConfirmation:N().required("Silahkan konfirmasi password").oneOf([mr("password")],"Konfirmasi password salah")}),Ya={description:{required:"Silahkan isi konten diskusi"}},Xa=It().test("description validator",Ya.description.required,e=>{try{return e.blocks.length===1?e.blocks[0].text!=="":e.blocks.length>0}catch{return!1}}),gt=pe({content:Xa.required()}),Za={createBatch:O({api:P.mutateGrade,rule:Nt}),editBatch:O({api:P.mutateGrade,rule:Nt}),addVideo:O({api:P.mutateVideo,rule:Ja}),addUser:O({api:P.mutateUser,rule:di}),addDiscussion:O({api:P.mutateDiscussion,rule:gt}),editDiscussion:O({api:P.mutateUpdateDiscussion,rule:gt}),addDiscussionReply:O({api:P.mutateDiscussionReply,rule:gt}),editDiscussionReply:O({api:P.mutateUpdateDiscussionReply,rule:gt}),editVideo:O({api:P.mutateVideoUpdate,rule:ja}),activation:O({api:P.mutateUserActivation,rule:Ka}),editUser:O({api:P.mutateUserEdit,rule:di})},ui=u.exports.createContext(null);function ye(){return u.exports.useContext(ui)}const qe=C(({mutateKey:e,merge:t={},parser:n,children:r})=>{const a=Za[e];if(!a)throw new Error(`Please implemented mutation ${e}`);const s=a(t,n);return i(ui.Provider,{value:s,children:r})}),es=C(({onSuccess:e,model:t})=>{const{setFormValue:n,response:r,form:a,handler:s,loading:d}=ye();return u.exports.useEffect(()=>{r&&e(r)},[r]),u.exports.useEffect(()=>{t&&n({name:t.name})},[t]),i(J,x(g({},a),{children:c("form",{onSubmit:s,children:[i(E,{fullWidth:!0,name:"name",label:"Nama batch"}),i(b,{sx:{marginY:2},variant:"contained",size:"large",type:"submit",endIcon:d?i(he,{sx:{color:"white"},size:15}):i(et,{}),children:"Simpan"})]})}))}),ts={marginTop:2,textTransform:"none",mb:2},ns=()=>{const[e,{toggle:t,inline:n}]=T(),{enqueueSnackbar:r}=j(),{initialFetch:a}=G();return c(S,{children:[i(b,{onClick:t,startIcon:e?i(fr,{}):i(fn,{}),sx:ts,variant:"outlined",children:e?"Tutup":"Tambah batch baru"}),i(Ue,{in:e,sx:{mb:2},timeout:"auto",children:i(qe,{mutateKey:"createBatch",children:i(F,{sx:{padding:2,borderRadius:0},children:i(es,{onSuccess:d=>{r(`${d.name} berhasil di tambahkan`,{variant:"success"}),n(!1),a()}})})})})]})},is=()=>{const[e,t]=u.exports.useState(""),n=_=>t(_),{actions:{removeParam:r,parameter:a,updateParameter:s},result:d,loading:l,hasResponse:p}=G();return i(L,{children:c("form",{onSubmit:_=>{s("search")(`%${e}%`),_.preventDefault()},onReset:()=>{r("search"),t("")},children:[i(E,{fullWidth:!0,disabled:l,variant:"standard",InputProps:{startAdornment:i(mn,{sx:{px:2},position:"start",children:i(Ct,{})})},sx:{bgcolor:"white","& input":{py:2}},placeholder:"Masukan kata kunci pencarian",name:"search",onChange:n,value:e,noUseForm:!0,size:"medium"}),c(h,{sx:{p:1,display:"flex",justifyContent:"flex-end"},children:[i(h,{sx:{display:p?"block":"none"},children:i(y,{variant:"caption",children:d.paginator.total?`Hasil pencarian : ${d.paginator.total} item`:`Data tidak di temukan dengan kata kunci "${a.search}"`})}),c(h,{sx:{ml:"auto"},children:[i(b,{type:"submit",startIcon:i(Ct,{}),disabled:l,children:"Cari"}),i(b,{type:"reset",startIcon:i(xr,{}),disabled:l||!e,children:"Reset"})]})]})]})})},li=({children:e,handleClose:t,open:n,isCloseDisabled:r})=>i(tt,{open:n,PaperProps:{sx:{minWidth:["80vw","50vw"]}},onClose:r?void 0:t,children:i(Pt,{children:e})}),W=a=>{var s=a,{loading:e,disabled:t,icon:n}=s,r=U(s,["loading","disabled","icon"]);return i(b,x(g({},r),{startIcon:e?i(he,{size:20}):n,type:"submit",disabled:t||e}))};function De({message:e,show:t,variant:n,callback:r,autoShow:a}){const{enqueueSnackbar:s,closeSnackbar:d}=j(),l=()=>{const p=()=>typeof e=="function"?e():e;d(),s(p(),{variant:n})};return u.exports.useEffect(()=>(d(),()=>{d()}),[]),u.exports.useEffect(()=>{a&&t&&r&&r(),!a&&t&&(r&&r(),l())},[t,n]),l}function rs(e=""){const t=H();return{navigate:()=>{t(e)},to:a=>()=>t(a)}}const ci=({icon:e,text:t})=>c(h,{sx:{display:"inline-flex",alignItems:"center",mr:2},children:[i(h,{sx:{mr:2},children:e}),i(y,{variant:"caption",children:t})]}),os=C(({batch:e,onSelect:t})=>{const n=`/classroom/${wt(e.name).slugify().value()}/${e.id}/videos`,{navigate:r}=rs(n);return c(F,{sx:{p:2,mx:[1,0],mb:2,display:["block","flex"]},children:[c(h,{sx:{width:["100%","80%"]},children:[i(y,{variant:"h4",sx:{textTransform:"capitalize"},children:e.name}),i(ci,{text:`${e.student_count} siswa`,icon:i(yr,{})}),i(ci,{text:`${e.video_count} video`,icon:i(vr,{})})]}),c(h,{sx:{width:["100%","20%"],"& >button":{mb:1}},children:[i(b,{onClick:r,size:"small",fullWidth:!0,variant:"outlined",children:"Manage"}),i(b,{onClick:t(e,"update"),size:"small",fullWidth:!0,variant:"outlined",children:"Ganti nama batch"}),i(b,{onClick:t(e,"delete"),size:"small",fullWidth:!0,variant:"outlined",children:"Hapus"})]})]})}),as=C(({selected:e,action:t,handleClose:n})=>{const r=Te({resolver:bt(Nt)}),[{response:a,loading:s},d]=$e({api:P.mutateGradeEdit,merge:{id:e?e.id:""}}),l=r.handleSubmit(d),p=De({show:Boolean(a&&t==="update"),message:"Perubahan berhasil disimpan",variant:"success",autoShow:!1});return u.exports.useEffect(()=>{a&&(n(),p())},[a]),u.exports.useEffect(()=>{e&&r.setValue("name",e.name)},[e]),i(li,{handleClose:n,open:t==="update",isCloseDisabled:s,children:i(J,x(g({},r),{children:c("form",{onSubmit:l,children:[i(y,{variant:"subtitle1",children:"Ganti nama batch"}),i(E,{fullWidth:!0,name:"name"}),i(W,{icon:i(et,{}),loading:s,children:"Simpan"})]})}))})}),ss=C(({selected:e,action:t,handleClose:n})=>{const[{response:r,loading:a},s]=$e({api:P.mutateGradeDelete,merge:{id:e?e.id:""}}),d=De({message:r?`${r.name} berhasil di hapus`:"",autoShow:!1,variant:"success",show:Boolean(r)}),{initialFetch:l}=G();return u.exports.useEffect(()=>{r&&(d(),l(),n())},[r]),c(li,{handleClose:n,open:t==="delete",isCloseDisabled:a,children:[c(y,{variant:"h5",children:["Apakah anda yakin untuk menghapus ",e?e.name:""," ?"]}),c(h,{sx:{pt:4,width:["100%","50%"],"& > button":{textTransform:"capitalize"}},children:[i(W,{onClick:()=>s({}),icon:i(we,{}),loading:a,children:"Hapus"}),i(b,{variant:"outlined",disabled:a,onClick:n,children:"Batal"})]})]})}),ds=C(()=>{const{result:{data:e}}=G(),[t,n]=u.exports.useState({selected:null,action:null}),{selected:r,action:a}=t,s=(l,p)=>()=>n({selected:l,action:p}),d=()=>{n({action:null,selected:r}),setTimeout(()=>{n({selected:null,action:null})},1e3)};return c(L,{children:[e.map(l=>i(os,{batch:l,onSelect:s},l.id)),i(as,x(g({},t),{handleClose:d})),i(ss,x(g({},t),{handleClose:d}))]})}),us=()=>{const{initialFetch:e,loading:t,isEmpty:n,hasResponse:r}=G();return Ra(),u.exports.useEffect(()=>{e()},[]),c(S,{children:[i(L,{children:i(ns,{})}),i(is,{}),i(ds,{})]})},ls=()=>{const{setTitle:e}=Lt(),{updateNavs:t}=ae();u.exports.useEffect(()=>(e("Menagemen batch"),t([]),()=>{e("")}),[]);const n=Qa();return i(ht,{dataKey:"grades",children:i(ai.Provider,{value:n,children:i(us,{})})})},cs=()=>i(ls,{}),ps=C(e=>{const{updateBackUrl:t}=ae();return u.exports.useEffect(()=>(t({url:"classroom",label:"kembali ke ruang kelas"}),()=>t(null)),[]),i(L,{children:i(xn,{})})}),hs=C(e=>{const t=Xe(),{updateBackUrl:n}=ae();return u.exports.useEffect(()=>{t.state&&t.state.backurl&&n(t.state.backurl)},[t]),i(L,{children:i(xn,{})})});function gs(e,t){const n=ke(e),{data:r,setQuery:a,loading:s}=z(),d=()=>{a(m=>m[e](t))};u.exports.useEffect(()=>{d()},[]);const l=()=>r?r[n]:[],p=()=>{if(s)return!1;const m=r&&r[n];return m?m.length===0:!1};return{data:l(),isEmpty:p(),loading:s,fetch:d,hasResponse:Boolean(r)}}function pi(e){return t=>gs(e,t)}const ms=pi(oe.queryVideoByGrade),fs={videoByGrade:ms,studentByGrade:pi(oe.queryStudents)},hi=u.exports.createContext(null);function xs(){return u.exports.useContext(hi)}const ys=C(({dataKey:e,props:t={},children:n})=>{const r=fs[e](t);return i(hi.Provider,{value:r,children:n})});function vs({api:e,provider:t,id:n}){const r=ke(e),a=w=>w[e]({id:n}),{loading:s,error:d,setQuery:l,data:p}=z(a),m=()=>l(a),f={refreshModel:m,pageLoading:s,error:Boolean(d),modelId:n,model:p?p[r]:null,hasResponse:Boolean(p&&p[r])};return x(g({},(()=>t?t(f):{})()),{refreshModel:m,pageLoading:s,error:Boolean(d),modelId:n,model:p?p[r]:null,hasResponse:Boolean(p&&p[r])})}const _s=e=>{const[t,n]=u.exports.useState({page:e[0],animate:"opacity",animateDirection:"left"});return[t,a=>{const s=e.findIndex(p=>p===a),d=e.findIndex(p=>p===t.page),l=s>d?"left":"right";n({page:a,animateDirection:l,animate:"x"})}]},mt=["VIDEOS","ADD-VIDEO","STUDENTS","QUIZ-CHECK","DISCUSSION"];function bs(){_s(mt),H();const{pathname:e}=Xe(),[t,n]=u.exports.useState("Videos"),[r,a]=u.exports.useState({animate:"x",animateDirection:"left"});nt(),u.exports.useEffect(()=>{let d=e.split("/").pop();if(d==="batch"&&(d="videos"),d){if(!mt.includes(d.toLocaleUpperCase()))return;n(d.toLocaleUpperCase())}},[e]);const s=d=>{const l=mt.findIndex(f=>f===d),p=mt.findIndex(f=>f===t),m=l>p?"left":"right";a({animateDirection:m,animate:"x"})};return{pageControll:[x(g({},r),{page:t}),s]}}function ws({pageLoading:e,model:t,hasResponse:n}){const[r,a]=u.exports.useState(!1),[s,d]=u.exports.useState(!1),l=()=>d(!0),p=()=>d(!1);u.exports.useEffect(()=>{!e&&t&&n&&setTimeout(()=>{a(!0)},1e3)},[e,n,t]);const{pageControll:m}=bs();return{showpage:r,progress:s,pageControll:m,showProgress:l,hideProgress:p}}const Cs=e=>({api:oe.queryGradeById,id:e,provider:ws}),gi=u.exports.createContext(null);function le(){return u.exports.useContext(gi)}function Ss(e){const{id:t,slug:n}=e,{setTitle:r}=Lt(),{updateNavs:a}=ae();return u.exports.useEffect(()=>{r(" "),a([]);const s=({path:l,label:p})=>({path:`/classroom/${n}/${t}/${l}`,label:p}),d=[{label:"Video",path:"videos"},{label:"Tambah video",path:"add-video"},{label:"Siswa",path:"students"},{label:"Periksa quis",path:"quiz-check"},{label:"Diskusi",path:"discussion"}].map(s);return a(d),()=>{r("")}},[t]),vs(Cs(t))}const ft=e=>C(()=>{const t=nt(),n=Ss(t);return u.exports.useEffect(()=>{n.refreshModel()},[]),i(gi.Provider,{value:n,children:i(ys,{dataKey:"videoByGrade",props:{gradeId:t.id},children:n.pageLoading||!n.model?i(ct,{}):i(e,{})})})}),Is=({model:e})=>{const t=H(),{model:n}=le(),r=()=>t(`/admin/video/${e.id}/info`,{state:{backurl:{url:`/classroom/${n.name}/${n.id}/videos`,label:`Manage ke kelas ${n.name}`}}});return i(F,{sx:{mb:2},children:c(Q,{container:!0,children:[i(Q,{item:!0,sm:12,md:2,children:i(h,{component:"img",src:e.thumbnail,sx:{width:"100%",height:"100%"}})}),i(Q,{item:!0,sm:12,md:8,children:i(h,{sx:{p:1},children:i(y,{variant:"h4",children:e.title})})}),i(Q,{item:!0,sm:12,md:2,sx:{display:"flex",alignItems:"center",p:2},children:i(b,{onClick:r,fullWidth:!0,children:"Manage video"})})]})})},Ps=ft(C(()=>{const{data:e,fetch:t}=xs();return u.exports.useEffect(()=>{t()},[]),i(h,{sx:{py:5},children:e.map(n=>i(Is,{model:n},n.id))})}));const Je=({url:e,onPlaying:t,play:n=!1,playOnTime:r})=>{const a=u.exports.useRef(null),[s,{toggle:d,inline:l}]=T(n);return u.exports.useEffect(()=>{r&&l(!1);const m=a.current;m&&r&&m.pause().then(()=>{m.callAdapter("setCurrentTime",r).catch(console.log)})},[r,a]),i(h,{children:c(_r,{playsinline:!0,ref:a,onVmCurrentTimeChange:m=>{t&&setTimeout(()=>{t(parseInt(m.detail.toFixed(1)))},1e3)},children:[e?i(br,{crossOrigin:"use-credentials",children:i("source",{"data-src":e})}):i(S,{}),i(wr,{children:c(Cr,{fullWidth:!0,children:[i(yn,{children:i(Sr,{})}),c(yn,{space:"top",children:[i(Ir,{}),i(Pr,{}),i(kr,{separator:"/"})]})]})})]})})},ks={noVideoText:"Silahkan pilih video terlebih dahulu",noVideoTextButton:"Pilih video",changeVideoTextButton:"Ganti video",changeVideoTextButton1:"Pilih video lainya",uploadVideoSuccess:"Video berhasil di tambahkan"};var $s={videos:ks};const qs=({name:e})=>{const{errors:t}=$r();if(!t[e])return i(u.exports.Fragment,{});const{message:n}=t[e];return i(qr,{error:!0,children:n})},Ds={backgroundColor:"white",position:"sticky",top:0,zIndex:10},mi=e=>{const t=JSON.parse(e);return typeof t!="object"?mi(t):t},Es=e=>{const t=e.value;if(!t)return K.EditorState.createEmpty();try{const n=mi(t);if(!("blocks"in n&&"entityMap"in n))return K.EditorState.createEmpty();const a=K.convertFromRaw(n);return K.EditorState.createWithContent(a)}catch{return K.EditorState.createEmpty()}};class Ms extends u.exports.Component{constructor(t){super(t);v(this,"EditorState");v(this,"reset",()=>{this.EditorState=K.EditorState.createEmpty()});v(this,"onEditorChange",t=>{const{field:n}=this.props;this.EditorState=t,n.onChange(K.convertToRaw(t.getCurrentContent()))});this.EditorState=Es(this.props.field),typeof this.props.field.value=="string"&&this.props.field.onChange(K.convertToRaw(this.EditorState.getCurrentContent())),this.props.editorRef&&(this.props.editorRef.current={reset:this.reset})}render(){const t=this.props.disableOptions?{options:[]}:{};return c(S,{children:[i(vn.exports.Editor,{onEditorStateChange:this.onEditorChange,toolbarHidden:this.props.disableOptions,toolbarStyle:Ds,editorState:this.EditorState,toolbar:t,editorStyle:{minHeight:300},placeholder:this.props.placeholder}),i(qs,{name:this.props.field.name})]})}}const zs=Dr(Ms),Bt=({name:e,editorRef:t,disableOptions:n=!1,placeholder:r=""})=>{const a=te({name:e});return i(zs,x(g({},a),{placeholder:r,editorRef:t,disableOptions:n}))},fi={value:"__disabled__",label:"Pilih salah satu opsi"};class xi extends u.exports.Component{constructor(t){super(t);v(this,"options");v(this,"handleFormChange",t=>{if(this.props.controller){const{controller:n}=this.props;if(n){const{onChange:r}=n.field;r(t)}}this.props.onChange&&this.props.onChange(t)});v(this,"handleChange",t=>{const n=t.target.value;this.handleFormChange(n)});v(this,"findInOption",t=>this.options.find(n=>n.value===t));v(this,"getErrorProps",()=>{var n,r;if(!this.props.controller)return{};const{fieldState:t}=this.props.controller;return{error:Boolean(t.error),helperText:(r=(n=t.error)==null?void 0:n.message)!=null?r:""}});v(this,"getValue",()=>{const t=r=>{if(!r)return"__disabled__";const a=this.findInOption(r);return a?a.value:"__disabled__"};if(this.props.controller){const{field:{value:r}}=this.props.controller;return t(r)}const{value:n}=this.props;return t(n)});v(this,"getFieldProps",()=>{var s;const a=this.props,{options:t,controller:n}=a,r=U(a,["options","controller"]);return x(g(g({},r),this.getErrorProps()),{SelectProps:x(g({},(s=r.SelectProps)!=null?s:{}),{inputRef:n==null?void 0:n.field.ref}),onChange:this.handleChange,value:this.getValue()})});this.options=[fi,...this.props.options]}render(){const t=this.getFieldProps();return i("div",{children:i(gn,x(g({},t),{select:!0,fullWidth:!0,children:this.options.map(n=>i(ln,{disabled:n.value===fi.value,value:n.value,children:n.label},n.value))}))})}}const xt=$s.videos,As=()=>{const e=Fe(),t=u.exports.useRef(null),[n,r]=u.exports.useState(""),a=d=>{const l=d.target.files?d.target.files[0]:null;if(l){e.setValue("content",l);const p=new FileReader;p.onloadend=()=>{r(p.result)},p.readAsDataURL(l)}},s=()=>{t.current&&t.current.click()};return Mr(()=>{var d;t.current&&((d=t.current)==null||d.addEventListener("change",a))}),[{inputRef:t,onClick:s},n]},Ts=e=>({minHeight:256,alignItems:"center",justifyContent:"center",display:e?"flex":"block","& > .video-wrapper":{width:"100%",background:"black"}}),Gs=()=>{const[{onClick:e,inputRef:t},n]=As(),a=Fe().formState.errors,{enqueueSnackbar:s,closeSnackbar:d}=j();return u.exports.useEffect(()=>{a.content&&(d(),s(a.content.message,{variant:"error"}))},[a]),c(h,{sx:Ts(!n),children:[i("input",{style:{display:"none"},type:"file",accept:"video/*",ref:t}),n?i("div",{className:"video-wrapper",children:i(Je,{url:n})}):i(S,{}),c("div",{children:[n?null:i(y,{children:xt.noVideoText}),i(b,{onClick:e,children:n?xt.changeVideoTextButton1:xt.changeVideoTextButton})]})]})},Vs=C(()=>{const{form:e,reset:t,response:n,loading:r,handler:a}=ye(),{pageControll:s,showProgress:d,hideProgress:l}=le(),p=s[1];return u.exports.useEffect(()=>{(r?d:l)()},[r]),De({message:xt.uploadVideoSuccess,show:Boolean(n),callback(m){p("VIDEOS")},variant:"success"}),i(J,x(g({},e),{children:c(Q,{container:!0,spacing:2,onSubmit:a,component:"form",children:[i(Q,{item:!0,xs:12,md:8,children:i(Gs,{})}),i(Q,{item:!0,xs:12,md:4,children:c(h,{sx:{pt:2},children:[i(E,{sx:{mb:3},label:"Judul video",name:"title",fullWidth:!0}),i(E,{sx:{mb:3},label:"Caption video",name:"caption",fullWidth:!0})]})}),c(Q,{item:!0,xs:12,children:[i(h,{sx:{p:[0,2]},children:i(Bt,{placeholder:"Deskripsi video",name:"description"})}),i(h,{sx:{p:[0,2],mt:3},children:i(W,{variant:"outlined",fullWidth:!0,icon:i(Er,{}),loading:r,children:"Upload video"})})]})]})}))}),Ls=e=>(e.description=JSON.stringify(e.description),g({},e)),Fs=()=>{const{modelId:e}=le();return i(qe,{parser:Ls,merge:{gradeId:e},mutateKey:"addVideo",children:i(h,{sx:{mb:5},children:i(Vs,{})})})},Us=C(({videos:e})=>{var k;const t=e.map(I=>({label:I.title,value:I.id})),{modelId:n,model:r}=le(),a=H(),{enqueueSnackbar:s}=j(),[{loading:d,response:l},p]=$e({api:P.mutateAddVideoInGrade,merge:{gradeId:n}});u.exports.useEffect(()=>{l&&(s("Video berhasil di tambahkan",{variant:"success"}),a(`/batch/${r.name}/${r.id}/videos`))},[l]);const m=Te(),f=te({control:m.control,name:"videoId",defaultValue:t[0].value}),_=e.find(I=>I.id===f.field.value),w=m.handleSubmit(p);return c(h,{sx:{minHeight:"50vh",display:["block","flex"],"& > div":{p:1}},children:[i(h,{sx:{width:["100%","70%"],overflow:"hidden"},children:i(_e,{exitBeforeEnter:!0,children:i(ee.div,{transition:{x:{type:"tween"}},initial:{x:"-200%"},animate:{x:0},exit:{x:"200%"},children:_&&i(Je,{url:_.content})},(k=_==null?void 0:_.id)!=null?k:"video-id")})}),c(h,{component:"form",onSubmit:w,sx:{width:["100%","30%"]},children:[i(xi,x(g({noUseForm:!0,disabled:d,size:"small"},f.field),{options:t,name:"videoId"})),i(W,{sx:{mt:2,textTransform:"none"},fullWidth:!0,icon:i(et,{}),loading:!1,children:"Simpan"})]})]})}),Ns=C(()=>{const{modelId:e}=le(),{data:t,loading:n}=z(s=>s.queryVideoNotInGrade({id:e})),a=(()=>{var s;return t?(s=t.videoNotInGrade)!=null?s:[]:[]})();return i(_e,{exitBeforeEnter:!0,children:i(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n?i(h,{sx:{py:5,display:"flex",justifyContent:"center"},children:c(h,{sx:{textAlign:"center"},children:[i(he,{size:50}),i(y,{sx:{display:"block"},variant:"caption",children:"Loading"})]})}):i(F,{sx:{p:2},children:a.length?i(Us,{videos:a}):i(y,{align:"center",variant:"subtitle1",children:"Tidak ada video yang dapat di pilih"})})},n?"loading":"oke")})}),Hs=ft(()=>(le(),c(S,{children:[i(y,{color:"primary",sx:{mt:2},variant:"h5",children:"Pilih dari video yang telah terupload"}),i(B,{sx:{my:2}}),i(Ns,{}),i(y,{color:"primary",sx:{mt:2},variant:"h5",children:"Upload video baru"}),i(B,{sx:{my:2}}),i(F,{sx:{p:1,mb:5},children:i(Fs,{})})]}))),Bs=C(({rows:e,columns:t,paginator:n,paginationHandler:r,onRowClick:a})=>i(S,{children:i(zr,{pagination:!0,paginationMode:"server",onRowClick:l=>a&&a(l.row),onPageChange:l=>{r(l+1,n.perPage)},onPageSizeChange:l=>{r(1,l+1)},page:n.currentPage?n.currentPage-1:1,rowsPerPageOptions:[10,20,30],rowCount:n.total-1,pageSize:n.perPage,rows:[...e],columns:t,autoHeight:!0})}));function Qs(){const[e,t]=u.exports.useState({user:null,action:"activation"}),n=s=>{t({user:s,action:s.status?"edit":"activation"})},r=()=>{t({user:null,action:"activation"})},a=s=>{t(x(g({},e),{action:s}))};return x(g({},e),{changeStudent:n,handleClose:r,changeAction:a})}const yi=u.exports.createContext(null);function Ee(){return u.exports.useContext(yi)}const Rs={activation:"activation",edit:"editUser"},Os=e=>t=>(e&&(e.name===t.name&&delete t.name,e.email===t.email&&delete t.email),t);function Qt(e,t){const{enqueueSnackbar:n}=j(),{handleClose:r}=Ee(),{initialFetch:a}=G();u.exports.useEffect(()=>{e&&(r(),n(t,{variant:"success"}),a())},[e])}const Ws=C(({onLoading:e})=>{const{loading:t,form:n,handler:r,response:a}=ye();j();const{handleClose:s,user:d}=Ee();return G(),Qt(a,`${d==null?void 0:d.name} berhasil di aktifkan`),u.exports.useEffect(()=>{e(t)},[t]),c(J,x(g({},n),{children:[i(h,{sx:{p:1,mb:3,border:"solid 1px gray",borderRadius:1},children:i(y,{children:"Gunakan form ini untuk mengaktifkan akun & memberikan password ke pada pengguna agar dapat login dengan password yang diberikan."})}),c("form",{onSubmit:r,children:[i(E,{autoComplete:"off",fullWidth:!0,variant:"outlined",name:"password",type:"password",label:"Password"}),i(E,{sx:{my:2},fullWidth:!0,type:"password",variant:"outlined",name:"passwordConfirmation",label:"Konfirmasi password"}),i(W,{icon:i(Ar,{}),loading:t,children:"Aktifkan akun"})]})]}))}),Js=C(({onLoading:e})=>{const{loading:t,form:n,handler:r,response:a,error:s}=ye();Qt(a,"Perubahan berhasil di simpan"),u.exports.useEffect(()=>{s&&n.setError("email",{type:"backend",message:"Email telah di gunakan"})},[s]);const{user:d}=Ee();return u.exports.useEffect(()=>{d&&(n.setValue("name",d.name),n.setValue("email",d.email))},[d]),u.exports.useEffect(()=>{e(t)},[t]),i(J,x(g({},n),{children:c("form",{onSubmit:r,children:[i(E,{sx:{mb:2},fullWidth:!0,variant:"outlined",name:"email",label:"Email"}),i(E,{sx:{mb:2},fullWidth:!0,variant:"outlined",name:"name",label:"Nama"}),i(W,{icon:i(kt,{}),loading:t,children:"Simpan perubahan"})]})}))}),js=C(()=>{const{user:e}=Ee(),[{loading:t,response:n,error:r},a]=$e({api:P.mutateUserDelete,merge:{id:e==null?void 0:e.id}});return console.log(r),Qt(n,"Pengguna berhasil di hapus"),c("div",{children:[c(y,{variant:"subtitle1",children:["Apakah anda yakin untuk menhapus akun ",e==null?void 0:e.name," ?"]}),i(W,{onClick:()=>a({}),sx:{my:2},icon:i(we,{}),loading:t,children:"Hapus"})]})}),Ks={activation:Ws,edit:Js,delete:js},Ys=()=>{const{user:e,handleClose:t,action:n,changeAction:r}=Ee(),a=e?Ks[n]:u.exports.Fragment,[s,{inline:d}]=T(),l=!e||n==="delete"?"":Rs[n],p=e&&n!=="delete"?qe:u.exports.Fragment,m=e&&n!=="delete"?{mutateKey:l,parser:Os(e),merge:{id:e.id}}:{};return c(_n,{sx:{zIndex:100*100},onClose:s?void 0:t,open:Boolean(e),PaperProps:{sx:{width:["100vw","20vw"],overflow:"hidden"}},anchor:"right",children:[c(pn,{onChange:(f,_)=>r(_),value:n,children:[i(Ze,{sx:{textTransform:"none"},value:"edit",label:"Edit"}),i(Ze,{sx:{textTransform:"none"},value:"activation",label:"Aktivasi akun",disabled:e&&e.status}),i(Ze,{sx:{textTransform:"none"},value:"delete",label:"Hapus"})]}),i(_e,{exitBeforeEnter:!0,children:i(ee.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},transition:{x:{type:"tween"}},children:i(h,{sx:{p:2},children:i(p,x(g({},m),{children:i(a,g({},e?{onLoading:d}:{}))}))})},n)})]})},Xs=[{field:"name",headerName:"Nama siswa",flex:1},{field:"email",headerName:"Alamat email",flex:1},{field:"status",headerName:"Status",flex:.2,valueGetter(e){return e.row.status?"Aktif":"Non aktif"}}],Zs=C(()=>{const[e,{toggle:t,force:n}]=T(),{loading:r,form:a,handler:s,response:d}=ye(),{initialFetch:l}=G();return De({message:"Siswa berhasil di tambahkan",show:Boolean(d),variant:"success",callback(p){n(!1)(),a.reset(),l()}}),c(F,{sx:{p:2,mt:2},children:[i(b,{color:e?"error":"primary",onClick:t,children:e?"Tutup":"Tambahkan siswa"}),i(Ue,{sx:{mt:e?2:0},in:e,children:c(Q,{container:!0,children:[i(Q,{item:!0,xs:12,md:6,children:i(J,x(g({},a),{children:c("form",{onSubmit:s,children:[i(E,{sx:{mb:4},label:"Nama siswa",name:"name",fullWidth:!0}),i(E,{type:"email",label:"Alamat email",fullWidth:!0,name:"email"}),i(W,{sx:{mt:3},icon:i(fn,{}),loading:r,children:"Simpan"})]})}))}),i(Q,{item:!0,xs:12,md:6,sx:{px:2},children:i(y,{variant:"subtitle1",children:"Tambahkan siswa dengan mengirim email invitasi yang akan di daftarkan, siswa dapat login dengan link yang di berikan untuk mengganti password."})})]})})]})}),ed=C(()=>{const{result:e,initialFetch:t,actions:{go:n}}=G();u.exports.useEffect(()=>{t()},[]);const r=e.data.map(s=>({name:s.student.name,email:s.student.email,id:s.student.id,status:s.student.active})),{changeStudent:a}=Ee();return i(h,{sx:{py:2},children:i(Bs,{onRowClick:a,paginationHandler:n,paginator:e.paginator,columns:Xs,rows:r})})}),td=ft(()=>{const{modelId:e}=le(),t=Qs();return c(ht,{dataKey:"students",includes:{gradeId:e},children:[i(qe,{parser:n=>({args:n}),merge:{grade_id:e},mutateKey:"addUser",children:i(Zs,{})}),c(yi.Provider,{value:t,children:[i(Ys,{}),i(ed,{})]})]})}),nd=e=>i("div",{children:i("h1",{children:"Quiz check"})});function id(e){const{user:t}=ie(),[n,r]=u.exports.useState(null),a=u.exports.useCallback(p=>(t==null?void 0:t.id)===p.user_id,[t]),[s,d]=u.exports.useState(null),l=()=>s&&(n==="edit"||n==="editReply")?s.content:null;return{enableCrud:a,setFormMode:r,formMode:n,gradeId:e,userId:t==null?void 0:t.id,setSelected:d,initialContent:l(),selectedId:s?s.id:""}}const vi=u.exports.createContext(null),Me=()=>u.exports.useContext(vi),rd="Thread berhasil ditambahkan",od="Perubahan berhasil disimpan",ad="Balasan anda berhasil di tambahkan",sd="Perubahan berhasil disimpan";var dd={create:rd,edit:od,addReply:ad,editReply:sd};const ud=C(()=>{const{formMode:e,setFormMode:t,initialContent:n,setSelected:r,selectedId:a}=Me(),{loading:s,form:d,response:l,handler:p,reset:m}=ye(),{initialFetch:f}=G();u.exports.useEffect(()=>{n&&e&&d.setValue("content",n)},[n,e]);const _=()=>{s||(m(),t(null))},w=u.exports.useCallback(()=>e?dd[e]:"",[e]);return De({message:w(),show:Boolean(l),callback:()=>{r(null),t(null),_(),f()},variant:"success"}),i(tt,{fullWidth:!0,open:Boolean(e),onClose:_,children:i(J,x(g({},d),{children:i(h,{sx:{p:2},children:c("form",{onSubmit:p,children:[i(Ne,{children:"Konten diskusi : "}),i(Bt,{name:"content"}),i(W,{icon:i($t,{}),loading:s,children:"Simpan"})]})})}))})}),ld=Tr(e=>({root:{"& > *":{fontFamily:"Roboto!important"}},editor:{"& > *":{fontFamily:"Roboto!important"}}})),_i=e=>{const t=JSON.parse(e);return typeof t=="string"?_i(t):t},yt=({data:e})=>{const t=ld();try{const n=K.convertFromRaw(_i(e)),r=K.EditorState.createWithContent(n);return i("div",{className:t.root,children:i(vn.exports.Editor,{editorClassName:t.editor,toolbarHidden:!0,readOnly:!0,toolbar:{},editorState:r})})}catch(n){return console.log(n),null}},bi=u.exports.createContext(null),Rt=()=>u.exports.useContext(bi),cd=()=>{const{open:e,handleCloseDialog:t,getContentText:n,loading:r,onConfirm:a}=Rt();return c(tt,{open:e,onClose:t,children:[i(Pt,{children:n()}),c(bn,{children:[i(b,{disabled:r,onClick:t,startIcon:i(Gr,{}),children:"Batal"}),i(W,{color:"error",onClick:a,icon:i(we,{}),loading:r,children:"Hapus"})]})]})},pd=({api:e,callback:t,getSuccesMessage:n,getContentText:r})=>{const[a,s]=u.exports.useState(e),d=ke(a),{loading:l,data:p,setQuery:m}=z(),[f,_]=u.exports.useState(null),[w,k]=u.exports.useState(!0);De({message:n?n():"Data berhasil di hapus",callback(){_(null),t(),k(!0)},variant:"success",show:Boolean(p&&p[d])&&!w,autoShow:!1});const I=()=>{l||_(null)},M=(ce,Z)=>()=>{s(Z||e),_(ce.id)},X=()=>(k(!1),m(ce=>ce[a]({id:f})));return{open:Boolean(f),loading:l,handleCloseDialog:I,handleOpenDialog:M,getContentText:r,Dialog:cd,onConfirm:X}},hd=({model:e})=>{const{setSelected:t,setFormMode:n}=Me(),{handleOpenDialog:r}=Rt(),a=r(e,P.mutateDeleteDiscussionReply);return c(h,{sx:{py:1,textAlign:"right"},children:[i(be,{color:"primary",onClick:()=>{t(e),n("editReply")},children:i(kt,{})}),i(be,{color:"error",onClick:a,children:i(we,{})})]})},gd=({model:e})=>{const{enableCrud:t}=Me();return c(h,{sx:{p:1,ml:[0,3,10]},children:[c(h,{sx:{display:"flex",py:1},children:[i(h,{children:i(wn,{src:"/test.png",alt:e.user.name})}),c(h,{children:[i(y,{sx:{ml:1},variant:"subtitle2",children:e.user.name}),i(y,{sx:{ml:1},variant:"subtitle2",children:e.created_at})]})]}),i(B,{}),i(yt,{data:e.content}),t(e)?i(hd,{model:e}):null,i(B,{})]})},md=({replies:e})=>i(S,{children:e.map(t=>i(gd,{model:t},t.id))}),fd=({model:e})=>{const{setSelected:t,setFormMode:n,enableCrud:r}=Me(),{handleOpenDialog:a}=Rt(),s=u.exports.useCallback(()=>{t(e),n("edit")},[]),d=a(e);return c(h,{sx:{display:"flex"},children:[c(h,{sx:{display:"flex",alignItems:"center"},children:[i(h,{children:i(wn,{src:"/test.png",alt:e.user.name})}),c(h,{children:[i(y,{sx:{ml:1},variant:"subtitle2",children:e.user.name}),i(y,{sx:{ml:1},variant:"subtitle2",children:e.created_at})]})]}),r(e)?c(h,{sx:{ml:"auto"},children:[i(qt,{title:"Hapus",children:i(be,{color:"error",onClick:d,children:i(we,{})})}),i(qt,{title:"Edit",children:i(be,{color:"primary",onClick:s,children:i(kt,{})})})]}):null]})},xd=({model:e})=>{const{setSelected:t,setFormMode:n}=Me();u.exports.useCallback(()=>{t(e),n("edit")},[]);const[r,a]=u.exports.useState(!1),s=u.exports.useCallback(()=>{t(e),n("addReply")},[]);return c(F,{sx:{mb:2},children:[i(h,{sx:{p:2},children:i(fd,{model:e})}),i(B,{}),i(h,{sx:{p:2},children:i(yt,{data:e.content})}),i(B,{}),c(h,{sx:{p:2},children:[c(h,{sx:{display:"flex"},children:[i(b,{startIcon:i($t,{}),onClick:()=>a(!r),sx:{textTransform:"none"},children:"Tampilkan komentar"}),i(b,{startIcon:i(Vr,{}),onClick:s,sx:{textTransform:"none",ml:"auto"},children:"Buat komentar"})]}),c(Ue,{in:r,unmountOnExit:!0,children:[e.replies.length?null:i(y,{variant:"h5",align:"center",sx:{py:3},children:"Thread ini belum memiliki komentar"}),i(md,{replies:e.replies})]})]})]})},yd=C(()=>{const{setFormMode:e}=Me(),{isEmpty:t,initialFetch:n,result:{data:r}}=G();u.exports.useEffect(()=>{n()},[]);const a=u.exports.useCallback(()=>{e("create")},[]),s=pd({api:P.mutateDeleteDiscussion,callback:n,getContentText(){return"Apakah anda yakin untuk menghapus thread diskusi ini ? "}});return c(bi.Provider,{value:s,children:[i(s.Dialog,{}),t?c(h,{sx:{textAlign:"center",py:5},children:[i(y,{align:"center",variant:"h5",children:"Saat ini tidak ada thread diskusi"}),i(b,{onClick:a,sx:{textTransform:"none"},children:"Klik disini untuk menambahkan"})]}):null,c(L,{children:[i(h,{sx:{my:2},children:i(b,{startIcon:i($t,{}),onClick:a,children:"Buat thread diskusi"})}),r.map(d=>i(xd,{model:d},d.id))]})]})}),vd={addReply:"addDiscussionReply",create:"addDiscussion",edit:"editDiscussion",editReply:"editDiscussionReply"},wi=({gradeId:e})=>{const t=id(e),n=t.formMode?vd[t.formMode]:"addDiscussion",r=({content:a})=>{const s={content:JSON.stringify(a),userId:t.userId,gradeId:e};return t.formMode==="addReply"&&t.selectedId?s.discussionId=t.selectedId:t.selectedId&&(t.formMode==="edit"||t.formMode==="editReply")&&(s.id=t.selectedId),s};return i(vi.Provider,{value:t,children:c(ht,{dataKey:"discussion",includes:{gradeId:e},children:[i(qe,{mutateKey:n,parser:r,children:i(ud,{})}),i(yd,{})]})})},_d=ft(()=>{const{modelId:e}=le();return i(wi,{gradeId:e})}),bd=({id:e})=>{const{data:t,loading:n,setQuery:r}=z(),a=()=>{r(d=>d.queryVideo({id:e},l=>l.id.content.caption.description.duration.quiz_count.thumbnail.title.grades(p=>p.id.name)))},{setTitle:s}=Lt();return u.exports.useEffect(()=>(s("Menagamen video"),()=>s("")),[]),u.exports.useEffect(()=>{a()},[e]),{video:t?t.video:null,isNotFound:t&&!t.video,loading:n}},Ci=u.exports.createContext(null);function je(){return u.exports.useContext(Ci)}const wd=[{path:"info",name:"Informasi video"},{path:"quiz",name:"Quis"},{path:"edit",name:"Edit"}];function Ot(e){return C(()=>{const t=nt(),n=bd(t),{updateNavs:r}=ae();return u.exports.useEffect(()=>{const a=d=>`/admin/video/${t.id}${d?`/${d}`:""}`,s=wd.map(d=>({label:d.name,path:a(d.path==="/"?"":d.path)}));r([...s])},[]),i(Ci.Provider,{value:n,children:!n.video||n.loading?i(ct,{}):i(e,{})})})}const Si=Ot(()=>{const{video:e}=je(),t=H(),n=({id:a,name:s})=>()=>t(`/classroom/${s}/${a}/videos`),r=`/admin/video/${e==null?void 0:e.id}/quiz`;return c("div",{children:[i(h,{sx:{mb:2},children:i(Je,{url:e==null?void 0:e.content})}),c(h,{sx:{display:"flex",mb:5},children:[i(h,{sx:{width:"70%"},children:c(h,{sx:{p:2,pl:0},children:[c(h,{sx:{p:1,border:"solid 1px",borderColor:a=>a.palette.grey.A400,borderRadius:1},children:[i(y,{variant:"h5",children:e==null?void 0:e.title}),i(y,{variant:"subtitle1",children:e==null?void 0:e.caption})]}),i(y,{sx:{my:1},variant:"subtitle1",children:"Deskripsi video"}),i(h,{sx:{p:1,border:"solid 1px",borderColor:a=>a.palette.grey.A400,borderRadius:1},children:i(yt,{data:e==null?void 0:e.description})})]})}),i(h,{sx:{width:"30%"},children:c(F,{sx:{p:1,minHeight:500},children:[i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:"Jumlah quiz"}),c(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{variant:"button",sx:{cursor:"pointer",display:"block",textTransform:"none"},children:(e==null?void 0:e.quiz_count)?`${e.quiz_count} kuis`:"-"}),i(b,{to:r,sx:{textTransform:"none"},component:Lr,children:(e==null?void 0:e.quiz_count)?"Tampilkan quis":"Buat quis"})]}),i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:"Batch / Kelas"}),i(B,{}),i(Fr,{dense:!0,children:e==null?void 0:e.grades.map(a=>i(Ur,{dense:!0,onClick:n(a),sx:{bgcolor:s=>s.palette.grey["200"]},button:!0,children:i(Nr,{primary:a.name})},a.id))})]})})]})]})}),ve=["A","B","C","D"],Ii=ve.map((e,t)=>({content:"",type:"text",index:t})),Cd=ve.map((e,t)=>({content:null,type:"image",index:t}));function Sd({video:e}){const[t,n]=u.exports.useState({type:A.IMAGE_MATCH,text:"",multipleChoise:{answer:0,question:"",additionalFile:null,type:"text"}}),[r,a]=u.exports.useState(Ii);return u.exports.useEffect(()=>{console.log("called"),t.multipleChoise.type==="text"?a([...Ii]):a([...Cd])},[t.multipleChoise]),{multipleChoiseOptions:r,formValues:t,callbacks:{onMultipleChoiseChange:f=>_=>{const w=x(g({},t.multipleChoise),{[f]:_});n(x(g({},t),{multipleChoise:g({},w)}))},onTextChange:f=>{n(x(g({},t),{text:f}))},changeMultipleChoiseOptions:f=>_=>{const w=[...r];w[f].content=_,a([...w])}},changeType:f=>{const _=x(g({},t),{text:"",type:f});f===A.MULTIPLE_CHOICE&&(_.multipleChoise={answer:0,type:"text",question:"",additionalFile:null}),n(g({},_))},video:e}}const Pi=u.exports.createContext(null);function ki(){return ne({name:"type",defaultValue:A.IMAGE_MATCH})}function $i(){return u.exports.useContext(Pi)}const Id=()=>{const{video:e}=$i(),[t,n]=u.exports.useState(0),r=(l,p)=>n(p),[a,{toggle:s}]=T(!1),d=te({name:"showAt",defaultValue:0});return u.exports.useEffect(()=>{d.field.onChange(t)},[t]),c(h,{paddingY:2,children:[i(Je,{url:e.content,play:a,playOnTime:t}),c(h,{marginTop:1,children:[i(Ne,{children:"Di tampilkan pada menit"}),i(h,{children:i(Hr,{min:0,max:e.duration,track:!1,onChange:r,valueLabelDisplay:"off"})}),c(h,{display:"flex",justifyContent:"space-between",children:[i(y,{variant:"subtitle2",children:Oe(0)}),i(y,{variant:"subtitle2",children:Oe(t)}),i(y,{variant:"subtitle2",children:Oe(e.duration)})]})]})]})},Pd=[{label:"Pilihan ganda",value:A.MULTIPLE_CHOICE},{label:"Pencocokan gambar",value:A.IMAGE_MATCH},{label:"Pengurutan huruf",value:A.LETTER_SEQUENCE}],kd=()=>{$i();const e=ne({name:"type",defaultValue:A.IMAGE_MATCH}),{field:{onChange:t}}=te({name:"type",defaultValue:A.IMAGE_MATCH}),n=Fe();return u.exports.useEffect(()=>{n.setValue("text","")},[e]),i(h,{sx:{py:2},children:c(Cn,{component:"fieldset",children:[i(Ne,{component:"legend",children:"Jenis quis"}),i(Sn,{value:e,onChange:t,row:!0,name:"row-radio-buttons-group",children:Pd.map(r=>i(In,{value:r.value,control:i(Pn,{}),label:r.label},r.value))})]})})},qi=({label:e,onlyUnique:t=!1})=>{const[n,{inline:r}]=T(),a=ne({name:"text"}),s=l=>{if(wt(l.key).isNumeric()){l.preventDefault();return}n&&r(!1),a.includes(l.key)&&(l.preventDefault(),r(!0))};let d={size:"small",fullWidth:!0,helperText:n?"Huruf telah di gunakan":"",error:n,name:"text"};return t&&(d.onKeyDown=s),i(h,{sx:{pr:2},children:i(E,x(g({name:"text"},d),{label:e}))})},$d=()=>i(S,{children:i(qi,{label:"Masukan huruf yang digunakan",onlyUnique:!0})}),qd=()=>i(S,{children:i(qi,{label:"Masukan Kata yang di gunakan"})}),Di=u.exports.createContext(null),Ei=()=>u.exports.useContext(Di);class Dd extends u.exports.Component{constructor(t){super(t);v(this,"fileRef");v(this,"handler",()=>{this.fileRef.current&&this.fileRef.current.click()});v(this,"getContext",()=>g({clickHandler:this.handler,reset:this.reset},this.state));v(this,"setFormValue",t=>{const{field:n}=this.props.controller;n.onChange(t)});v(this,"reset",()=>{const{field:t}=this.props.controller;t.onChange(void 0),this.setState({previewUrl:"",type:""})});v(this,"onChange",t=>{const n=t.target.files;if(n&&n.length){const r=n[0],a=URL.createObjectURL(r);this.setState({previewUrl:a,type:r.type},()=>{this.props.controller&&this.setFormValue(r)})}});var n;this.fileRef=u.exports.createRef(),this.state={previewUrl:(n=this.props.initialUrl)!=null?n:"",type:""}}render(){return c(Di.Provider,{value:this.getContext(),children:[this.props.children,i("input",{ref:this.fileRef,onChange:this.onChange,type:"file",accept:this.props.accept,style:{display:"none"}})]})}}const Ed=r=>{var a=r,{children:e,name:t}=a,n=U(a,["children","name"]);const s=te({name:t});return i(Dd,x(g({name:t},n),{controller:s,children:e}))},Md=()=>{const{previewUrl:e,reset:t,clickHandler:n}=Ei();return c(h,{sx:{position:"relative",backgroundColor:"black",display:"flex",justifyContent:"center"},children:[i(h,{component:"img",src:e,sx:{maxHeight:144,maxWidth:256}}),i(qt,{title:"Ganti foto",children:i(be,{color:"secondary",onClick:()=>{t(),n()},size:"small",style:{top:0,right:0,position:"absolute"},children:i(we,{})})})]})},zd=({label:e})=>{const{clickHandler:t,previewUrl:n}=Ei();return c(S,{children:[i(b,{fullWidth:!0,size:"small",variant:"contained",color:"primary",onClick:t,children:e}),i(h,{textAlign:"center",paddingY:2,children:n?i(Md,{}):null})]})},Mi=({name:e,label:t})=>i(Ed,{accept:"image/*",name:e,children:i(zd,{label:t})}),Ad=[{label:"Text",value:"text"},{label:"Gambar",value:"image"}],Td=()=>{ne({name:"multipleChoice.type",defaultValue:"text"});const{field:e}=te({name:"multipleChoice.type",defaultValue:"text"});return c(Cn,{component:"fieldset",children:[i(Ne,{component:"legend",children:"Jenis pilihan ganda"}),i(Sn,x(g({},e),{row:!0,children:Ad.map(t=>i(In,{value:t.value,control:i(Pn,{}),label:t.label},t.value))}))]})},Gd={init:{y:"-350%",opacity:0},exit:{y:"350%",opacity:0},animate:{y:0,opacity:1}},Vd=s=>{var d=s,{index:e,delay:t,value:n,type:r}=d,a=U(d,["index","delay","value","type"]);const l=`multipleChoice.options.[${e}].content`,p=`Opsi ${ve[e]}`;return i(ee.div,{style:{overflowX:"hidden"},transition:{y:{delay:t,type:"tween"},opacity:{delay:t}},variants:Gd,animate:"animate",initial:"init",exit:"exit",children:i(h,{sx:{my:2,pr:2},children:r==="image"?c(S,{children:[i(y,{children:p}),i(Mi,{name:l,label:"Pilih gambar"})]}):i(E,{size:"small",label:p,fullWidth:!0,name:`multipleChoice.options.[${e}].content`})})})},Ld=()=>{const{field:e}=te({name:"multipleChoice.answer",defaultValue:0});return i(xi,x(g({noUseForm:!0},e),{label:"Opsi jawaban yang benar",size:"small",sx:{my:2,pr:2},options:ve.map((t,n)=>({value:n+1,label:`Opsi ${t}`}))}))},Fd=()=>{const e=ne({name:"multipleChoice.type",defaultValue:"text"});te({name:"multipleChoice.additionalFile",defaultValue:""});const t=Fe();return u.exports.useEffect(()=>{ve.forEach((n,r)=>{const a=`multipleChoice.options.[${r}].content`;t.setValue(a,"")})},[e]),c("div",{style:{overflow:"hidden"},children:[c(h,{sx:{pr:2,mb:2},children:[i(E,{sx:{my:2},label:"Masukan pertanyaan quis",name:"multipleChoice.question",size:"small",fullWidth:!0}),i(Mi,{name:"multipleChoice.additionalFile",label:"Upload foto soal tambahan"})]}),i("div",{children:i(Td,{})}),c("div",{children:[i(h,{children:i(_e,{exitBeforeEnter:!0,children:ve.map((n,r)=>u.exports.createElement(Vd,x(g({},n),{type:e,index:r,width:e==="image"?"100%":"50%",key:`${n}-${e}`,delay:(r+1)*.1,label:ve[r]})))})}),i(Ld,{})]})]})},zi=u.exports.createContext(null),ze=()=>u.exports.useContext(zi),Wt=n=>{var r=n,{children:e}=r,t=U(r,["children"]);const{show:a,handleClose:s}=t,d=u.exports.useRef(null),[l,p]=u.exports.useState({height:0,width:0});return u.exports.useEffect(()=>{if(d.current&&a){const m=d.current;p({height:window.innerHeight-m.clientHeight,width:"100vw"})}},[a,d]),c(_n,{keepMounted:!0,open:a,anchor:"bottom",sx:{zIndex:1e3*1e3},PaperProps:{sx:{minHeight:"100vh",width:"100vw"}},onClose:()=>s(!1),children:[i(Ve,{color:"transparent",variant:"outlined",elevation:0,ref:d,sx:{position:"static"},children:i(Le,{children:i(b,{onClick:()=>s(!1),children:"Tutup"})})}),i(zi.Provider,{value:x(g({},l),{show:a,handleClose:s}),children:i(h,{sx:x(g({},l),{overflow:"hidden"}),children:l.height?e:i("p",{children:"lol"})})})]})},Ai=[];Object.keys(Dt).forEach(e=>{e!=="transparent"&&Object.keys(Dt[e]).forEach(t=>{Ai.push(Dt[e][t])})});const Ti=Ai,Gi=e=>{const t=kn.random.arrayElement(Ti);return He.exports.find(e,t)?Gi(e):t},Ud=(e,t,n)=>({id:`rect-${e}-node`,text:t,bg:Gi(n)});function Nd({stage:e,text:t}){return(n,r)=>{if(!e)return[0,0];const s=(e.width()-t.length)/t.length;return{x:r?s*r:0,y:0,width:s,height:s/2}}}const Hd=(e,t)=>new Br.Arrow({stroke:e,strokeWidth:5,globalCompositeOperation:"source-over",points:t}),Bd=e=>[e.getClientRect().x+e.getClientRect().width/2,e.height()];function Qd({x:e,y:t},n){const r=n.y(),a=n.x()+n.width(),s=n.x(),d=n.y()+n.width(),l=e>=s&&e<=a,p=t>=r&&t<=d;return l&&p}const Rd=(e,t,n)=>{const{bgColor:r}=n,a=[...Bd(e),t.x,t.y];return Hd(r,a)},Od=(e,t="text")=>e==null?void 0:e.find("Group").toArray().filter(n=>n.getAttr("data-role")===t),Wd=({index:e,stage:t,nodes:n,layer:r})=>a=>{if(n[e].hasArrow)return new Promise(w=>w({nodes:n,arrow:null}));const d=a.currentTarget,l=t.getPointerPosition(),m=n[e].bg,f=Rd(a.target,l,{bgColor:m});f.setAttr("data-from",d.getAttr("data-letter"));const _=(w,k)=>{w.points(k),r.batchDraw()};return r.add(f),new Promise(w=>{t.on("mouseup touchend",()=>{const I=Od(t,"image").find(X=>Qd(t.getPointerPosition(),X));let M=null;if(I){const X=I.x()+I.width()/2;f.points()[0],f.points()[1],I.y(),M={points:[f.points()[0],f.points()[1],I.x()+I.width()/2,I.y()],from:f.getAttr("data-from"),to:I.getAttr("data-letter"),bg:f.stroke(),arrowIndex:e,fromId:d.getAttr("id"),toId:I.getAttr("id")},n[e].hasArrow=!0}w({arrow:M,nodes:n}),f.remove(),r.batchDraw(),t.off("mouseup touchend mousemove touchmove")}),t.on("mousemove touchmove",()=>{const k=t.getPointerPosition();k&&_(f,[f.points()[0],f.points()[1],k.x,k.y])})})},Jt=u.exports.createContext(null);function jt(){return u.exports.useContext(Jt)}const Kt=u.exports.createContext(null);function Yt(){return u.exports.useContext(Kt)}const Jd=({x:e,y:t,bg:n,text:r,width:a,height:s,pos:d,index:l,hasArrow:p})=>{const m=Ge(),{stage:f}=jt(),{arrows:_}=Yt(),w=f.current.height(),{mouseHandler:k}=Yt(),I=k(l),M=d==="start"?"text":"image",X="/letters/"+r.toLocaleLowerCase()+"0.png",[ce]=$n(X),Z=`item-${M}-${l}`,se=_.find(Oi=>Oi.toId===Z),Ae=()=>se||M==="text"?se?se.bg:n:m.palette.grey["200"];return c(qn,{id:`item-${M}-${l}`,"data-letter":r,"data-role":M,height:s,width:a,onTouchStart:M==="image"?void 0:I,onDragStart:M==="image"?void 0:I,onMouseDown:M==="image"?void 0:I,x:e,y:d==="start"?0:w-(s+20),children:[i(Dn,{height:s,width:a,fill:Ae()}),M==="image"?i(En,{height:s,width:a,image:ce}):i(Mn,{text:r,fill:"white",height:s,fontSize:s,width:a,align:"center"})]})},Vi=({pos:e="start",items:t})=>i(S,{children:t.map((n,r)=>u.exports.createElement(Jd,x(g({},n),{index:r,key:n.id,pos:e})))}),jd=({arrows:e,showHint:t})=>{let n=e;const{stage:{current:r}}=jt();if(t&&r){const a=r.find("Group").toArray().filter(d=>d.getAttr("data-role")==="text"),s=r.find("Group").toArray().filter(d=>d.getAttr("data-role")==="image");n=n.map(d=>{const l=a.find(m=>m.id()===d.fromId),p=s.find(m=>m.id()===d.toId);return x(g({},d),{points:[l.x()+l.width()/2,l.y()+l.height(),p.x()+p.width()/2,p.y()]})})}return i(S,{children:n.map((a,s)=>i(Qr,{points:a.points,stroke:a.bg},s))})},Kd=()=>{const{popArrow:e,arrows:t,toggleHint:n}=Yt();return c(Le,{children:[i(y,{sx:{mr:"auto"},children:"Samakan huruf & gambar berikut sesuai hurufnya"}),i(b,{onClick:e,disabled:t.length===0,size:"small",variant:"outlined",sx:{textTransform:"none"},startIcon:i(St,{}),children:"Batalkan pilihan"}),i(b,{onClick:n,size:"small",variant:"outlined",sx:{textTransform:"none"},children:"Show hint"})]})};class Yd extends u.exports.Component{constructor(t){super(t);v(this,"stage");v(this,"layer");v(this,"headerRef");v(this,"getNodes",(t=!0)=>{const{text:n}=this.props,r=this.stage.current,a=n.split(" ").join("").split("").filter(p=>p!==" "),s=[],d=[],l=Nd({stage:r,text:a.join("")});return(t?He.exports.shuffle(a):a).forEach((p,m)=>{const f=Ud(m,p,d);s.push(x(g(g({},f),l("",m)),{hasArrow:!1})),d.push(f.bg)}),s});v(this,"prepareNodes",()=>{const t=this.getNodes(!1),n=this.getNodes(!0).map((r,a)=>x(g({},r),{bg:t[a].bg}));this.setState({nodes:t,shufledNodes:n})});v(this,"getArrows",()=>this.state.showHint?this.state.nodes.map((t,n)=>{const r=this.state.shufledNodes.findIndex(s=>s.text===t.text),a=this.state.shufledNodes[r];return{toId:`item-image-${r}`,fromId:`item-text-${n}`,bg:t.bg,to:t.text,from:t.text,arrowIndex:n,points:[a.x+t.width/2,t.height,a.x+a.width/2,this.stage.current.height()-t.height]}}):this.state.arrows);v(this,"componentDidMount",()=>{this.prepareNodes()});v(this,"componentDidUpdate",(t,n,r)=>{t.text!==this.props.text&&this.prepareNodes()});v(this,"mouseHandler",t=>n=>Wd({index:t,stage:this.stage.current,layer:this.layer.current,nodes:this.state.nodes})(n).then(a=>{a.arrow&&this.setState(s=>(a.arrow&&s.arrows.push(a.arrow),x(g({},s),{nodes:a.nodes})))}));v(this,"getStageHeight",()=>this.headerRef.current?this.props.stageHeight-this.headerRef.current.clientHeight:0);v(this,"popArrow",()=>{this.setState(t=>{const n=t.arrows.pop();return n&&(t.nodes[n.arrowIndex].hasArrow=!1),g({},t)})});v(this,"toggleHint",()=>{this.setState({showHint:!this.state.showHint})});v(this,"getContextValues",()=>({mouseHandler:this.mouseHandler,arrows:this.getArrows(),popArrow:this.popArrow,nodes:this.state.nodes,toggleHint:this.toggleHint}));this.state={nodes:[],shufledNodes:[],showHint:!1,arrows:[]},this.stage=u.exports.createRef(),this.layer=u.exports.createRef(),this.headerRef=u.exports.createRef()}render(){return c(Kt.Provider,{value:this.getContextValues(),children:[i(Ve,{color:"transparent",position:"static",ref:this.headerRef,children:i(Kd,{})}),i(zn,{ref:this.stage,width:window.innerWidth,height:this.getStageHeight(),children:i(An,{ref:this.layer,children:i(Jt.Provider,{value:{stage:this.stage,layer:this.layer},children:c(Kt.Provider,{value:this.getContextValues(),children:[i(Vi,{items:this.state.nodes}),i(Vi,{pos:"end",items:this.state.shufledNodes}),i(jd,{showHint:this.state.showHint,arrows:this.getArrows()})]})})})})]})}}const Xd=({text:e})=>{const{height:t,width:n}=ze();return i(S,{children:i(Yd,{text:e,stageHeight:t})})};function Zd(e){const[t,n]=u.exports.useState(-1),[r,{inline:a}]=T(),{show:s}=ze();return u.exports.useEffect(()=>{n(-1),a(!1)},[s]),{isSubmitted:r,isTouched:t!==-1,changeAnswer:p=>{r||n(p)},onSubmitted:()=>{t!==-1&&a(!0)},selected:t,isAnswerCorrect:r&&t===e.answer-1}}const Li=u.exports.createContext(null);function Xt(){return u.exports.useContext(Li)}const eu=["A","B","C","D"],tu=({index:e,content:t})=>{const{selected:n,changeAnswer:r}=Xt();return console.log(t),c(h,{role:"button",onClick:()=>r(e),className:"item","data-selected":n===e,children:[i(h,{sx:{height:100,width:"100%",backgroundImage:`url(${t})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),i(y,{align:"center",variant:"h2",children:eu[e]})]})},nu=["A","B","C","D"],iu=({index:e,content:t})=>{const{selected:n,changeAnswer:r}=Xt();return c("div",{role:"button",onClick:()=>r(e),className:"item","data-selected":n===e,children:[c(y,{variant:"subtitle2",sx:{fontWeight:"bolder"},children:["Opsi ",nu[e]]}),i(y,{variant:"subtitle1",children:t})]})},ru=()=>{const{selected:e,onSubmitted:t,isSubmitted:n,isAnswerCorrect:r}=Xt(),{handleClose:a}=ze();return c(h,{sx:{display:"flex",alignItems:"center",width:"90%"},children:[i(y,{sx:{color:r?"success.main":n?"error,main":"inherit"},children:n?r?"Jawaban anda benar":"Maaf jawaban anda kurang tepat":"Klik kunci jawaban untuk melihat hasil jawaban anda"}),i(b,{onClick:n?()=>a(!1):t,disabled:e===-1,sx:{textTransform:"none",ml:"auto"},children:n?"Tutup":"Kunci jawaban"})]})},ou={display:"flex",width:"100%","& > div":{width:["100%","50%"],display:"flex",alignItems:"center",justifyContent:"center"}},au={display:"flex",flexWrap:"wrap",width:"90%","& > .item":{cursor:"pointer",transition:"all ease .2s",background:"white",width:"50%",p:2,zIndex:1,"&[data-selected='true']":{boxShadow:3,zIndex:2,bgcolor:"primary.main",color:"white"},"&:hover":{bgcolor:"primary.main",color:"white"}}},su={text:iu,image:tu},du=e=>{const t=su[e.type];return i(t,g({},e))},uu=e=>{const t=ze(),{question:n,image:r,options:a,answer:s}=e,d=Zd(e);return i(Li.Provider,{value:d,children:c(h,{sx:x(g({},ou),{height:t.height,width:t.width}),children:[i("div",{children:c(h,{sx:{width:"100%",textAlign:"center"},children:[r?i(h,{component:"img",src:r,sx:{maxHeight:256}}):null,i(y,{children:n})]})}),i("div",{children:c(h,{sx:{width:"100%"},children:[c(h,{children:[i(y,{variant:"h5",sx:{mb:2},children:"Pilih jawaban anda :"}),i(h,{sx:au,children:a.map((l,p)=>i(du,g({index:p},l),p))})]}),i(ru,{})]})})]})})},lu=(e,t)=>t.find("Group").toArray().filter(n=>n.getAttr("id")!==e.getAttr("id"));function cu(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}function pu({stage:e,target:t,swap:n,original:r}){return a=>{const s=a.target,l=lu(s,e).findIndex(p=>cu(s.getClientRect(),p.getClientRect()));console.log(l===-1),l!==-1?n(t,l):(console.log("go original"),s.setPosition({x:r.x,y:r.y}))}}function hu({stage:e,text:t}){return(n,r)=>{if(!e)return[0,0];const a=e.height(),s=e.height()/t.length,l=a/2-s/2,p=e.width(),m=(s+30)*t.length,f=(p-m)/2;return{x:r?r*(s+30)+f:f,y:l,width:s,height:s}}}const Zt=u.exports.createContext(null);function Fi(){return u.exports.useContext(Zt)}const gu=({index:e,text:t})=>{const{stage:n}=jt(),{getNodeState:r,swap:a,mode:s}=Fi(),[d]=r(e),l="/letters/"+t.toLocaleLowerCase()+"0.png",p=Ge(),m=u.exports.useRef(null),[f]=$n(l);u.exports.useEffect(()=>{m.current&&m.current.to({x:d.x,y:d.y,duration:.2})},[m.current,d]);const _=pu({stage:n.current,target:e,original:d,swap:a});return c(qn,x(g({},d),{id:d.id,ref:m,onDragEnd:_,draggable:!0,children:[i(Dn,{width:d.width,height:d.height,cornerRadius:12,strokeWidth:1,stroke:p.palette.primary.main}),s==="image"?i(En,{image:f,height:d.height,width:d.width}):i(Mn,{fill:"black",fontSize:d.height-10,align:"center",width:d.width,text:t})]}))},mu=()=>{const{height:e}=ze(),{text:t,toggleHint:n,toggleMode:r,nodes:a}=Fi(),s=window.innerHeight-e;return i(Ve,{elevation:0,variant:"outlined",color:"transparent",sx:{position:"fixed",top:s,width:"100%",height:"fit-content",p:1},children:c(h,{sx:{display:"flex"},children:[c(y,{variant:"h6",children:['Susunlah kata "',t,'" dengan menggunakan bisindo']}),c(h,{sx:{ml:"auto"},children:[i(b,{onClick:r,sx:{textTransform:"none"},variant:"outlined",children:"Mode"}),i(b,{onClick:n,sx:{textTransform:"none"},variant:"outlined",children:"Kunci jawaban"}),i(b,{onClick:()=>{const l=He.exports.sortBy(a,"x").map(p=>p.text);console.log("Answer:",l.join(""))},sx:{textTransform:"none"},variant:"outlined",children:"Periksa jawaban"})]})]})})},Ui=e=>{const t=kn.random.arrayElement(Ti);return He.exports.find(e,t)?Ui(e):t},fu=(e,t,n)=>({id:`rect-${e}-node`,text:t,bg:Ui(n)});class xu extends u.exports.Component{constructor(t){super(t);v(this,"stage");v(this,"layer");v(this,"toggleMode",()=>this.setState(x(g({},this.state),{mode:this.state.mode==="letter"?"image":"letter"})));v(this,"toggleHint",()=>this.setState(x(g({},this.state),{showHint:!this.state.showHint})));v(this,"getNodes",(t=!0)=>{const{text:n}=this.props,r=this.stage.current,a=n.split(" ").join("").split("").filter(p=>p!==" "),s=[],d=[],l=hu({stage:r,text:a.join("")});return(t?He.exports.shuffle(a):a).forEach((p,m)=>{const f=fu(m,p,d);s.push(g(g({},f),l("",m))),d.push(f.bg)}),s});v(this,"prepareNodes",()=>{this.setState({nodes:[...this.getNodes()]})});v(this,"getItems",()=>this.state.showHint?this.getNodes(!1):this.state.nodes);v(this,"componentDidMount",()=>{this.prepareNodes()});v(this,"componentDidUpdate",(t,n,r)=>{t.text!==this.props.text&&this.prepareNodes()});v(this,"swap",(t,n)=>{const r=[...this.state.nodes],a=r[t],s=r[n];r[n]=x(g({},s),{y:a.y,x:a.x}),r[t]=x(g({},r[t]),{x:s.x,y:s.y}),this.setState({nodes:[...r]})});v(this,"getNodeState",t=>{const{nodes:n}=this.state,r=a=>{this.state;const s=[...this.state.nodes],d=s[t];s[t]=g(g({},d),a),this.setState({nodes:[...s]})};return[n[t],r]});v(this,"getContextValues",()=>({nodes:this.state.nodes,text:this.props.text,swap:this.swap,getNodeState:this.getNodeState,toggleHint:this.toggleHint,toggleMode:this.toggleMode,mode:this.state.mode}));this.state={nodes:[],mode:"image",showHint:!1},this.stage=u.exports.createRef(),this.layer=u.exports.createRef()}render(){return c(Zt.Provider,{value:this.getContextValues(),children:[i(zn,{height:this.props.height,width:window.innerWidth,ref:this.stage,children:i(An,{ref:this.layer,children:i(Jt.Provider,{value:{stage:this.stage,layer:this.layer},children:i(Zt.Provider,{value:this.getContextValues(),children:this.getItems().map((t,n)=>i(gu,g({index:n},t),t.id))})})})}),i(mu,{})]})}}const yu=({text:e})=>{const{height:t,width:n}=ze();return i(xu,{width:n,height:t,text:e})},vu={LETTER_SEQUENCE:yu,MULTIPLE_CHOICE:uu,IMAGE_MATCH:Xd},en=({type:e,viewerProps:t})=>{var r;const n=(r=vu[e])!=null?r:u.exports.Fragment;return i(n,g({},t))};function tn(e,t){return e==="MULTIPLE_CHOICE"?{question:t.question,answer:t.answer,image:t.additionalFile&&t.additionalFile instanceof File?URL.createObjectURL(t.additionalFile):typeof t.additionalFile=="string"?t.additionalFile:"",options:t.options.map(n=>({content:n.content instanceof File?URL.createObjectURL(n.content):n.content,type:t.type}))}:{text:t.text}}const _u={answer:0,type:"text",question:"",additionalFile:null},bu=({onSubmit:e,loading:t})=>{const n=ne({name:"multipleChoice",defaultValue:_u}),r=ne({name:"text",defaultValue:""}),a=ne({name:"multipleChoice.options",defaultValue:[]}),s=ki(),l={disabled:(()=>{if(s==="MULTIPLE_CHOICE"){const _=a.find(w=>!w.content);return Boolean(_)||!n.question}else return!Boolean(r)})(),sx:{my:2},variant:"outlined"},p=tn(s,x(g({},n),{text:r,options:a})),[m,{inline:f}]=T();return c(S,{children:[i(Wt,{show:m,handleClose:f,children:i(en,{type:s,viewerProps:p})}),c(Tn,{sx:{"& > button":{textTransform:"none"}},fullWidth:!0,children:[i(b,x(g({onClick:()=>f(!0)},l),{children:"Tampilkan quis"})),i(b,x(g({},l),{disabled:l.disabled||t,onClick:e,startIcon:t?i(he,{size:16}):void 0,children:"Simpan"}))]})]})},wu={LETTER_SEQUENCE:qd,IMAGE_MATCH:$d,MULTIPLE_CHOICE:Fd},Cu={animate:{y:0,opacity:1},initial:{y:"-200%",opacity:0},exit:{y:"200%",opacity:0}},Su=()=>{const e=ki(),t=wu[e];return i(_e,{exitBeforeEnter:!0,children:i(ee.div,x(g({},Cu),{children:i(t,{})}),e)})},Iu={LETTER_SEQUENCE:P.mutateLetterSequenceQuiz,IMAGE_MATCH:P.mutateImageMatchQuiz,MULTIPLE_CHOICE:P.mutateMultipleChoiseQuiz},Pu=C(e=>{const t=Sd(e),n=Te();ne({control:n.control,defaultValue:A.IMAGE_MATCH,name:"type"});const r=p=>{if("multipleChoice"in p){const m=p,{multipleChoice:f}=m,_=U(m,["multipleChoice"]);return x(g(g({},p),f),{options:p.multipleChoice.options.map(({content:w},k)=>{const I=w instanceof File?"image":"text";return{index:k,[I]:w}})})}return p},[{loading:a,response:s},d]=$e({api:Iu[n.getValues("type")],parser:r,merge:{videoId:e.video.id}}),l=n.handleSubmit(d);return u.exports.useEffect(()=>{s&&e.onSuccess()},[s]),i(J,x(g({},n),{children:c(Pi.Provider,{value:t,children:[i(bu,{onSubmit:l,loading:a}),c(h,{sx:{display:"flex","& > div":{width:"50%"},overflow:"hidden",minHeight:"70vh"},children:[c("div",{children:[i(kd,{}),i(Su,{})]}),i("div",{children:i(Id,{})})]})]})}))}),Ni={selected:null,action:null};function ku(){const[e,t]=u.exports.useState(Ni),n=a=>()=>t({selected:a,action:"quiz"}),r=a=>()=>t({selected:a,action:"delete"});return x(g({},e),{onDeleteSelected:r,handleSelected:n,handleClose:()=>t(Ni)})}const Hi=u.exports.createContext(null);function nn(){return u.exports.useContext(Hi)}const $u={[A.MULTIPLE_CHOICE]:"Pilihan ganda",[A.IMAGE_MATCH]:"Pencocokan gambar",[A.LETTER_SEQUENCE]:"Pengurutan gambar"},qu=()=>{const{initialFetch:e,result:t,isEmpty:n}=G();u.exports.useEffect(()=>{e()},[]);const{handleSelected:r,onDeleteSelected:a}=nn();return c("div",{children:[n?i(y,{sx:{my:3},align:"center",variant:"h4",children:"Video ini tidak memiliki quis"}):null,i(h,{sx:{display:"flex",flexWrap:"wrap"},children:t.data.map((s,d)=>i(h,{sx:{width:["100%","33.25%"]},children:i(h,{sx:{p:1},children:c(F,{sx:{p:1},children:[c(y,{variant:"caption",children:["Quiz ",d+1]}),c(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{variant:"subtitle2",children:$u[s.type]}),c(y,{variant:"subtitle2",children:["Ditampilkan pada : ",s.durationText]})]}),c(Tn,{fullWidth:!0,size:"small",children:[i(b,{onClick:r(s),sx:{textTransform:"none"},size:"small",variant:"outlined",fullWidth:!0,children:"Simulasi quis"}),i(b,{onClick:a(s),sx:{textTransform:"none"},size:"small",variant:"outlined",fullWidth:!0,color:"error",children:"Hapus"})]})]})})},s.id))})]})},Du=C(()=>i(S,{children:i(qu,{})})),Eu=()=>{const{handleSelected:e,selected:t,handleClose:n,action:r}=nn(),a=t?tn(t.type,{text:t.image_matcher,question:t.question,answer:t.questionAnswer,options:t.choises,additionalFile:t.additional_image,type:"text"}):{};return i(Wt,{show:Boolean(t&&r==="quiz"),handleClose:n,children:t?i(en,{type:t.type,viewerProps:a}):null})},Mu=()=>{const{selected:e,action:t,handleClose:n}=nn(),{store:r}=z(),[a,{inline:s}]=T(),{initialFetch:d}=G(),{enqueueSnackbar:l}=j(),p=()=>{e&&(s(!0),r.mutateQuizDelete({id:e.id}).then(()=>{s(!1),d(),l("Quiz berhasil di hapus",{variant:"success"}),n()}))};return c(tt,{onClose:n,open:Boolean(e&&t==="delete"),children:[i(Pt,{children:i(y,{children:"Apakah anda yakin untuk menghapus ?"})}),c(bn,{sx:{"& > button":{textTransform:"none"}},children:[i(b,{onClick:n,children:"Batal"}),i(b,{disabled:a,onClick:p,color:"error",children:"Hapus"})]})]})},zu=()=>{const e=ku(),{video:t}=je(),{initialFetch:n}=G(),[r,{toggle:a,force:s}]=T(),{enqueueSnackbar:d}=j(),l=()=>{n(),s(!1)(),d("Quis baru berhasil di tambahkan",{variant:"success"})};return c(Hi.Provider,{value:e,children:[c(h,{sx:{minHeight:"110vh"},children:[c(F,{sx:{p:2,m:1},children:[i(b,{sx:{textTransform:"none"},onClick:a,children:r?"Tutup":"Tambah quis baru"}),i(Ue,{in:r,timeout:"auto",mountOnEnter:!0,children:i(Pu,{onSuccess:l,video:t})})]}),i(Du,{})]}),i(Eu,{}),i(Mu,{})]})},Au=Ot(()=>{const{video:e}=je();return T(),i(ht,{dataKey:"quizByVideo",includes:{videoId:e.id},children:i(zu,{})})}),Tu=C(()=>{const{form:e,loading:t,handler:n,response:r}=ye(),{video:a}=je(),{enqueueSnackbar:s,closeSnackbar:d}=j(),l=H();u.exports.useEffect(()=>{r&&(s("Video berhasil di update",{variant:"success"}),l(`/admin/video/${a.id}/info`))},[r]);const[p,{inline:m}]=T();return u.exports.useEffect(()=>{d(),e.setValue("title",a==null?void 0:a.title),e.setValue("caption",a==null?void 0:a.caption),e.setValue("description",a==null?void 0:a.description),m(!0)},[]),p?i(J,x(g({},e),{children:c(F,{component:"form",onSubmit:n,sx:{p:2,my:3},children:[c(h,{sx:{display:"flex","& > div":{width:"50%",p:1}},children:[i("div",{children:i(E,{fullWidth:!0,name:"title",label:"Judul video"})}),i("div",{children:i(E,{fullWidth:!0,name:"caption",label:"Caption video"})})]}),c(h,{sx:{my:2,p:1},children:[i(Ne,{children:"Deskripsi video"}),i(Bt,{name:"description"})]}),i(W,{variant:"outlined",fullWidth:!0,icon:i(et,{}),loading:t,children:"Simpan"})]})})):i(S,{})}),Gu=e=>(e.description=JSON.stringify(e.description),g({},e)),Vu=Ot(()=>{const{video:e}=je();return i(qe,{parser:Gu,mutateKey:"editVideo",merge:{id:e==null?void 0:e.id},children:i(Tu,{})})}),Lu=()=>{Ut([]);const{gradeInfo:e}=lt();return c(L,{children:[i(wi,{gradeId:e.studentGrade.grade.id}),";"]})},Fu={component:Lu,icon:u.exports.Fragment,path:"/discussion",name:"discussion",key:"discussion"},Uu=C(({model:e})=>{const t=Ge(),[n,{force:r}]=T(),{progressInfo:{getPlaying:a},videoList:{getPlayingPercentage:s}}=lt(),d=s(e.id,a(e.id)),l=H();return i(h,{sx:{position:"relative"},children:c(h,{onClick:()=>{l(`/video/${e.id}`)},onMouseEnter:r(!0),onMouseLeave:r(!1),component:ee.div,animate:{boxShadow:n?t.shadows[10]:t.shadows[1]},sx:{borderRadius:1,cursor:"pointer"},children:[i(h,{sx:{width:"100%",borderRadius:1},component:"img",src:e.thumbnail,alt:""}),c(h,{sx:{p:2},children:[i(y,{sx:{color:m=>m.palette.grey["800"],fontWeight:"bolder"},variant:"subtitle1",children:e.title}),c(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{sx:{textAlign:"left"},variant:"caption",children:"Progress anda"}),i(y,{sx:{textAlign:"left"},variant:"caption",children:d?`${d}%`:""})]}),i(Rr,{value:d,variant:"determinate"}),c(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{sx:{textAlign:"left"},variant:"caption",children:"Quis"}),c(y,{sx:{textAlign:"left"},variant:"caption",children:["0 /",e.quiz_count]})]})]})]})})}),Bi=({width:e="50%"})=>{const{videoList:{videos:t}}=lt();return c(h,{children:[i(y,{sx:{color:n=>n.palette.grey["700"]},variant:"h4",children:"Video pembelajaran"}),i(h,{sx:{display:["block","flex"],flexWrap:"wrap","& > div":{width:["100%",e],p:1}},children:t.map(n=>i(Uu,{model:n},n.id))})]})},Nu=()=>{Ut([]);const{gradeInfo:{studentGrade:e}}=lt();return console.log(e),c(L,{sx:{py:2,display:"flex",flexWrap:"wrap"},children:[c(h,{sx:{width:["100%","30%"],p:2},children:[i(y,{variant:"h6",sx:{fontWeight:"lighter"},children:"Kelas / batch"}),i(B,{}),i(y,{sx:{color:t=>t.palette.grey["700"]},variant:"h4",children:e.grade.name})]}),i(h,{sx:{width:["100%","70%"]},children:i(Bi,{})})]})},Hu={path:"/",component:Nu,icon:u.exports.Fragment,name:"progress",key:"progress"},Bu=()=>(Ut([]),i("div",{children:"video page"})),Qu={component:Bu,name:"videos",path:"/videos",icon:u.exports.Fragment,key:"videos"},Ru=e=>e.content.id.title.thumbnail.caption.quiz_count.quizes(t=>t.id.type.choises(n=>n.id.text.image.index).image_matcher.additional_image.questionAnswer.question.show_at),Ou=e=>{const[t,n]=u.exports.useState(null),r=()=>n(null),a=s=>()=>n(s);return z(s=>s.queryQuizAnswers()),{show:Boolean(t),handleClose:r,handleOpen:a,selected:t}};function Wu(){const e=nt(),{loading:t,data:n}=z(a=>a.queryVideo({id:e.id},Ru)),r=Ou(n&&n.video?n.video.quizes:[]);return{video:n&&n.video?n.video:null,loading:t,showLoading:!n||!n.video,quiz:r}}const Qi=u.exports.createContext(null);function Ke(){return u.exports.useContext(Qi)}const Ju=()=>{const{video:e}=Ke();return i("div",{children:i(Je,{url:e.content})})},ju=()=>{const{video:e,quiz:{handleOpen:t}}=Ke(),n=e.quizes;return c(h,{sx:{pb:2},children:[i(B,{}),n.map((r,a)=>c(b,{onClick:t(r),sx:{textTransform:"none"},children:["Quis ",a+1]},r.id)),i(B,{})]})},Ku=()=>{const{quiz:{show:e,handleClose:t,selected:n}}=Ke(),r=n?tn(n.type,{text:n.image_matcher,question:n.question,answer:n.questionAnswer,options:n.choises,additionalFile:n.additional_image,type:"text"}):{};return i(Wt,{show:e,handleClose:t,children:n?i(en,{type:n.type,viewerProps:r}):null})},Yu=()=>{const{video:e}=Ke();return c("div",{children:[i(y,{sx:{color:t=>t.palette.grey["700"]},variant:"h3",children:e==null?void 0:e.title}),i(y,{sx:{color:t=>t.palette.grey["700"]},variant:"subtitle1",children:e==null?void 0:e.caption})]})},Xu=()=>{const{video:e}=Ke();return c(h,{sx:{pt:2,mb:1},children:[i(y,{variant:"subtitle1",sx:{fontWeight:"bolder"},children:"Deskripsi video"}),i(h,{sx:{borderRadius:2,p:1,border:"solid 1px",borderColor:t=>t.palette.grey.A400},children:i(yt,{data:e.description})})]})},Zu=C(()=>{const{updateNavs:e}=ae();u.exports.useEffect(()=>{e([])},[]);const t=Wu(),n=H();return t.showLoading?i(ct,{}):i(L,{children:c(Qi.Provider,{value:t,children:[i(b,{onClick:()=>n("/"),size:"small",variant:"outlined",sx:{my:1},startIcon:i(St,{}),children:"Kembali ke dashboard"}),i(Yu,{}),i(ju,{}),i(Ku,{}),i(Ju,{}),i(Xu,{}),i(h,{sx:{mb:3},children:i(Bi,{width:"33%"})})]})})}),el={component:Zu,path:"/video/:id",name:"video-student",icon:u.exports.Fragment,key:"video-student"},tl=!0,nl=[{path:"classroom/:slug/:id",component:ps,groups:[{path:"videos",component:Ps,name:"batch-show-video"},{path:"add-video",component:Hs,name:"batch-show-add-vide"},{path:"students",component:td,name:"batch-show-student"},{path:"quiz-check",component:nd,name:"batch-show-quiz-check"},{path:"discussion",component:_d,name:"batch-show-discussion"}],key:"classroom-show",icon:u.exports.Fragment,name:"classroom show"},{path:"classroom",component:cs,name:"menagement batch",key:"batch-index",icon:Or},{path:"admin/video/:id",component:hs,name:"admin-video-page",key:"admin-video-page",icon:u.exports.Fragment,hideInMenu:tl,groups:[{path:"*",component:Si,name:"Informasi video"},{path:"info",component:Si,name:"Informasi video"},{path:"quiz",component:Au,name:"Quis"},{path:"edit",component:Vu,name:"Edit"}]}],il=[{path:"/login",component:Ga,name:"login",key:"login",icon:u.exports.Fragment},{path:"/",component:()=>u.exports.createElement(Wr,{to:"/login"}),name:"login",key:"login",icon:u.exports.Fragment}],rl=[Hu,Qu,Fu,el],ol=e=>{if(!e)return"/login";const{role:t}=e;return t===ge.ADMIN?"classroom":"/"},al=()=>{const e=r=>r?r.role===ge.ADMIN?nl:rl:il,t=Vt(),n=u.exports.useCallback(async()=>{const r=await t.queryAuth().currentPromise();if(r.auth){const{auth:a}=r;return{id:a.id,name:a.name,email:a.email,role:a.role}}return null},[]);return c(Xr,{getRoutes:e,authFunctions:n,children:[i(_a,{children:i(qa,{children:i(Zr,{getFallback:ol})})}),i(ga,{})]})},Ri=document.getElementById("root");Ri&&Jr.exports.render(i(jr,{children:i(Kr,{anchorOrigin:{horizontal:"right",vertical:"top"},children:i(la,{url:"/graphql",children:i(al,{})})})}),Ri);
