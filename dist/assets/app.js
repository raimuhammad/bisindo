var Ui=Object.defineProperty,Ni=Object.defineProperties;var Hi=Object.getOwnPropertyDescriptors;var Je=Object.getOwnPropertySymbols;var Xt=Object.prototype.hasOwnProperty,Zt=Object.prototype.propertyIsEnumerable;var ft=(e,t,n)=>t in e?Ui(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))Xt.call(t,n)&&ft(e,n,t[n]);if(Je)for(var n of Je(t))Zt.call(t,n)&&ft(e,n,t[n]);return e},x=(e,t)=>Ni(e,Hi(t));var N=(e,t)=>{var n={};for(var r in e)Xt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Je)for(var r of Je(e))t.indexOf(r)<0&&Zt.call(e,r)&&(n[r]=e[r]);return n};var _=(e,t,n)=>(ft(e,typeof t!="symbol"?t+"":t,n),n);import{r as u,j as i,u as je,A as $e,m as re,R as Bi,a as en,M as Qi,t as o,Q as $,w as A,b as k,h as xt,c as Ri,d as Oi,e as Wi,f as tn,g as Ji,o as yt,i as fe,k as j,l as ji,L as Ki,n as Yi,p as ke,F as I,S as Xi,q as Zi,s as er,V as tr,v as nn,x as qe,y as rn,z as _t,B as nr,C as De,D as C,E as H,G as p,H as ir,I as h,J as ce,T as y,K as rr,P as on,N as xe,O as an,U as b,W as or,X as L,Y as Me,Z as ar,_ as vt,$ as sr,a0 as dr,a1 as bt,a2 as sn,a3 as Ee,a4 as K,a5 as dn,a6 as oe,a7 as ze,a8 as ur,a9 as ae,aa as un,ab as F,ac as B,ad as wt,ae as Ke,af as lr,ag as ln,ah as cr,ai as Ye,aj as Ct,ak as pr,al as hr,am as Ae,an as cn,ao as Xe,ap as Q,aq as gr,ar as mr,as as fr,at as xr,au as pn,av as yr,aw as _r,ax as vr,ay as br,az as wr,aA as Cr,aB as Ir,aC as O,aD as hn,aE as Sr,aF as Pr,aG as $r,aH as Te,aI as It,aJ as kr,aK as gn,aL as qr,aM as mn,aN as fn,aO as Dr,aP as St,aQ as Mr,aR as Er,aS as zr,aT as Ar,aU as Y,aV as Tr,aW as xn,aX as yn,aY as _n,aZ as vn,a_ as Gr,a$ as Pt,b0 as Vr,b1 as bn,b2 as Ge,b3 as wn,b4 as Cn,b5 as In,b6 as Sn,b7 as Pn,b8 as Lr,b9 as $n,ba as kn,bb as qn,bc as Fr,bd as Ur,be as Nr,bf as Hr,bg as Br,bh as Qr}from"./vendor.js";const Rr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}};Rr();const Dn=u.exports.createContext(null);function X(){return u.exports.useContext(Dn)}class Or extends u.exports.Component{constructor(t){super(t);_(this,"setUser",t=>{this.setState(n=>x(g({},n),{user:t,routes:[...this.props.getRoutes(t)]}))});_(this,"getContext",()=>x(g({},this.state),{setUser:this.setUser}));this.state={routes:[],user:null,initilizing:!0}}componentDidMount(){const{authFunctions:t,getRoutes:n}=this.props;t().then(r=>{this.setState({initilizing:!1,routes:n(r),user:r})})}render(){return i(Dn.Provider,{value:this.getContext(),children:this.state.initilizing?"Initializing":this.props.children})}}const Mn=({children:e})=>{const{pathname:t}=je();return i($e,{exitBeforeEnter:!0,children:i(re.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},transition:{opacity:{type:"tween"}},style:{minHeight:"100vh"},children:e},t)})},Wr=({getFallback:e})=>{const{routes:t,user:n}=X(),r=e(n);if(!t.find(s=>s.path.replaceAll("/*","")===r))throw new Error(`Path ${r} is not exist in routes`);return i(Bi,{children:t.map(({path:s,component:d,groups:l})=>{const c=l!=null?l:[];return i(en,{path:s,element:i(Mn,{children:i(d,{})}),children:c.map(({path:m,component:f})=>i(en,{path:m,element:i(Mn,{children:i(f,{})})},m))},s)})})},q=Qi;var pe;(function(e){e.ADMIN="ADMIN",e.STUDENT="STUDENT"})(pe||(pe={}));const Jr=o.enumeration("AppRole",["ADMIN","STUDENT"]),jr=q.named("User").props({__typename:o.optional(o.literal("User"),"User"),id:o.identifier,name:o.union(o.undefined,o.string),email:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),role:o.union(o.undefined,Jr),need_change_password:o.union(o.undefined,o.boolean),active:o.union(o.undefined,o.null,o.boolean)}).views(e=>({get store(){return e.__getStore()}}));class W extends ${get id(){return this.__attr("id")}get name(){return this.__attr("name")}get email(){return this.__attr("email")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get role(){return this.__attr("role")}get need_change_password(){return this.__attr("need_change_password")}get active(){return this.__attr("active")}}function Kr(){return new W}const ye=Kr().name.email.created_at.updated_at.role.need_change_password.active,_e=jr.actions(e=>({log(){console.log(JSON.stringify(e))}})),Yr=A()(q.named("Progress").props({__typename:o.optional(o.literal("Progress"),"Progress"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,k(o.late(()=>_e))),video_histories:o.union(o.undefined,o.string),quiz_histories:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}})));class se extends ${get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get video_histories(){return this.__attr("video_histories")}get quiz_histories(){return this.__attr("quiz_histories")}user(t){return this.__child("user",W,t)}}function Xr(){return new se}const Ve=Xr().user_id.video_histories.quiz_histories,Ze=Yr.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get videoHistories(){return e.video_histories?JSON.parse(e.video_histories):[]},get quizHistories(){return e.quiz_histories?JSON.parse(e.quiz_histories):[]}})),Zr=A()(q.named("StudentGrade").props({__typename:o.optional(o.literal("StudentGrade"),"StudentGrade"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),student:o.union(o.undefined,k(o.late(()=>_e))),grade:o.union(o.undefined,k(o.late(()=>Fe))),progress:o.union(o.undefined,k(o.late(()=>Ze)))}).views(e=>({get store(){return e.__getStore()}})));class et extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}student(t){return this.__child("student",W,t)}grade(t){return this.__child("grade",de,t)}progress(t){return this.__child("progress",se,t)}}function eo(){return new et}const to=eo().created_at.updated_at,tt=Zr.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get studentName(){return e.student?e.student.name:""},get gradeName(){return e.grade?e.grade.name:""}})),no=A()(q.named("Grade").props({__typename:o.optional(o.literal("Grade"),"Grade"),id:o.identifier,student_count:o.union(o.undefined,o.integer),video_count:o.union(o.undefined,o.integer),name:o.union(o.undefined,o.string),students:o.union(o.undefined,o.array(k(o.late(()=>tt)))),videos:o.union(o.undefined,o.array(k(o.late(()=>it)))),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class de extends ${get id(){return this.__attr("id")}get student_count(){return this.__attr("student_count")}get video_count(){return this.__attr("video_count")}get name(){return this.__attr("name")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}students(t){return this.__child("students",et,t)}videos(t){return this.__child("videos",J,t)}}function io(){return new de}const Le=io().student_count.video_count.name.created_at.updated_at,Fe=no.actions(e=>({log(){console.log(JSON.stringify(e))}})),ro=q.named("MultipleChoise").props({__typename:o.optional(o.literal("MultipleChoise"),"MultipleChoise"),id:o.identifier,image:o.union(o.undefined,o.string),text:o.union(o.undefined,o.string),index:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class En extends ${get id(){return this.__attr("id")}get image(){return this.__attr("image")}get text(){return this.__attr("text")}get index(){return this.__attr("index")}}function oo(){return new En}oo().image.text.index;const $t=ro.actions(e=>({log(){console.log(JSON.stringify(e))}}));var z;(function(e){e.IMAGE_MATCH="IMAGE_MATCH",e.LETTER_SEQUENCE="LETTER_SEQUENCE",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE"})(z||(z={}));const ao=o.enumeration("QuizType",["IMAGE_MATCH","LETTER_SEQUENCE","MULTIPLE_CHOICE"]),so=A()(q.named("Quiz").props({__typename:o.optional(o.literal("Quiz"),"Quiz"),id:o.identifier,video_id:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),show_at:o.union(o.undefined,o.number),type:o.union(o.undefined,ao),choises:o.union(o.undefined,o.array(k(o.late(()=>$t)))),question:o.union(o.undefined,o.string),questionAnswer:o.union(o.undefined,o.integer),additional_image:o.union(o.undefined,o.string),image_matcher:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}})));class Z extends ${get id(){return this.__attr("id")}get video_id(){return this.__attr("video_id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get show_at(){return this.__attr("show_at")}get type(){return this.__attr("type")}get question(){return this.__attr("question")}get questionAnswer(){return this.__attr("questionAnswer")}get additional_image(){return this.__attr("additional_image")}get image_matcher(){return this.__attr("image_matcher")}choises(t){return this.__child("choises",En,t)}}function uo(){return new Z}const ve=uo().video_id.created_at.updated_at.show_at.type.question.questionAnswer.additional_image.image_matcher;xt.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){if(e===12&&(e=0),t==="pagi")return e;if(t==="siang")return e>=11?e:e+12;if(t==="sore"||t==="malam")return e+12},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}});function lo(e){var n;const t=xt((n=e.createdAt)!=null?n:e.created_at).locale("id");return{get isMoreThan3Days(){return xt(new Date).diff(t,"days")>3},get hummanize(){return e.isMoreThan3Days?t.format("LL"):t.fromNow()},get createdMoment(){return t}}}function co(e){let t=e,n=0;for(;t>=60;)n+=1,t-=60;const r=e%60;return{minute:n,modulo:r}}function Ue(e){const{minute:t,modulo:n}=co(e),r=t<10?`0${t}`:`${t}`,a=n<10?`0${n}`:`${n}`;return`${r}:${a}`}const po={MULTIPLE_CHOICE:"Pilihan ganda",IMAGE_MATCH:"Pencocokan gambar",LETTER_SEQUENCE:"Urut gambar"},nt=so.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get typeLabel(){return po[e.type]}})).views(lo).views(e=>({get durationText(){var t;return Ue((t=e.show_at)!=null?t:0)}})),ho=A()(q.named("Video").props({__typename:o.optional(o.literal("Video"),"Video"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),title:o.union(o.undefined,o.string),caption:o.union(o.undefined,o.string),description:o.union(o.undefined,o.string),content:o.union(o.undefined,o.string),thumbnail:o.union(o.undefined,o.string),duration:o.union(o.undefined,o.integer),grades:o.union(o.undefined,o.array(k(o.late(()=>Fe)))),quizes:o.union(o.undefined,o.array(k(o.late(()=>nt)))),student_progress:o.union(o.undefined,o.array(k(o.late(()=>Ze)))),quiz_count:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}})));class J extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get title(){return this.__attr("title")}get caption(){return this.__attr("caption")}get description(){return this.__attr("description")}get content(){return this.__attr("content")}get thumbnail(){return this.__attr("thumbnail")}get duration(){return this.__attr("duration")}get quiz_count(){return this.__attr("quiz_count")}grades(t){return this.__child("grades",de,t)}quizes(t){return this.__child("quizes",Z,t)}student_progress(t){return this.__child("student_progress",se,t)}}function go(){return new J}const he=go().created_at.updated_at.title.caption.description.content.thumbnail.duration.quiz_count,it=ho.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get durationText(){var t;return Ue((t=e.duration)!=null?t:0)}})),mo=q.named("QuizAnswer").props({__typename:o.optional(o.literal("QuizAnswer"),"QuizAnswer"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),user_id:o.union(o.undefined,o.string),quiz_id:o.union(o.undefined,o.string),to:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),from:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),items:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),selected:o.union(o.undefined,o.null,o.string)}).views(e=>({get store(){return e.__getStore()}}));class kt extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get user_id(){return this.__attr("user_id")}get quiz_id(){return this.__attr("quiz_id")}get to(){return this.__attr("to")}get from(){return this.__attr("from")}get items(){return this.__attr("items")}get selected(){return this.__attr("selected")}}function fo(){return new kt}const zn=fo().created_at.updated_at.user_id.quiz_id.to.from.items.selected,An=mo.actions(e=>({log(){console.log(JSON.stringify(e))}})),xo=q.named("PaginatorInfo").props({__typename:o.optional(o.literal("PaginatorInfo"),"PaginatorInfo"),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),firstItem:o.union(o.undefined,o.null,o.integer),hasMorePages:o.union(o.undefined,o.boolean),lastItem:o.union(o.undefined,o.null,o.integer),lastPage:o.union(o.undefined,o.integer),perPage:o.union(o.undefined,o.integer),total:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class ge extends ${get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get firstItem(){return this.__attr("firstItem")}get hasMorePages(){return this.__attr("hasMorePages")}get lastItem(){return this.__attr("lastItem")}get lastPage(){return this.__attr("lastPage")}get perPage(){return this.__attr("perPage")}get total(){return this.__attr("total")}}function yo(){return new ge}yo().count.currentPage.firstItem.hasMorePages.lastItem.lastPage.perPage.total;const be=xo.actions(e=>({log(){console.log(JSON.stringify(e))}})),_o=A()(q.named("VideoPaginator").props({__typename:o.optional(o.literal("VideoPaginator"),"VideoPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>be)),data:o.union(o.undefined,o.array(k(o.late(()=>it))))}).views(e=>({get store(){return e.__getStore()}})));class Tn extends ${paginatorInfo(t){return this.__child("paginatorInfo",ge,t)}data(t){return this.__child("data",J,t)}}function vo(){return new Tn}const bo=vo(),wo=_o.actions(e=>({log(){console.log(JSON.stringify(e))}})),Co=A()(q.named("QuizPaginator").props({__typename:o.optional(o.literal("QuizPaginator"),"QuizPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>be)),data:o.union(o.undefined,o.array(k(o.late(()=>nt))))}).views(e=>({get store(){return e.__getStore()}})));class Gn extends ${paginatorInfo(t){return this.__child("paginatorInfo",ge,t)}data(t){return this.__child("data",Z,t)}}function Io(){return new Gn}const So=Io(),Po=Co.actions(e=>({log(){console.log(JSON.stringify(e))}})),$o=A()(q.named("StudentGradePaginator").props({__typename:o.optional(o.literal("StudentGradePaginator"),"StudentGradePaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>be)),data:o.union(o.undefined,o.array(k(o.late(()=>tt))))}).views(e=>({get store(){return e.__getStore()}})));class rt extends ${paginatorInfo(t){return this.__child("paginatorInfo",ge,t)}data(t){return this.__child("data",et,t)}}function ko(){return new rt}const qt=ko(),qo=$o.actions(e=>({log(){console.log(JSON.stringify(e))}})),Do=A()(q.named("GradePaginator").props({__typename:o.optional(o.literal("GradePaginator"),"GradePaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>be)),data:o.union(o.undefined,o.array(k(o.late(()=>Fe))))}).views(e=>({get store(){return e.__getStore()}})));class Vn extends ${paginatorInfo(t){return this.__child("paginatorInfo",ge,t)}data(t){return this.__child("data",de,t)}}function Mo(){return new Vn}const Eo=Mo(),zo=Do.actions(e=>({log(){console.log(JSON.stringify(e))}})),Ao=A()(q.named("DiscussionReply").props({__typename:o.optional(o.literal("DiscussionReply"),"DiscussionReply"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,k(o.late(()=>_e))),discussion:o.union(o.undefined,k(o.late(()=>ot))),content:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class Ne extends ${get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get content(){return this.__attr("content")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}user(t){return this.__child("user",W,t)}discussion(t){return this.__child("discussion",we,t)}}function To(){return new Ne}const Dt=To().user_id.content.created_at.updated_at,Mt=Ao.actions(e=>({log(){console.log(JSON.stringify(e))}})),Go=A()(q.named("Discussion").props({__typename:o.optional(o.literal("Discussion"),"Discussion"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,k(o.late(()=>_e))),content:o.union(o.undefined,o.string),replies:o.union(o.undefined,o.array(o.union(o.null,k(o.late(()=>Mt))))),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class we extends ${get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get content(){return this.__attr("content")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}user(t){return this.__child("user",W,t)}replies(t){return this.__child("replies",Ne,t)}}function Vo(){return new we}const Et=Vo().user_id.content.created_at.updated_at,ot=Go.actions(e=>({log(){console.log(JSON.stringify(e))}})),Lo=A()(q.named("DiscussionPaginator").props({__typename:o.optional(o.literal("DiscussionPaginator"),"DiscussionPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>be)),data:o.union(o.undefined,o.array(k(o.late(()=>ot))))}).views(e=>({get store(){return e.__getStore()}})));class Ln extends ${paginatorInfo(t){return this.__child("paginatorInfo",ge,t)}data(t){return this.__child("data",we,t)}}function Fo(){return new Ln}const Uo=Fo(),No=Lo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Ho=q.named("VideoGrade").props({__typename:o.optional(o.literal("VideoGrade"),"VideoGrade"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),video_id:o.union(o.undefined,o.string),grade_id:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}}));class Fn extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get video_id(){return this.__attr("video_id")}get grade_id(){return this.__attr("grade_id")}}function Bo(){return new Fn}const Qo=Bo().created_at.updated_at.video_id.grade_id,Un=Ho.actions(e=>({log(){console.log(JSON.stringify(e))}}));var Nn;(function(e){e.ASC="ASC",e.DESC="DESC"})(Nn||(Nn={}));o.enumeration("SortOrder",["ASC","DESC"]);const Ro=q.named("SimplePaginatorInfo").props({__typename:o.optional(o.literal("SimplePaginatorInfo"),"SimplePaginatorInfo"),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),firstItem:o.union(o.undefined,o.null,o.integer),lastItem:o.union(o.undefined,o.null,o.integer),perPage:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class Oo extends ${get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get firstItem(){return this.__attr("firstItem")}get lastItem(){return this.__attr("lastItem")}get perPage(){return this.__attr("perPage")}}function Wo(){return new Oo}Wo().count.currentPage.firstItem.lastItem.perPage;const Jo=Ro.actions(e=>({log(){console.log(JSON.stringify(e))}})),jo=q.named("PageInfo").props({__typename:o.optional(o.literal("PageInfo"),"PageInfo"),hasNextPage:o.union(o.undefined,o.boolean),hasPreviousPage:o.union(o.undefined,o.boolean),startCursor:o.union(o.undefined,o.null,o.string),endCursor:o.union(o.undefined,o.null,o.string),total:o.union(o.undefined,o.integer),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),lastPage:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class Ko extends ${get hasNextPage(){return this.__attr("hasNextPage")}get hasPreviousPage(){return this.__attr("hasPreviousPage")}get startCursor(){return this.__attr("startCursor")}get endCursor(){return this.__attr("endCursor")}get total(){return this.__attr("total")}get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get lastPage(){return this.__attr("lastPage")}}function Yo(){return new Ko}Yo().hasNextPage.hasPreviousPage.startCursor.endCursor.total.count.currentPage.lastPage;const Xo=jo.actions(e=>({log(){console.log(JSON.stringify(e))}}));var Hn;(function(e){e.ONLY="ONLY",e.WITH="WITH",e.WITHOUT="WITHOUT"})(Hn||(Hn={}));o.enumeration("Trashed",["ONLY","WITH","WITHOUT"]);var ee;(function(e){e.queryAuth="queryAuth",e.queryVideo="queryVideo",e.queryGetVideoByGrade="queryGetVideoByGrade",e.queryVideoNotInGrade="queryVideoNotInGrade",e.queryQuizAnswers="queryQuizAnswers",e.queryIsUniqueEmail="queryIsUniqueEmail",e.queryUserByGrade="queryUserByGrade",e.queryVideoByGrade="queryVideoByGrade",e.queryQuizByGrade="queryQuizByGrade",e.queryProgressByGrade="queryProgressByGrade",e.queryGradeAll="queryGradeAll",e.queryGradeById="queryGradeById",e.queryGradeQuizes="queryGradeQuizes",e.queryProgress="queryProgress",e.queryGradeByAuth="queryGradeByAuth",e.queryStudentProgress="queryStudentProgress",e.queryVideos="queryVideos",e.queryQuizes="queryQuizes",e.queryStudents="queryStudents",e.queryGrades="queryGrades",e.queryGetStudentByGrade="queryGetStudentByGrade",e.queryStudentGrades="queryStudentGrades",e.queryDiscussion="queryDiscussion"})(ee||(ee={}));var P;(function(e){e.mutateLogin="mutateLogin",e.mutateLogout="mutateLogout",e.mutateVideo="mutateVideo",e.mutateVideoUpdate="mutateVideoUpdate",e.mutateVideoDelete="mutateVideoDelete",e.mutateQuizDelete="mutateQuizDelete",e.mutateMultipleChoiseQuiz="mutateMultipleChoiseQuiz",e.mutateImageMatchQuiz="mutateImageMatchQuiz",e.mutateLetterSequenceQuiz="mutateLetterSequenceQuiz",e.mutateQuizAnswer="mutateQuizAnswer",e.mutateUser="mutateUser",e.mutateLoginWithInvitation="mutateLoginWithInvitation",e.mutateUserChangeUserPassword="mutateUserChangeUserPassword",e.mutateSentInvitation="mutateSentInvitation",e.mutateUserEdit="mutateUserEdit",e.mutateUserActivation="mutateUserActivation",e.mutateGrade="mutateGrade",e.mutateGradeEdit="mutateGradeEdit",e.mutateAddVideoInGrade="mutateAddVideoInGrade",e.mutateUpdateVideoProgress="mutateUpdateVideoProgress",e.mutateUpdateQuizProgress="mutateUpdateQuizProgress",e.mutateDiscussion="mutateDiscussion",e.mutateDiscussionReply="mutateDiscussionReply",e.mutateUpdateDiscussion="mutateUpdateDiscussion",e.mutateUpdateDiscussionReply="mutateUpdateDiscussionReply",e.mutateDeleteDiscussion="mutateDeleteDiscussion",e.mutateDeleteDiscussionReply="mutateDeleteDiscussionReply"})(P||(P={}));const Zo=A()(Ri.named("RootStore").extend(Oi([["User",()=>_e],["Video",()=>it],["Grade",()=>Fe],["StudentGrade",()=>tt],["Progress",()=>Ze],["Quiz",()=>nt],["MultipleChoise",()=>$t],["QuizAnswer",()=>An],["VideoPaginator",()=>wo],["PaginatorInfo",()=>be],["QuizPaginator",()=>Po],["StudentGradePaginator",()=>qo],["GradePaginator",()=>zo],["DiscussionPaginator",()=>No],["Discussion",()=>ot],["DiscussionReply",()=>Mt],["VideoGrade",()=>Un],["SimplePaginatorInfo",()=>Jo],["PageInfo",()=>Xo]],["User","Video","Grade","StudentGrade","Progress","Quiz","MultipleChoise","QuizAnswer","Discussion","DiscussionReply","VideoGrade"],"js")).props({users:o.optional(o.map(o.late(()=>_e)),{}),videos:o.optional(o.map(o.late(()=>it)),{}),grades:o.optional(o.map(o.late(()=>Fe)),{}),studentGrades:o.optional(o.map(o.late(()=>tt)),{}),progresses:o.optional(o.map(o.late(()=>Ze)),{}),quizzes:o.optional(o.map(o.late(()=>nt)),{}),multipleChoises:o.optional(o.map(o.late(()=>$t)),{}),quizAnswers:o.optional(o.map(o.late(()=>An)),{}),discussions:o.optional(o.map(o.late(()=>ot)),{}),discussionReplies:o.optional(o.map(o.late(()=>Mt)),{}),videoGrades:o.optional(o.map(o.late(()=>Un)),{})}).actions(e=>({queryAuth(t,n=ye.toString(),r={}){return e.query(`query auth { auth {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},queryVideo(t,n=he.toString(),r={}){return e.query(`query video($id: ID!) { video(id: $id) {
        ${typeof n=="function"?n(new J).toString():n}
      } }`,t,r)},queryGetVideoByGrade(t,n=he.toString(),r={}){return e.query(`query getVideoByGrade($gradeId: ID!) { getVideoByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new J).toString():n}
      } }`,t,r)},queryVideoNotInGrade(t,n=he.toString(),r={}){return e.query(`query videoNotInGrade($id: ID!) { videoNotInGrade(id: $id) {
        ${typeof n=="function"?n(new J).toString():n}
      } }`,t,r)},queryQuizAnswers(t,n=zn.toString(),r={}){return e.query(`query quizAnswers { quizAnswers {
        ${typeof n=="function"?n(new kt).toString():n}
      } }`,t,r)},queryIsUniqueEmail(t,n={}){return e.query("query isUniqueEmail($email: String!) { isUniqueEmail(email: $email) }",t,n)},queryUserByGrade(t,n=ye.toString(),r={}){return e.query(`query userByGrade($gradeId: ID!) { userByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},queryVideoByGrade(t,n=he.toString(),r={}){return e.query(`query videoByGrade($gradeId: ID!) { videoByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new J).toString():n}
      } }`,t,r)},queryQuizByGrade(t,n=ve.toString(),r={}){return e.query(`query quizByGrade($gradeId: ID!) { quizByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},queryProgressByGrade(t,n=Ve.toString(),r={}){return e.query(`query progressByGrade($gradeId: ID!) { progressByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new se).toString():n}
      } }`,t,r)},queryGradeAll(t,n=Le.toString(),r={}){return e.query(`query gradeAll { gradeAll {
        ${typeof n=="function"?n(new de).toString():n}
      } }`,t,r)},queryGradeById(t,n=Le.toString(),r={}){return e.query(`query gradeById($id: ID!) { gradeById(id: $id) {
        ${typeof n=="function"?n(new de).toString():n}
      } }`,t,r)},queryGradeQuizes(t,n=ve.toString(),r={}){return e.query(`query gradeQuizes($gradeId: ID!) { gradeQuizes(grade_id: $gradeId) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},queryProgress(t,n=Ve.toString(),r={}){return e.query(`query progress { progress {
        ${typeof n=="function"?n(new se).toString():n}
      } }`,t,r)},queryGradeByAuth(t,n=to.toString(),r={}){return e.query(`query gradeByAuth { gradeByAuth {
        ${typeof n=="function"?n(new et).toString():n}
      } }`,t,r)},queryStudentProgress(t,n=Ve.toString(),r={}){return e.query(`query studentProgress($userId: ID!) { studentProgress(user_id: $userId) {
        ${typeof n=="function"?n(new se).toString():n}
      } }`,t,r)},queryVideos(t,n=bo.toString(),r={}){return e.query(`query videos($gradeId: ID, $search: String, $first: Int, $page: Int) { videos(grade_id: $gradeId, search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new Tn).toString():n}
      } }`,t,r)},queryQuizes(t,n=So.toString(),r={}){return e.query(`query quizes($videoId: String!, $first: Int, $page: Int) { quizes(videoId: $videoId, first: $first, page: $page) {
        ${typeof n=="function"?n(new Gn).toString():n}
      } }`,t,r)},queryStudents(t,n=qt.toString(),r={}){return e.query(`query students($search: String, $gradeId: String, $first: Int, $page: Int) { students(search: $search, grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new rt).toString():n}
      } }`,t,r)},queryGrades(t,n=Eo.toString(),r={}){return e.query(`query grades($search: String, $first: Int, $page: Int) { grades(search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new Vn).toString():n}
      } }`,t,r)},queryGetStudentByGrade(t,n=qt.toString(),r={}){return e.query(`query getStudentByGrade($gradeId: ID!, $first: Int, $page: Int) { getStudentByGrade(grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new rt).toString():n}
      } }`,t,r)},queryStudentGrades(t,n=qt.toString(),r={}){return e.query(`query studentGrades($gradeId: String, $search: String, $first: Int, $page: Int) { studentGrades(grade_id: $gradeId, search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new rt).toString():n}
      } }`,t,r)},queryDiscussion(t,n=Uo.toString(),r={}){return e.query(`query discussion($gradeId: ID!, $first: Int, $page: Int) { discussion(grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new Ln).toString():n}
      } }`,t,r)},mutateLogin(t,n){return e.mutate("mutation login($email: String!, $password: String!) { login(email: $email, password: $password) }",t,n)},mutateLogout(t,n){return e.mutate("mutation logout { logout }",t,n)},mutateVideo(t,n=he.toString(),r){return e.mutate(`mutation video($gradeId: String!, $title: String!, $caption: String!, $description: String!, $content: Upload!) { video(grade_id: $gradeId, title: $title, caption: $caption, description: $description, content: $content) {
        ${typeof n=="function"?n(new J).toString():n}
      } }`,t,r)},mutateVideoUpdate(t,n=he.toString(),r){return e.mutate(`mutation videoUpdate($id: ID!, $title: String!, $caption: String!, $description: String!) { videoUpdate(id: $id, title: $title, caption: $caption, description: $description) {
        ${typeof n=="function"?n(new J).toString():n}
      } }`,t,r)},mutateVideoDelete(t,n=he.toString(),r){return e.mutate(`mutation videoDelete($id: ID!) { videoDelete(id: $id) {
        ${typeof n=="function"?n(new J).toString():n}
      } }`,t,r)},mutateQuizDelete(t,n=ve.toString(),r){return e.mutate(`mutation quizDelete($id: ID!) { quizDelete(id: $id) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},mutateMultipleChoiseQuiz(t,n=ve.toString(),r){return e.mutate(`mutation multipleChoiseQuiz($videoId: String!, $showAt: Int!, $options: [MultipleChoiseInput!]!, $answer: Int!, $additionalFile: Upload, $question: String!) { multipleChoiseQuiz(video_id: $videoId, show_at: $showAt, options: $options, answer: $answer, additionalFile: $additionalFile, question: $question) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},mutateImageMatchQuiz(t,n=ve.toString(),r){return e.mutate(`mutation imageMatchQuiz($videoId: String!, $showAt: Int!, $text: String!) { imageMatchQuiz(video_id: $videoId, show_at: $showAt, text: $text) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},mutateLetterSequenceQuiz(t,n=ve.toString(),r){return e.mutate(`mutation letterSequenceQuiz($videoId: String!, $showAt: Int!, $text: String!) { letterSequenceQuiz(video_id: $videoId, show_at: $showAt, text: $text) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},mutateQuizAnswer(t,n=zn.toString(),r){return e.mutate(`mutation quizAnswer($args: CreateQuizAnswerInput!) { quizAnswer(args: $args) {
        ${typeof n=="function"?n(new kt).toString():n}
      } }`,t,r)},mutateUser(t,n=ye.toString(),r){return e.mutate(`mutation user($args: CreateUserInput!) { user(args: $args) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},mutateLoginWithInvitation(t,n){return e.mutate("mutation loginWithInvitation($invitation: String!, $password: String!) { loginWithInvitation(invitation: $invitation, password: $password) }",t,n)},mutateUserChangeUserPassword(t,n){return e.mutate("mutation userChangeUserPassword($password: String!, $passwordConfirmation: String!) { userChangeUserPassword(password: $password, password_confirmation: $passwordConfirmation) }",t,n)},mutateSentInvitation(t,n){return e.mutate("mutation sentInvitation($id: String!) { sentInvitation(id: $id) }",t,n)},mutateUserEdit(t,n=ye.toString(),r){return e.mutate(`mutation userEdit($id: String!, $name: String, $email: String) { userEdit(id: $id, name: $name, email: $email) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},mutateUserActivation(t,n=ye.toString(),r){return e.mutate(`mutation userActivation($id: String!, $password: String!) { userActivation(id: $id, password: $password) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},mutateGrade(t,n=Le.toString(),r){return e.mutate(`mutation grade($name: String!) { grade(name: $name) {
        ${typeof n=="function"?n(new de).toString():n}
      } }`,t,r)},mutateGradeEdit(t,n=Le.toString(),r){return e.mutate(`mutation gradeEdit($id: ID!, $name: String) { gradeEdit(id: $id, name: $name) {
        ${typeof n=="function"?n(new de).toString():n}
      } }`,t,r)},mutateAddVideoInGrade(t,n=Qo.toString(),r){return e.mutate(`mutation addVideoInGrade($videoId: ID!, $gradeId: ID!) { addVideoInGrade(video_id: $videoId, grade_id: $gradeId) {
        ${typeof n=="function"?n(new Fn).toString():n}
      } }`,t,r)},mutateUpdateVideoProgress(t,n=Ve.toString(),r){return e.mutate(`mutation updateVideoProgress($videoId: ID!) { updateVideoProgress(video_id: $videoId) {
        ${typeof n=="function"?n(new se).toString():n}
      } }`,t,r)},mutateUpdateQuizProgress(t,n=Ve.toString(),r){return e.mutate(`mutation updateQuizProgress($quizId: ID!, $correct: Boolean!) { updateQuizProgress(quiz_id: $quizId, correct: $correct) {
        ${typeof n=="function"?n(new se).toString():n}
      } }`,t,r)},mutateDiscussion(t,n=Et.toString(),r){return e.mutate(`mutation discussion($gradeId: ID!, $userId: ID!, $content: String!) { discussion(grade_id: $gradeId, user_id: $userId, content: $content) {
        ${typeof n=="function"?n(new we).toString():n}
      } }`,t,r)},mutateDiscussionReply(t,n=Dt.toString(),r){return e.mutate(`mutation discussionReply($userId: ID!, $discussionId: ID!, $content: String!) { discussionReply(user_id: $userId, discussion_id: $discussionId, content: $content) {
        ${typeof n=="function"?n(new Ne).toString():n}
      } }`,t,r)},mutateUpdateDiscussion(t,n=Et.toString(),r){return e.mutate(`mutation updateDiscussion($id: ID!, $content: String!) { updateDiscussion(id: $id, content: $content) {
        ${typeof n=="function"?n(new we).toString():n}
      } }`,t,r)},mutateUpdateDiscussionReply(t,n=Dt.toString(),r){return e.mutate(`mutation updateDiscussionReply($id: ID!, $content: String!) { updateDiscussionReply(id: $id, content: $content) {
        ${typeof n=="function"?n(new Ne).toString():n}
      } }`,t,r)},mutateDeleteDiscussion(t,n=Et.toString(),r){return e.mutate(`mutation deleteDiscussion($id: ID!) { deleteDiscussion(id: $id) {
        ${typeof n=="function"?n(new we).toString():n}
      } }`,t,r)},mutateDeleteDiscussionReply(t,n=Dt.toString(),r){return e.mutate(`mutation deleteDiscussionReply($id: ID!) { deleteDiscussionReply(id: $id) {
        ${typeof n=="function"?n(new Ne).toString():n}
      } }`,t,r)}}))),ea=Zo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Bn=Wi(tn),E=Ji(Bn,tn),ta=yt(fe({email:j().required().email(),password:j().required().min(6)})),na=e=>[{name:"email",type:"email",label:"Masukan email anda",icon:ji},{name:"password",type:"password",label:"Password",icon:Ki}].map(t=>x(g({},t),{disabled:e,fullWidth:!0})),Qn=u.exports.createContext(null),zt=()=>u.exports.useContext(Qn);function Rn(){const e=zt();return u.exports.useCallback(async t=>{const n=await e.queryAuth();if(t&&n&&n.auth){const{auth:r}=n;return t({id:r.id,name:r.name,email:r.email,role:r.role})}if(n&&n.auth){const{auth:r}=n;return{name:r.name,email:r.email,role:r.role}}return null},[])}function ia(e){const t=ke({resolver:ta}),{setQuery:n,loading:r,data:a}=E(),s=a&&!a.login&&!r;u.exports.useEffect(()=>{a&&a.login&&e()},[a]);const d=t.handleSubmit(l=>n(c=>c.mutateLogin(l)));return{form:t,onSubmit:d,loading:r,isCredentialInvalid:s}}class ra extends u.exports.Component{constructor(t){super(t);_(this,"rootStore");this.rootStore=ea.create(void 0,{gqlHttpClient:new Yi.GraphQLClient(this.props.url,{credentials:"include"})})}render(){return i(Bn.Provider,{value:this.rootStore,children:i(Qn.Provider,{value:this.rootStore,children:this.props.children})})}}const oa="imandidikr@gmail.com",aa="password";var sa={email:oa,password:aa};function T(e=!1){const[t,n]=u.exports.useState(e),r=u.exports.useCallback(s=>()=>n(s),[]),a=u.exports.useCallback(()=>{n(!t)},[t]);return[t,{force:r,toggle:a,inline:n}]}const da=()=>{const[e,{force:t}]=T(),{user:n,setUser:r}=X(),a=Rn(),s=zt(),d=u.exports.useCallback(()=>s.mutateLogin(sa).then(({login:l})=>{if(l)return a(r)}),[]);return i(I,{children:i(Xi,{ariaLabel:"SpeedDial example",open:e,sx:{position:"fixed",bottom:"1rem",right:"1rem"},onMouseEnter:t(!0),onMouseLeave:t(!1),icon:i(Zi,{}),children:i(er,{onClick:d,FabProps:{disabled:Boolean(n)},tooltipTitle:"Login",icon:i(tr,{})})})})};function ua(){const[e]=nn("admin-sidebar-open"),[t,n]=nn("admin-sidebar-open"),r=()=>n(!0),a=()=>n(!1),[s,d]=u.exports.useState(""),l=qe(),c=rn(l.breakpoints.down("md"));return u.exports.useEffect(()=>{c&&e&&n(!1)},[e,c]),{title:s,setTitle:d,sidebaropen:Boolean(t),handleCloseDrawer:a,handleOpenDrawer:r}}const On=u.exports.createContext(null),At=()=>u.exports.useContext(On);function Tt(){const e=qe();return rn(e.breakpoints.down("sm"))}function Ce(e){return _t(e).replaceAll("query","").replaceAll("mutate","").camelCase().value()}function He({api:e,merge:t={},parser:n}){const{data:r,loading:a,error:s,setQuery:d}=E(),l=Ce(e),c=m=>(n&&(m=g({},n(m))),d(f=>f[e](g(g({},m),t))));return[{loading:a,response:r?r[l]:null},c]}const la=240,ca=nr(De,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:t})=>g({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},t&&{marginLeft:la,[e.breakpoints.down("sm")]:{marginLeft:0,width:"100%"},transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})})),pa={paddingLeft:[0,0],paddingRight:[0,0],display:["block","flex"],color:"#2c3e50","& > .page-info":{paddingX:2,display:"flex",alignItems:"center"},"& > .search-bar":{borderRadius:1,display:"flex",bgcolor:"red",alignItems:"center",border:"solid 1px #f8f8f8",boxShadow:"inset 0 1px 2px #eee","& > .icon-container":{alignItems:"center",display:"flex",paddingX:2,background:"#f9f9f9",height:42}}},ha=C(()=>{const{user:e}=X(),t=Tt(),[n,r]=u.exports.useState(null),[{loading:a,response:s},d]=He({api:P.mutateLogout}),{setUser:l}=X(),c=H();u.exports.useEffect(()=>{s&&(c("/"),l(null))},[s]);const m=()=>{d({})},f=w=>{r(n?null:w.target)};if(!e)return i(I,{});const{name:v}=e;return p(I,{children:[i(ir,{sx:{zIndex:100*100,color:"white"},open:a,children:p(h,{sx:{textAlign:"center"},children:[i(ce,{color:"inherit"}),i(y,{children:"Mengeluarkan akun anda"})]})}),i(rr,{PaperProps:{elevation:1,sx:{width:200}},onClose:()=>r(null),open:Boolean(n),anchorEl:n,children:i(on,{onClick:m,children:"Logout"})}),i(h,{sx:{marginLeft:"auto",position:["absolute","static"],top:0,right:0},children:t?i(xe,{onClick:f,children:i(an,{})}):i(b,{onClick:f,endIcon:i(or,{}),startIcon:i(an,{}),children:t?"":v})})]})}),Wn=()=>i(I,{children:i(ca,{sx:{borderLeft:"none",background:"white",color:"black"},variant:"outlined",elevation:0,position:"fixed",open:!1,children:i(L,{children:p(Me,{sx:pa,children:[i(h,{className:"page-info",children:p(h,{sx:{display:"flex",alignItems:"center",bgcolor:e=>e.palette.grey.A100,borderRadius:2},children:[i(ar,{sx:{flex:1,paddingLeft:2},placeholder:"Pencarian"}),i(vt,{sx:{mr:2}})]})}),i(ha,{})]})})})}),Jn=()=>{const{user:e}=X();return e?i(h,{sx:{minHeight:"10vh",display:"flex",alignItems:"center",bgcolor:"primary.dark",color:"white",py:3},children:p(L,{children:[p(y,{sx:{fontWeight:"bolder"},variant:"h4",children:["Selamat datang, ",e.name]}),i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:e.role})]})}):i(I,{})},jn=u.exports.createContext(null),te=()=>u.exports.useContext(jn);class ga extends u.exports.Component{constructor(t){super(t);_(this,"updateNav",t=>{this.setState({navs:[...t]})});_(this,"updateBackUrl",(t=null)=>{this.setState({backurl:t})});_(this,"getContextValue",()=>x(g({},this.state),{updateNavs:this.updateNav,updateBackUrl:this.updateBackUrl}));this.state={navs:[],backurl:null}}render(){return i(jn.Provider,{value:this.getContextValue(),children:this.props.children})}}const Kn=()=>{const{navs:e,backurl:t}=te(),n=H(),{pathname:r}=je(),a=l=>{n(l)};console.log(r),u.exports.useEffect(()=>{document.body.scroll({top:0});const l=document.getElementById("root");l&&(l.scrollTo(0,0),window.scrollTo({top:0,behavior:"smooth"}))},[r]);const s=()=>{t&&n(t.url)},d=()=>{const l=e.findIndex(c=>c.path===r.replaceAll("%20"," "));return console.log(e),l===-1?0:l};return i(De,{component:re.div,animate:{height:e.length?"fit-content":0},sx:{overflow:"hidden"},position:"static",color:"transparent",elevation:0,variant:"outlined",children:p(L,{sx:{"& > *":{color:"white"},py:0,minHeight:"fit-content",display:"flex",alignItems:"center"},children:[i(sr,{sx:{py:0},value:d(),children:e.map((l,c)=>i(dr,{onClick:()=>a(l.path),sx:{py:0,my:0,textTransform:"none",fontWeight:"bolder"},label:l.label,value:c},l.path))}),i(re.div,{style:{flex:1,marginLeft:"auto",width:"fit-content",textAlign:"right"},animate:{opacity:t?1:0},children:i(b,{onClick:s,startIcon:i(bt,{}),sx:{textTransform:"none"},children:t==null?void 0:t.label})})]})})},ma=({children:e})=>{const t=ua();return t.sidebaropen,t.handleOpenDrawer,Tt(),te(),u.exports.useEffect(()=>{},[]),i(On.Provider,{value:t,children:p(h,{sx:{background:"#f9f9f9",minHeight:"100vh"},children:[i(sn,{}),i(Wn,{}),p(h,{id:"main-component",component:"main",sx:{flexGrow:1,minHeight:"100vh"},children:[i(Me,{}),i(Jn,{}),i(Kn,{}),e]})]})})},fa=({children:e})=>i(I,{children:e});function xa(){const{user:e}=X(),{loading:t,data:n}=E(d=>{var l;return d.queryStudentProgress({userId:(l=e==null?void 0:e.id)!=null?l:""})}),r=()=>{var d;return n&&((d=n.studentProgress)==null?void 0:d.videoHistories)?n.studentProgress.videoHistories:[]},a=()=>{var d;return n&&((d=n.studentProgress)==null?void 0:d.videoHistories)?n.studentProgress.quizHistories:[]},s=d=>{const l=r().find(c=>c.video_id.toString()===d);return l?l.time:0};return{progress:n?n.studentProgress:null,loading:!n||t,videoHistory:r(),quizHistory:a(),getPlaying:s}}function ya(){const{loading:e,data:t}=E(n=>n.queryGradeByAuth({},r=>r.id.grade(a=>a.id.name.video_count)));return{studentGrade:t?t.gradeByAuth:null,loading:!t||e}}function _a({studentGrade:e}){const{data:t,loading:n,setQuery:r}=E(),a=t?t.getVideoByGrade:[],s=(d,l)=>{const c=a.find(m=>m.id===d);return c?Math.floor(c.duration/l):0};return u.exports.useEffect(()=>{e&&r(d=>d.queryGetVideoByGrade({gradeId:e.grade.id}))},[e]),{videos:a,loading:!t||n,getPlayingPercentage:s}}function va(){const e=xa(),t=ya(),n=_a(t),r=[e.loading,t.loading,n.loading].find(Boolean);return{progressInfo:e,videoList:n,gradeInfo:t,isPageLoading:Boolean(r)}}const Yn=u.exports.createContext(null);function at(){return u.exports.useContext(Yn)}const st=()=>i(h,{sx:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%,-50%)",zIndex:100*100},children:i(ce,{size:150})}),ba=C(({children:e})=>{const t=va();return i(Yn.Provider,{value:t,children:p(h,{sx:{background:"#f9f9f9",minHeight:"100vh"},children:[i(sn,{}),i(Wn,{}),p(h,{id:"main-component",component:"main",sx:{flexGrow:1,minHeight:"100vh"},children:[i(Me,{}),i(Jn,{}),i(Kn,{}),t.isPageLoading?i(st,{}):e]})]})})});function Gt(e){const{updateNavs:t,navs:n}=te();u.exports.useEffect(()=>{!e.length&&!n.length&&t([{label:"Dashboard",path:"/"},{label:"Diskusi",path:"/discussion"}])},[e])}const wa={[pe.ADMIN]:ma,[pe.STUDENT]:ba,GUEST:fa},Ca=e=>{const{user:t}=X(),n=t?t.role:"GUEST",r=wa[n];return i(r,g({},e))};class Xn extends u.exports.Component{constructor(){super(...arguments);_(this,"getValue",()=>{const{type:t="text",select:n,controller:r}=this.props;switch(t){case"number":return 0;case"money":return 0;default:{if(n)return"__default__";if(r){const{value:a}=r.field;if(!(a instanceof File))return a!=null?a:""}return this.props.value?this.props.value:""}}});_(this,"handleChange",t=>{const n=t.target.value,{onChange:r}=this.props;r&&r(n),this.props.controller&&this.props.controller.field.onChange(n)})}propBuilder(){var c;const a=this.props,{controller:t}=a,n=N(a,["controller"]),r={onChange:this.handleChange,value:this.getValue()};if(t){const s=t,{field:d}=s,l=d,{ref:m}=l,f=N(l,["ref"]),{fieldState:v}=s;if(v.error){const{message:w}=v.error;r.helperText=w,r.error=!0}return r.onChange=w=>{f==null||f.onChange(w),this.handleChange(w)},x(g(g(g({},n),f),r),{inputRef:m,inputProps:g({},(c=n.inputProps)!=null?c:{})})}return g(g({},n),r)}render(){return i(dn,g({},this.propBuilder()))}}const G=n=>{var r=n,{noUseForm:e}=r,t=N(r,["noUseForm"]);const a=Ee();if(!a&&!e&&!t.onChange)throw new Error("Please provide onChange props if without use useForm");if(e)return i(Xn,g({},t));const s=K({name:t.name,control:a.control});return i(Xn,g({controller:s},t))},Ia=({component:e,makeProps:t,getKey:n,data:r})=>i(I,{children:r.map(a=>{let s=n?n(a):a;typeof a=="object"&&"key"in a&&(s=a.key);const d=x(g({},t?t(a):a),{key:s});return i(e,g({},d))})});function Sa(e){return u.exports.useCallback(()=>i(Ia,g({},e)),[e])}const Pa={display:{sm:"block",md:"flex"},bgcolor:"primary.main",height:"100vh",overflow:"hidden","& > .content":{display:"flex",alignItems:"center",justifyContent:"center",width:{sm:"100%",md:"50%"},height:"100%"}},$a=n=>{var r=n,{icon:e}=r,t=N(r,["icon"]);return i(h,{sx:{marginY:2,padding:2},children:i(G,x(g({},t),{InputProps:{endAdornment:i(un,{position:"end",children:i(e,{})})}}))})},ka=()=>{const e=Rn(),{enqueueSnackbar:t}=ae(),n=X(),r=H();return()=>{e().then(a=>{if(a){const{name:s}=a;t(`Selamat datang ${s}`),r(a.role===pe.ADMIN?"/classroom":"/"),n.setUser(a)}})}},qa=C(()=>{const e=ka(),{isCredentialInvalid:t,form:n,onSubmit:r,loading:a}=ia(e),s=na(a),d=Sa({getKey({name:l}){return l},component:$a,data:s});return i(oe,x(g({},n),{children:p("form",{onSubmit:r,children:[i(d,{}),p(h,{textAlign:"right",padding:2,children:[i(ze,{in:t,timeout:"auto",children:i(y,{sx:{color:"error.light",marginY:2},variant:"subtitle2",children:"Kombinasi email & password salah"})}),i(b,{variant:"contained",size:"large",type:"submit",endIcon:a?i(ce,{sx:{color:"white"},size:15}):i(ur,{}),children:"Masuk"})]})]})}))}),Da=()=>p(h,{component:"main",sx:Pa,children:[i("div",{className:"content",children:p(h,{sx:{color:"white"},children:[i(y,{variant:"h1",children:"Bisindo"}),i(y,{variant:"h5",children:"Selamat datang"}),i(y,{children:"Kami adalah platform kursus online untuk pembelajaran bahasa isyarat."})]})}),i("div",{className:"content",children:p(F,{sx:{padding:2,width:"80%",height:"60%",color:"#2c3e50"},children:[i(y,{align:"center",variant:"h5",sx:{fontWeight:"light"},children:"Login dengan email & password anda"}),i(B,{sx:{marginY:2}}),i(qa,{})]})})]});function Ma(e){return e?{data:e.data,paginator:e.paginatorInfo}:{data:[],paginator:{perPage:10,currentPage:0,count:0,lastPage:0,lastItem:0,firstItem:0,hasMorePages:!1,total:0,__typename:"PaginatorInfo"}}}const Ea=(e,t)=>{const n=Ce(e),{data:r,loading:a,setQuery:s}=E(),d=c=>s(m=>m[e](c,f=>f.data(t).paginatorInfo(new ge().currentPage.hasMorePages.lastPage.perPage.count.total.lastItem.firstItem)));return{result:Ma(r&&r[n]?r[n]:null),fetch:d,loading:a,hasResponse:Boolean(r)}},za=({include:e,callback:t})=>{const[n,r]=u.exports.useState(e);return{updateParameter:d=>l=>{const c=x(g({},n),{[d]:l});r(g({},c)),t(x(g({},c),{page:1,first:10}))},removeParam:d=>{let l={};r(c=>(delete c[d],l=c,g({},c))),t(x(g({},l),{page:1,first:10}))},parameter:n}},Aa=({callback:e,paginator:t,merge:n})=>{const r=u.exports.useCallback((d,l)=>{e(x(g({},n),{page:d,first:l}))},[n]);return{go:r,next:()=>r(t.currentPage+1,10),prev:()=>r(t.currentPage+1,10)}};function Ta({includeQuery:e,api:t,selector:n}){const{fetch:r,loading:a,result:s,hasResponse:d}=Ea(t,n),{parameter:l,updateParameter:c,removeParam:m}=za({include:e,callback:r}),f=Aa({callback:r,paginator:s.paginator,merge:l}),v=u.exports.useCallback(()=>{r(g({page:1,first:10},e))},[e]),w=d&&s.data.length===0;return{result:s,actions:x(g({},f),{updateParameter:c,parameter:l,removeParam:m}),loading:a,initialFetch:v,isEmpty:w,hasResponse:d}}function dt(e,t){return(n={})=>Ta({includeQuery:n,api:e,selector:t})}const Ga={quizByVideo:dt(ee.queryQuizes,e=>e.show_at.id.type.additional_image.question.questionAnswer.image_matcher.choises(t=>t.id.image.text.index)),grades:dt(ee.queryGrades,Le),students:dt(ee.queryStudents,e=>e.id.student(ye).grade(t=>t.id.name)),discussion:dt(ee.queryDiscussion,e=>e.id.content.created_at.user_id.user(t=>t.name.id).replies(t=>t.user_id.id.user(n=>n.name).content.user_id.created_at))},Zn=u.exports.createContext(null);function U(){return u.exports.useContext(Zn)}const ut=C(({dataKey:e,includes:t={},children:n})=>{const r=Ga[e];if(!r)throw new Error(`Paginator for ${e} is not defined`);const a=r(t);return i(Zn.Provider,{value:a,children:n})}),Va=["videos","student","editor","discussion"],La=()=>{const[e,t]=u.exports.useState({selected:null,mobileControlTab:"list",tab:"videos"}),{selected:n,mobileControlTab:r}=e;Tt();const a=u.exports.useCallback(c=>{t(m=>x(g({},m),{selected:c,mobileControlTab:"manage"}))},[r]),s=u.exports.useCallback(c=>{t(m=>x(g({},m),{tab:c}))},[]),d=u.exports.useCallback(c=>{t(m=>x(g({},m),{mobileControlTab:c}))},[]);u.exports.useEffect(()=>{n&&s("videos")},[n]);const l=u.exports.useCallback(c=>()=>a(c),[]);return{selected:n,tablist:Va,activeTab:e.tab,mobileControlTab:r,setMobileControlTab:d,setActiveTab:s,setModel:l}},ei=u.exports.createContext(null);function Fa(){return u.exports.useContext(ei)}function Ua({api:e,rule:t,parser:n,merge:r={}}){const a=ke({resolver:yt(t)}),s=Ce(e),{data:d,store:l}=E(),[c,m]=u.exports.useState(!1),[f,v]=u.exports.useState({response:null}),w=u.exports.useCallback(V=>{v({response:null});const R=n?n(g(g({},V),r)):g(g({},V),r);return m(!0),l[e](R).currentPromise().then(ie=>{m(!1),ie&&ie[s]&&v({response:ie})})},[e]),D=a.handleSubmit(w),S=u.exports.useCallback(()=>{a.reset({})},[]),M=u.exports.useCallback(V=>{Object.values(R=>{a.setValue(R,V[R])})},[]);return{response:f.response,form:a,setFormValue:M,reset:S,loading:c,handler:D}}function ne({api:e,rule:t}){return(n={},r)=>Ua({api:e,rule:t,merge:n,parser:r})}const Vt=fe({name:j().required()}),Lt={videos:{required:"Silahkan pilih video terlebih dahulu"},title:{required:"Silahkan isi judul video"},caption:{required:"Silahkan isi caption video"},description:{required:"Silahkan isi deskripsi video"}},Na=wt().test("video",Lt.videos.required,e=>e&&e instanceof File),ti=wt().test("description validator",Lt.description.required,e=>{try{return e.blocks.length===1?e.blocks[0].text!=="":e.blocks.length>0}catch{return!1}}),Ha=fe({content:Na.required(Lt.videos.required),title:j().required(),caption:j().required(),description:ti.required()}),Ba=fe({title:j().required(),caption:j().required(),description:ti.required()}),Qa=fe({email:j().required().email(),name:j().required()}),Ra={description:{required:"Silahkan isi konten diskusi"}},Oa=wt().test("description validator",Ra.description.required,e=>{try{return e.blocks.length===1?e.blocks[0].text!=="":e.blocks.length>0}catch{return!1}}),lt=fe({content:Oa.required()}),Wa={createBatch:ne({api:P.mutateGrade,rule:Vt}),editBatch:ne({api:P.mutateGrade,rule:Vt}),addVideo:ne({api:P.mutateVideo,rule:Ha}),addUser:ne({api:P.mutateUser,rule:Qa}),addDiscussion:ne({api:P.mutateDiscussion,rule:lt}),editDiscussion:ne({api:P.mutateUpdateDiscussion,rule:lt}),addDiscussionReply:ne({api:P.mutateDiscussionReply,rule:lt}),editDiscussionReply:ne({api:P.mutateUpdateDiscussionReply,rule:lt}),editVideo:ne({api:P.mutateVideoUpdate,rule:Ba})},ni=u.exports.createContext(null);function Be(){return u.exports.useContext(ni)}const Qe=C(({mutateKey:e,merge:t={},parser:n,children:r})=>{const a=Wa[e];if(!a)throw new Error(`Please implemented mutation ${e}`);const s=a(t,n);return i(ni.Provider,{value:s,children:r})}),Ja=C(({onSuccess:e,model:t})=>{const{setFormValue:n,response:r,form:a,handler:s,loading:d}=Be();return u.exports.useEffect(()=>{r&&e(r)},[r]),u.exports.useEffect(()=>{t&&n({name:t.name})},[t]),i(oe,x(g({},a),{children:p("form",{onSubmit:s,children:[i(G,{fullWidth:!0,name:"name",label:"Nama batch"}),i(b,{sx:{marginY:2},variant:"contained",size:"large",type:"submit",endIcon:d?i(ce,{sx:{color:"white"},size:15}):i(Ke,{}),children:"Simpan"})]})}))}),ja={marginTop:2,textTransform:"none",mb:2},Ka=()=>{const[e,{toggle:t,inline:n}]=T(),{enqueueSnackbar:r}=ae(),{initialFetch:a}=U();return p(I,{children:[i(b,{onClick:t,startIcon:e?i(lr,{}):i(ln,{}),sx:ja,variant:"outlined",children:e?"Tutup":"Tambah batch baru"}),i(ze,{in:e,sx:{mb:2},timeout:"auto",children:i(Qe,{mutateKey:"createBatch",children:i(F,{sx:{padding:2,borderRadius:0},children:i(Ja,{onSuccess:d=>{r(`${d.name} berhasil di tambahkan`,{variant:"success"}),n(!1),a()}})})})})]})},Ya=()=>{const[e,t]=u.exports.useState(""),n=v=>t(v),{actions:{removeParam:r,parameter:a,updateParameter:s},result:d,loading:l,hasResponse:c}=U();return i(L,{children:p("form",{onSubmit:v=>{s("search")(`%${e}%`),v.preventDefault()},onReset:()=>{r("search"),t("")},children:[i(G,{fullWidth:!0,disabled:l,variant:"standard",InputProps:{startAdornment:i(un,{sx:{px:2},position:"start",children:i(vt,{})})},sx:{bgcolor:"white","& input":{py:2}},placeholder:"Masukan kata kunci pencarian",name:"search",onChange:n,value:e,noUseForm:!0,size:"medium"}),p(h,{sx:{p:1,display:"flex",justifyContent:"flex-end"},children:[i(h,{sx:{display:c?"block":"none"},children:i(y,{variant:"caption",children:d.paginator.total?`Hasil pencarian : ${d.paginator.total} item`:`Data tidak di temukan dengan kata kunci "${a.search}"`})}),p(h,{sx:{ml:"auto"},children:[i(b,{type:"submit",startIcon:i(vt,{}),disabled:l,children:"Cari"}),i(b,{type:"reset",startIcon:i(cr,{}),disabled:l||!e,children:"Reset"})]})]})]})})},ii=({children:e,handleClose:t,open:n,isCloseDisabled:r})=>i(Ye,{open:n,PaperProps:{sx:{minWidth:["80vw","50vw"]}},onClose:r?void 0:t,children:i(Ct,{children:e})}),ue=a=>{var s=a,{loading:e,disabled:t,icon:n}=s,r=N(s,["loading","disabled","icon"]);return i(b,x(g({},r),{startIcon:e?i(ce,{size:20}):n,type:"submit",disabled:t||e}))};function Ie({message:e,show:t,variant:n,callback:r,autoShow:a}){const{enqueueSnackbar:s,closeSnackbar:d}=ae(),l=()=>{const c=()=>typeof e=="function"?e():e;d(),s(c(),{variant:n})};return u.exports.useEffect(()=>(d(),()=>{d()}),[]),u.exports.useEffect(()=>{a&&t&&r&&r(),!a&&t&&(r&&r(),l())},[t,n]),l}function Xa(e=""){const t=H();return{navigate:()=>{t(e)},to:a=>()=>t(a)}}const ri=({icon:e,text:t})=>p(h,{sx:{display:"inline-flex",alignItems:"center",mr:2},children:[i(h,{sx:{mr:2},children:e}),i(y,{variant:"caption",children:t})]}),Za=C(({batch:e,onSelect:t})=>{const n=`/classroom/${_t(e.name).slugify().value()}/${e.id}/videos`,{navigate:r}=Xa(n);return p(F,{sx:{p:2,mx:[1,0],mb:2,display:["block","flex"]},children:[p(h,{sx:{width:["100%","80%"]},children:[i(y,{variant:"h4",sx:{textTransform:"capitalize"},children:e.name}),i(ri,{text:`${e.student_count} siswa`,icon:i(pr,{})}),i(ri,{text:`${e.video_count} video`,icon:i(hr,{})})]}),p(h,{sx:{width:["100%","20%"],"& >button":{mb:1}},children:[i(b,{onClick:r,size:"small",fullWidth:!0,variant:"outlined",children:"Manage"}),i(b,{onClick:t(e,"update"),size:"small",fullWidth:!0,variant:"outlined",children:"Ganti nama batch"}),i(b,{onClick:t(e,"delete"),size:"small",fullWidth:!0,variant:"outlined",children:"Hapus"})]})]})}),es=C(({selected:e,action:t,handleClose:n})=>{const r=ke({resolver:yt(Vt)}),[{response:a,loading:s},d]=He({api:P.mutateGradeEdit,merge:{id:e?e.id:""}}),l=r.handleSubmit(d),c=Ie({show:Boolean(a&&t==="update"),message:"Perubahan berhasil disimpan",variant:"success",autoShow:!1});return u.exports.useEffect(()=>{a&&(n(),c())},[a]),u.exports.useEffect(()=>{e&&r.setValue("name",e.name)},[e]),i(ii,{handleClose:n,open:t==="update",isCloseDisabled:s,children:i(oe,x(g({},r),{children:p("form",{onSubmit:l,children:[i(y,{variant:"subtitle1",children:"Ganti nama batch"}),i(G,{fullWidth:!0,name:"name"}),i(ue,{icon:i(Ke,{}),loading:s,children:"Simpan"})]})}))})}),ts=C(({selected:e,action:t,handleClose:n})=>{const[{response:r,loading:a},s]=He({api:P.mutateGradeDelete,merge:{id:e?e.id:""}}),d=Ie({message:r?`${r.name} berhasil di hapus`:"",autoShow:!1,variant:"success",show:Boolean(r)}),{initialFetch:l}=U();return u.exports.useEffect(()=>{r&&(d(),l(),n())},[r]),p(ii,{handleClose:n,open:t==="delete",isCloseDisabled:a,children:[p(y,{variant:"h5",children:["Apakah anda yakin untuk menghapus ",e?e.name:""," ?"]}),p(h,{sx:{pt:4,width:["100%","50%"],"& > button":{textTransform:"capitalize"}},children:[i(ue,{onClick:()=>s({}),icon:i(Ae,{}),loading:a,children:"Hapus"}),i(b,{variant:"outlined",disabled:a,onClick:n,children:"Batal"})]})]})}),ns=C(()=>{const{result:{data:e}}=U(),[t,n]=u.exports.useState({selected:null,action:null}),{selected:r,action:a}=t,s=(l,c)=>()=>n({selected:l,action:c}),d=()=>{n({action:null,selected:r}),setTimeout(()=>{n({selected:null,action:null})},1e3)};return p(L,{children:[e.map(l=>i(Za,{batch:l,onSelect:s},l.id)),i(es,x(g({},t),{handleClose:d})),i(ts,x(g({},t),{handleClose:d}))]})}),is=()=>{const{initialFetch:e,loading:t,isEmpty:n,hasResponse:r}=U();return Fa(),u.exports.useEffect(()=>{e()},[]),p(I,{children:[i(L,{children:i(Ka,{})}),i(Ya,{}),i(ns,{})]})},rs=()=>{const{setTitle:e}=At(),{updateNavs:t}=te();u.exports.useEffect(()=>(e("Menagemen batch"),t([]),()=>{e("")}),[]);const n=La();return i(ut,{dataKey:"grades",children:i(ei.Provider,{value:n,children:i(is,{})})})},os=()=>i(rs,{}),as=C(e=>{const{updateBackUrl:t}=te();return u.exports.useEffect(()=>(t({url:"classroom",label:"kembali ke ruang kelas"}),()=>t(null)),[]),i(L,{children:i(cn,{})})}),ss=C(e=>{const t=je(),{updateBackUrl:n}=te();return u.exports.useEffect(()=>{t.state&&t.state.backurl&&n(t.state.backurl)},[t]),i(L,{children:i(cn,{})})});function ds(e,t){const n=Ce(e),{data:r,setQuery:a,loading:s}=E(),d=()=>{a(m=>m[e](t))};u.exports.useEffect(()=>{d()},[]);const l=()=>r?r[n]:[],c=()=>{if(s)return!1;const m=r&&r[n];return m?m.length===0:!1};return{data:l(),isEmpty:c(),loading:s,fetch:d,hasResponse:Boolean(r)}}function oi(e){return t=>ds(e,t)}const us=oi(ee.queryVideoByGrade),ls={videoByGrade:us,studentByGrade:oi(ee.queryStudents)},ai=u.exports.createContext(null);function cs(){return u.exports.useContext(ai)}const ps=C(({dataKey:e,props:t={},children:n})=>{const r=ls[e](t);return i(ai.Provider,{value:r,children:n})});function hs({api:e,provider:t,id:n}){const r=Ce(e),a=w=>w[e]({id:n}),{loading:s,error:d,setQuery:l,data:c}=E(a),m=()=>l(a),f={refreshModel:m,pageLoading:s,error:Boolean(d),modelId:n,model:c?c[r]:null,hasResponse:Boolean(c&&c[r])};return x(g({},(()=>t?t(f):{})()),{refreshModel:m,pageLoading:s,error:Boolean(d),modelId:n,model:c?c[r]:null,hasResponse:Boolean(c&&c[r])})}const gs=e=>{const[t,n]=u.exports.useState({page:e[0],animate:"opacity",animateDirection:"left"});return[t,a=>{const s=e.findIndex(c=>c===a),d=e.findIndex(c=>c===t.page),l=s>d?"left":"right";n({page:a,animateDirection:l,animate:"x"})}]},ct=["VIDEOS","ADD-VIDEO","STUDENTS","QUIZ-CHECK","DISCUSSION"];function ms(){gs(ct),H();const{pathname:e}=je(),[t,n]=u.exports.useState("Videos"),[r,a]=u.exports.useState({animate:"x",animateDirection:"left"});Xe(),u.exports.useEffect(()=>{let d=e.split("/").pop();if(d==="batch"&&(d="videos"),d){if(!ct.includes(d.toLocaleUpperCase()))return;n(d.toLocaleUpperCase())}},[e]);const s=d=>{const l=ct.findIndex(f=>f===d),c=ct.findIndex(f=>f===t),m=l>c?"left":"right";a({animateDirection:m,animate:"x"})};return{pageControll:[x(g({},r),{page:t}),s]}}function fs({pageLoading:e,model:t,hasResponse:n}){const[r,a]=u.exports.useState(!1),[s,d]=u.exports.useState(!1),l=()=>d(!0),c=()=>d(!1);u.exports.useEffect(()=>{!e&&t&&n&&setTimeout(()=>{a(!0)},1e3)},[e,n,t]);const{pageControll:m}=ms();return{showpage:r,progress:s,pageControll:m,showProgress:l,hideProgress:c}}const xs=e=>({api:ee.queryGradeById,id:e,provider:fs}),si=u.exports.createContext(null);function le(){return u.exports.useContext(si)}function ys(e){const{id:t,slug:n}=e,{setTitle:r}=At(),{updateNavs:a}=te();return u.exports.useEffect(()=>{r(" "),a([]);const s=({path:l,label:c})=>({path:`/classroom/${n}/${t}/${l}`,label:c}),d=[{label:"Video",path:"videos"},{label:"Tambah video",path:"add-video"},{label:"Siswa",path:"students"},{label:"Periksa quis",path:"quiz-check"},{label:"Diskusi",path:"discussion"}].map(s);return a(d),()=>{r("")}},[t]),hs(xs(t))}const pt=e=>C(()=>{const t=Xe(),n=ys(t);return u.exports.useEffect(()=>{n.refreshModel()},[]),i(si.Provider,{value:n,children:i(ps,{dataKey:"videoByGrade",props:{gradeId:t.id},children:n.pageLoading||!n.model?i(st,{}):i(e,{})})})}),_s=({model:e})=>{const t=H(),{model:n}=le(),r=()=>t(`/admin/video/${e.id}/info`,{state:{backurl:{url:`/classroom/${n.name}/${n.id}/videos`,label:`Manage ke kelas ${n.name}`}}});return i(F,{sx:{mb:2},children:p(Q,{container:!0,children:[i(Q,{item:!0,sm:12,md:2,children:i(h,{component:"img",src:e.thumbnail,sx:{width:"100%",height:"100%"}})}),i(Q,{item:!0,sm:12,md:8,children:i(h,{sx:{p:1},children:i(y,{variant:"h4",children:e.title})})}),i(Q,{item:!0,sm:12,md:2,sx:{display:"flex",alignItems:"center",p:2},children:i(b,{onClick:r,fullWidth:!0,children:"Manage video"})})]})})},vs=pt(C(()=>{const{data:e,fetch:t}=cs();return u.exports.useEffect(()=>{t()},[]),i(h,{sx:{py:5},children:e.map(n=>i(_s,{model:n},n.id))})}));const Re=({url:e,onPlaying:t,play:n=!1,playOnTime:r})=>{const a=u.exports.useRef(null),[s,{toggle:d,inline:l}]=T(n);return u.exports.useEffect(()=>{r&&l(!1);const m=a.current;m&&r&&m.pause().then(()=>{m.callAdapter("setCurrentTime",r).catch(console.log)})},[r,a]),i(h,{children:p(gr,{playsinline:!0,ref:a,onVmCurrentTimeChange:m=>{t&&setTimeout(()=>{t(parseInt(m.detail.toFixed(1)))},1e3)},children:[e?i(mr,{crossOrigin:"use-credentials",children:i("source",{"data-src":e})}):i(I,{}),i(fr,{children:p(xr,{fullWidth:!0,children:[i(pn,{children:i(yr,{})}),p(pn,{space:"top",children:[i(_r,{}),i(vr,{}),i(br,{separator:"/"})]})]})})]})})},bs={noVideoText:"Silahkan pilih video terlebih dahulu",noVideoTextButton:"Pilih video",changeVideoTextButton:"Ganti video",changeVideoTextButton1:"Pilih video lainya",uploadVideoSuccess:"Video berhasil di tambahkan"};var ws={videos:bs};const Cs=({name:e})=>{const{errors:t}=wr();if(!t[e])return i(u.exports.Fragment,{});const{message:n}=t[e];return i(Cr,{error:!0,children:n})},Is={backgroundColor:"white",position:"sticky",top:0,zIndex:10},di=e=>{const t=JSON.parse(e);return typeof t!="object"?di(t):t},Ss=e=>{const t=e.value;if(!t)return O.EditorState.createEmpty();try{const n=di(t);if(!("blocks"in n&&"entityMap"in n))return O.EditorState.createEmpty();const a=O.convertFromRaw(n);return O.EditorState.createWithContent(a)}catch{return O.EditorState.createEmpty()}};class Ps extends u.exports.Component{constructor(t){super(t);_(this,"EditorState");_(this,"reset",()=>{this.EditorState=O.EditorState.createEmpty()});_(this,"onEditorChange",t=>{const{field:n}=this.props;this.EditorState=t,n.onChange(O.convertToRaw(t.getCurrentContent()))});this.EditorState=Ss(this.props.field),typeof this.props.field.value=="string"&&this.props.field.onChange(O.convertToRaw(this.EditorState.getCurrentContent())),this.props.editorRef&&(this.props.editorRef.current={reset:this.reset})}render(){const t=this.props.disableOptions?{options:[]}:{};return p(I,{children:[i(hn.exports.Editor,{onEditorStateChange:this.onEditorChange,toolbarHidden:this.props.disableOptions,toolbarStyle:Is,editorState:this.EditorState,toolbar:t,editorStyle:{minHeight:300},placeholder:this.props.placeholder}),i(Cs,{name:this.props.field.name})]})}}const $s=Ir(Ps),Ft=({name:e,editorRef:t,disableOptions:n=!1,placeholder:r=""})=>{const a=K({name:e});return i($s,x(g({},a),{placeholder:r,editorRef:t,disableOptions:n}))},ui={value:"__disabled__",label:"Pilih salah satu opsi"};class li extends u.exports.Component{constructor(t){super(t);_(this,"options");_(this,"handleFormChange",t=>{if(this.props.controller){const{controller:n}=this.props;if(n){const{onChange:r}=n.field;r(t)}}this.props.onChange&&this.props.onChange(t)});_(this,"handleChange",t=>{const n=t.target.value;this.handleFormChange(n)});_(this,"findInOption",t=>this.options.find(n=>n.value===t));_(this,"getErrorProps",()=>{var n,r;if(!this.props.controller)return{};const{fieldState:t}=this.props.controller;return{error:Boolean(t.error),helperText:(r=(n=t.error)==null?void 0:n.message)!=null?r:""}});_(this,"getValue",()=>{const t=r=>{if(!r)return"__disabled__";const a=this.findInOption(r);return a?a.value:"__disabled__"};if(this.props.controller){const{field:{value:r}}=this.props.controller;return t(r)}const{value:n}=this.props;return t(n)});_(this,"getFieldProps",()=>{var s;const a=this.props,{options:t,controller:n}=a,r=N(a,["options","controller"]);return x(g(g({},r),this.getErrorProps()),{SelectProps:x(g({},(s=r.SelectProps)!=null?s:{}),{inputRef:n==null?void 0:n.field.ref}),onChange:this.handleChange,value:this.getValue()})});this.options=[ui,...this.props.options]}render(){const t=this.getFieldProps();return i("div",{children:i(dn,x(g({},t),{select:!0,fullWidth:!0,children:this.options.map(n=>i(on,{disabled:n.value===ui.value,value:n.value,children:n.label},n.value))}))})}}const ht=ws.videos,ks=()=>{const e=Ee(),t=u.exports.useRef(null),[n,r]=u.exports.useState(""),a=d=>{const l=d.target.files?d.target.files[0]:null;if(l){e.setValue("content",l);const c=new FileReader;c.onloadend=()=>{r(c.result)},c.readAsDataURL(l)}},s=()=>{t.current&&t.current.click()};return Pr(()=>{var d;t.current&&((d=t.current)==null||d.addEventListener("change",a))}),[{inputRef:t,onClick:s},n]},qs=e=>({minHeight:256,alignItems:"center",justifyContent:"center",display:e?"flex":"block","& > .video-wrapper":{width:"100%",background:"black"}}),Ds=()=>{const[{onClick:e,inputRef:t},n]=ks(),a=Ee().formState.errors,{enqueueSnackbar:s,closeSnackbar:d}=ae();return u.exports.useEffect(()=>{a.content&&(d(),s(a.content.message,{variant:"error"}))},[a]),p(h,{sx:qs(!n),children:[i("input",{style:{display:"none"},type:"file",accept:"video/*",ref:t}),n?i("div",{className:"video-wrapper",children:i(Re,{url:n})}):i(I,{}),p("div",{children:[n?null:i(y,{children:ht.noVideoText}),i(b,{onClick:e,children:n?ht.changeVideoTextButton1:ht.changeVideoTextButton})]})]})},Ms=C(()=>{const{form:e,reset:t,response:n,loading:r,handler:a}=Be(),{pageControll:s,showProgress:d,hideProgress:l}=le(),c=s[1];return u.exports.useEffect(()=>{(r?d:l)()},[r]),Ie({message:ht.uploadVideoSuccess,show:Boolean(n),callback(m){c("VIDEOS")},variant:"success"}),i(oe,x(g({},e),{children:p(Q,{container:!0,spacing:2,onSubmit:a,component:"form",children:[i(Q,{item:!0,xs:12,md:8,children:i(Ds,{})}),i(Q,{item:!0,xs:12,md:4,children:p(h,{sx:{pt:2},children:[i(G,{sx:{mb:3},label:"Judul video",name:"title",fullWidth:!0}),i(G,{sx:{mb:3},label:"Caption video",name:"caption",fullWidth:!0})]})}),p(Q,{item:!0,xs:12,children:[i(h,{sx:{p:[0,2]},children:i(Ft,{placeholder:"Deskripsi video",name:"description"})}),i(h,{sx:{p:[0,2],mt:3},children:i(ue,{variant:"outlined",fullWidth:!0,icon:i(Sr,{}),loading:r,children:"Upload video"})})]})]})}))}),Es=e=>(e.description=JSON.stringify(e.description),g({},e)),zs=()=>{const{modelId:e}=le();return i(Qe,{parser:Es,merge:{gradeId:e},mutateKey:"addVideo",children:i(h,{sx:{mb:5},children:i(Ms,{})})})},As=C(({videos:e})=>{var D;const t=e.map(S=>({label:S.title,value:S.id})),{modelId:n,model:r}=le(),a=H(),{enqueueSnackbar:s}=ae(),[{loading:d,response:l},c]=He({api:P.mutateAddVideoInGrade,merge:{gradeId:n}});u.exports.useEffect(()=>{l&&(s("Video berhasil di tambahkan",{variant:"success"}),a(`/batch/${r.name}/${r.id}/videos`))},[l]);const m=ke(),f=K({control:m.control,name:"videoId",defaultValue:t[0].value}),v=e.find(S=>S.id===f.field.value),w=m.handleSubmit(c);return p(h,{sx:{minHeight:"50vh",display:["block","flex"],"& > div":{p:1}},children:[i(h,{sx:{width:["100%","70%"],overflow:"hidden"},children:i($e,{exitBeforeEnter:!0,children:i(re.div,{transition:{x:{type:"tween"}},initial:{x:"-200%"},animate:{x:0},exit:{x:"200%"},children:v&&i(Re,{url:v.content})},(D=v==null?void 0:v.id)!=null?D:"video-id")})}),p(h,{component:"form",onSubmit:w,sx:{width:["100%","30%"]},children:[i(li,x(g({noUseForm:!0,disabled:d,size:"small"},f.field),{options:t,name:"videoId"})),i(ue,{sx:{mt:2,textTransform:"none"},fullWidth:!0,icon:i(Ke,{}),loading:!1,children:"Simpan"})]})]})}),Ts=C(()=>{const{modelId:e}=le(),{data:t,loading:n}=E(s=>s.queryVideoNotInGrade({id:e})),a=(()=>{var s;return t?(s=t.videoNotInGrade)!=null?s:[]:[]})();return i($e,{exitBeforeEnter:!0,children:i(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n?i(h,{sx:{py:5,display:"flex",justifyContent:"center"},children:p(h,{sx:{textAlign:"center"},children:[i(ce,{size:50}),i(y,{sx:{display:"block"},variant:"caption",children:"Loading"})]})}):i(F,{sx:{p:2},children:a.length?i(As,{videos:a}):i(y,{align:"center",variant:"subtitle1",children:"Tidak ada video yang dapat di pilih"})})},n?"loading":"oke")})}),Gs=pt(()=>(le(),p(I,{children:[i(y,{color:"primary",sx:{mt:2},variant:"h5",children:"Pilih dari video yang telah terupload"}),i(B,{sx:{my:2}}),i(Ts,{}),i(y,{color:"primary",sx:{mt:2},variant:"h5",children:"Upload video baru"}),i(B,{sx:{my:2}}),i(F,{sx:{p:1,mb:5},children:i(zs,{})})]}))),Vs=C(({rows:e,columns:t,paginator:n,paginationHandler:r})=>i(I,{children:i($r,{pagination:!0,paginationMode:"server",onPageChange:d=>{r(d+1,n.perPage)},onPageSizeChange:d=>{r(1,d+1)},page:n.currentPage?n.currentPage-1:1,rowsPerPageOptions:[10,20,30],rowCount:n.total-1,pageSize:n.perPage,rows:[...e],columns:t,autoHeight:!0})})),Ls=[{field:"name",headerName:"Nama siswa",flex:1},{field:"status",headerName:"Status",flex:.2,valueGetter(e){return e?"Aktif":"Non aktif"}}],Fs=C(()=>{const[e,{toggle:t,force:n}]=T(),{loading:r,form:a,handler:s,response:d}=Be(),{initialFetch:l}=U();return console.log(a.formState.errors),Ie({message:"Siswa berhasil di tambahkan",show:Boolean(d),variant:"success",callback(c){n(!1)(),a.reset(),l()}}),p(F,{sx:{p:2,mt:2},children:[i(b,{color:e?"error":"primary",onClick:t,children:e?"Tutup":"Tambahkan siswa"}),i(ze,{sx:{mt:e?2:0},in:e,children:p(Q,{container:!0,children:[i(Q,{item:!0,xs:12,md:6,children:i(oe,x(g({},a),{children:p("form",{onSubmit:s,children:[i(G,{sx:{mb:4},label:"Nama siswa",name:"name",fullWidth:!0}),i(G,{type:"email",label:"Alamat email",fullWidth:!0,name:"email"}),i(ue,{sx:{mt:3},icon:i(ln,{}),loading:r,children:"Simpan"})]})}))}),i(Q,{item:!0,xs:12,md:6,sx:{px:2},children:i(y,{variant:"subtitle1",children:"Tambahkan siswa dengan mengirim email invitasi yang akan di daftarkan, siswa dapat login dengan link yang di berikan untuk mengganti password."})})]})})]})}),Us=C(()=>{const{result:e,initialFetch:t,actions:{go:n}}=U();u.exports.useEffect(()=>{t()},[]);const r=e.data.map(a=>({name:a.student.name,id:a.student.id,status:a.student.need_change_password}));return i(h,{sx:{py:2},children:i(Vs,{paginationHandler:n,paginator:e.paginator,columns:Ls,rows:r})})}),Ns=pt(()=>{const{modelId:e}=le();return p(ut,{dataKey:"students",includes:{gradeId:e},children:[i(Qe,{parser:t=>({args:t}),merge:{grade_id:e},mutateKey:"addUser",children:i(Fs,{})}),i(Us,{})]})}),Hs=e=>i("div",{children:i("h1",{children:"Quiz check"})});function Bs(e){const{user:t}=X(),[n,r]=u.exports.useState(null),a=u.exports.useCallback(c=>(t==null?void 0:t.id)===c.user_id,[t]),[s,d]=u.exports.useState(null),l=()=>s&&(n==="edit"||n==="editReply")?s.content:null;return{enableCrud:a,setFormMode:r,formMode:n,gradeId:e,userId:t==null?void 0:t.id,setSelected:d,initialContent:l(),selectedId:s?s.id:""}}const ci=u.exports.createContext(null),Se=()=>u.exports.useContext(ci),Qs="Thread berhasil ditambahkan",Rs="Perubahan berhasil disimpan",Os="Balasan anda berhasil di tambahkan",Ws="Perubahan berhasil disimpan";var Js={create:Qs,edit:Rs,addReply:Os,editReply:Ws};const js=C(()=>{const{formMode:e,setFormMode:t,initialContent:n,setSelected:r,selectedId:a}=Se(),{loading:s,form:d,response:l,handler:c,reset:m}=Be(),{initialFetch:f}=U();u.exports.useEffect(()=>{n&&e&&d.setValue("content",n)},[n,e]);const v=()=>{s||(m(),t(null))},w=u.exports.useCallback(()=>e?Js[e]:"",[e]);return Ie({message:w(),show:Boolean(l),callback:()=>{r(null),t(null),v(),f()},variant:"success"}),i(Ye,{fullWidth:!0,open:Boolean(e),onClose:v,children:i(oe,x(g({},d),{children:i(h,{sx:{p:2},children:p("form",{onSubmit:c,children:[i(Te,{children:"Konten diskusi : "}),i(Ft,{name:"content"}),i(ue,{icon:i(It,{}),loading:s,children:"Simpan"})]})})}))})}),Ks=kr(e=>({root:{"& > *":{fontFamily:"Roboto!important"}},editor:{"& > *":{fontFamily:"Roboto!important"}}})),pi=e=>{const t=JSON.parse(e);return typeof t=="string"?pi(t):t},gt=({data:e})=>{const t=Ks();try{const n=O.convertFromRaw(pi(e)),r=O.EditorState.createWithContent(n);return i("div",{className:t.root,children:i(hn.exports.Editor,{editorClassName:t.editor,toolbarHidden:!0,readOnly:!0,toolbar:{},editorState:r})})}catch(n){return console.log(n),null}},hi=u.exports.createContext(null),Ut=()=>u.exports.useContext(hi),Ys=()=>{const{open:e,handleCloseDialog:t,getContentText:n,loading:r,onConfirm:a}=Ut();return p(Ye,{open:e,onClose:t,children:[i(Ct,{children:n()}),p(gn,{children:[i(b,{disabled:r,onClick:t,startIcon:i(qr,{}),children:"Batal"}),i(ue,{color:"error",onClick:a,icon:i(Ae,{}),loading:r,children:"Hapus"})]})]})},Xs=({api:e,callback:t,getSuccesMessage:n,getContentText:r})=>{const[a,s]=u.exports.useState(e),d=Ce(a),{loading:l,data:c,setQuery:m}=E(),[f,v]=u.exports.useState(null),[w,D]=u.exports.useState(!0);Ie({message:n?n():"Data berhasil di hapus",callback(){v(null),t(),D(!0)},variant:"success",show:Boolean(c&&c[d])&&!w,autoShow:!1});const S=()=>{l||v(null)},M=(R,ie)=>()=>{s(ie||e),v(R.id)},V=()=>(D(!1),m(R=>R[a]({id:f})));return{open:Boolean(f),loading:l,handleCloseDialog:S,handleOpenDialog:M,getContentText:r,Dialog:Ys,onConfirm:V}},Zs=({model:e})=>{const{setSelected:t,setFormMode:n}=Se(),{handleOpenDialog:r}=Ut(),a=r(e,P.mutateDeleteDiscussionReply);return p(h,{sx:{py:1,textAlign:"right"},children:[i(xe,{color:"primary",onClick:()=>{t(e),n("editReply")},children:i(fn,{})}),i(xe,{color:"error",onClick:a,children:i(Ae,{})})]})},ed=({model:e})=>{const{enableCrud:t}=Se();return p(h,{sx:{p:1,ml:[0,3,10]},children:[p(h,{sx:{display:"flex",py:1},children:[i(h,{children:i(mn,{src:"/test.png",alt:e.user.name})}),p(h,{children:[i(y,{sx:{ml:1},variant:"subtitle2",children:e.user.name}),i(y,{sx:{ml:1},variant:"subtitle2",children:e.created_at})]})]}),i(B,{}),i(gt,{data:e.content}),t(e)?i(Zs,{model:e}):null,i(B,{})]})},td=({replies:e})=>i(I,{children:e.map(t=>i(ed,{model:t},t.id))}),nd=({model:e})=>{const{setSelected:t,setFormMode:n,enableCrud:r}=Se(),{handleOpenDialog:a}=Ut(),s=u.exports.useCallback(()=>{t(e),n("edit")},[]),d=a(e);return p(h,{sx:{display:"flex"},children:[p(h,{sx:{display:"flex",alignItems:"center"},children:[i(h,{children:i(mn,{src:"/test.png",alt:e.user.name})}),p(h,{children:[i(y,{sx:{ml:1},variant:"subtitle2",children:e.user.name}),i(y,{sx:{ml:1},variant:"subtitle2",children:e.created_at})]})]}),r(e)?p(h,{sx:{ml:"auto"},children:[i(St,{title:"Hapus",children:i(xe,{color:"error",onClick:d,children:i(Ae,{})})}),i(St,{title:"Edit",children:i(xe,{color:"primary",onClick:s,children:i(fn,{})})})]}):null]})},id=({model:e})=>{const{setSelected:t,setFormMode:n}=Se();u.exports.useCallback(()=>{t(e),n("edit")},[]);const[r,a]=u.exports.useState(!1),s=u.exports.useCallback(()=>{t(e),n("addReply")},[]);return p(F,{sx:{mb:2},children:[i(h,{sx:{p:2},children:i(nd,{model:e})}),i(B,{}),i(h,{sx:{p:2},children:i(gt,{data:e.content})}),i(B,{}),p(h,{sx:{p:2},children:[p(h,{sx:{display:"flex"},children:[i(b,{startIcon:i(It,{}),onClick:()=>a(!r),sx:{textTransform:"none"},children:"Tampilkan komentar"}),i(b,{startIcon:i(Dr,{}),onClick:s,sx:{textTransform:"none",ml:"auto"},children:"Buat komentar"})]}),p(ze,{in:r,unmountOnExit:!0,children:[e.replies.length?null:i(y,{variant:"h5",align:"center",sx:{py:3},children:"Thread ini belum memiliki komentar"}),i(td,{replies:e.replies})]})]})]})},rd=C(()=>{const{setFormMode:e}=Se(),{isEmpty:t,initialFetch:n,result:{data:r}}=U();u.exports.useEffect(()=>{n()},[]);const a=u.exports.useCallback(()=>{e("create")},[]),s=Xs({api:P.mutateDeleteDiscussion,callback:n,getContentText(){return"Apakah anda yakin untuk menghapus thread diskusi ini ? "}});return p(hi.Provider,{value:s,children:[i(s.Dialog,{}),t?p(h,{sx:{textAlign:"center",py:5},children:[i(y,{align:"center",variant:"h5",children:"Saat ini tidak ada thread diskusi"}),i(b,{onClick:a,sx:{textTransform:"none"},children:"Klik disini untuk menambahkan"})]}):null,p(L,{children:[i(h,{sx:{my:2},children:i(b,{startIcon:i(It,{}),onClick:a,children:"Buat thread diskusi"})}),r.map(d=>i(id,{model:d},d.id))]})]})}),od={addReply:"addDiscussionReply",create:"addDiscussion",edit:"editDiscussion",editReply:"editDiscussionReply"},gi=({gradeId:e})=>{const t=Bs(e),n=t.formMode?od[t.formMode]:"addDiscussion",r=({content:a})=>{const s={content:JSON.stringify(a),userId:t.userId,gradeId:e};return t.formMode==="addReply"&&t.selectedId?s.discussionId=t.selectedId:t.selectedId&&(t.formMode==="edit"||t.formMode==="editReply")&&(s.id=t.selectedId),s};return i(ci.Provider,{value:t,children:p(ut,{dataKey:"discussion",includes:{gradeId:e},children:[i(Qe,{mutateKey:n,parser:r,children:i(js,{})}),i(rd,{})]})})},ad=pt(()=>{const{modelId:e}=le();return i(gi,{gradeId:e})}),sd=({id:e})=>{const{data:t,loading:n,setQuery:r}=E(),a=()=>{r(d=>d.queryVideo({id:e},l=>l.id.content.caption.description.duration.quiz_count.thumbnail.title.grades(c=>c.id.name)))},{setTitle:s}=At();return u.exports.useEffect(()=>(s("Menagamen video"),()=>s("")),[]),u.exports.useEffect(()=>{a()},[e]),{video:t?t.video:null,isNotFound:t&&!t.video,loading:n}},mi=u.exports.createContext(null);function Oe(){return u.exports.useContext(mi)}const dd=[{path:"info",name:"Informasi video"},{path:"quiz",name:"Quis"},{path:"edit",name:"Edit"}];function Nt(e){return C(()=>{const t=Xe(),n=sd(t),{updateNavs:r}=te();return u.exports.useEffect(()=>{const a=d=>`/admin/video/${t.id}${d?`/${d}`:""}`,s=dd.map(d=>({label:d.name,path:a(d.path==="/"?"":d.path)}));r([...s])},[]),i(mi.Provider,{value:n,children:!n.video||n.loading?i(st,{}):i(e,{})})})}const fi=Nt(()=>{const{video:e}=Oe(),t=H(),n=({id:a,name:s})=>()=>t(`/classroom/${s}/${a}/videos`),r=`/admin/video/${e==null?void 0:e.id}/quiz`;return p("div",{children:[i(h,{sx:{mb:2},children:i(Re,{url:e==null?void 0:e.content})}),p(h,{sx:{display:"flex",mb:5},children:[i(h,{sx:{width:"70%"},children:p(h,{sx:{p:2,pl:0},children:[p(h,{sx:{p:1,border:"solid 1px",borderColor:a=>a.palette.grey.A400,borderRadius:1},children:[i(y,{variant:"h5",children:e==null?void 0:e.title}),i(y,{variant:"subtitle1",children:e==null?void 0:e.caption})]}),i(y,{sx:{my:1},variant:"subtitle1",children:"Deskripsi video"}),i(h,{sx:{p:1,border:"solid 1px",borderColor:a=>a.palette.grey.A400,borderRadius:1},children:i(gt,{data:e==null?void 0:e.description})})]})}),i(h,{sx:{width:"30%"},children:p(F,{sx:{p:1,minHeight:500},children:[i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:"Jumlah quiz"}),p(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{variant:"button",sx:{cursor:"pointer",display:"block",textTransform:"none"},children:(e==null?void 0:e.quiz_count)?`${e.quiz_count} kuis`:"-"}),i(b,{to:r,sx:{textTransform:"none"},component:Mr,children:(e==null?void 0:e.quiz_count)?"Tampilkan quis":"Buat quis"})]}),i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:"Batch / Kelas"}),i(B,{}),i(Er,{dense:!0,children:e==null?void 0:e.grades.map(a=>i(zr,{dense:!0,onClick:n(a),sx:{bgcolor:s=>s.palette.grey["200"]},button:!0,children:i(Ar,{primary:a.name})},a.id))})]})})]})]})}),me=["A","B","C","D"],xi=me.map((e,t)=>({content:"",type:"text",index:t})),ud=me.map((e,t)=>({content:null,type:"image",index:t}));function ld({video:e}){const[t,n]=u.exports.useState({type:z.IMAGE_MATCH,text:"",multipleChoise:{answer:0,question:"",additionalFile:null,type:"text"}}),[r,a]=u.exports.useState(xi);return u.exports.useEffect(()=>{console.log("called"),t.multipleChoise.type==="text"?a([...xi]):a([...ud])},[t.multipleChoise]),{multipleChoiseOptions:r,formValues:t,callbacks:{onMultipleChoiseChange:f=>v=>{const w=x(g({},t.multipleChoise),{[f]:v});n(x(g({},t),{multipleChoise:g({},w)}))},onTextChange:f=>{n(x(g({},t),{text:f}))},changeMultipleChoiseOptions:f=>v=>{const w=[...r];w[f].content=v,a([...w])}},changeType:f=>{const v=x(g({},t),{text:"",type:f});f===z.MULTIPLE_CHOICE&&(v.multipleChoise={answer:0,type:"text",question:"",additionalFile:null}),n(g({},v))},video:e}}const yi=u.exports.createContext(null);function _i(){return Y({name:"type",defaultValue:z.IMAGE_MATCH})}function vi(){return u.exports.useContext(yi)}const cd=()=>{const{video:e}=vi(),[t,n]=u.exports.useState(0),r=(l,c)=>n(c),[a,{toggle:s}]=T(!1),d=K({name:"showAt",defaultValue:0});return u.exports.useEffect(()=>{d.field.onChange(t)},[t]),p(h,{paddingY:2,children:[i(Re,{url:e.content,play:a,playOnTime:t}),p(h,{marginTop:1,children:[i(Te,{children:"Di tampilkan pada menit"}),i(h,{children:i(Tr,{min:0,max:e.duration,track:!1,onChange:r,valueLabelDisplay:"off"})}),p(h,{display:"flex",justifyContent:"space-between",children:[i(y,{variant:"subtitle2",children:Ue(0)}),i(y,{variant:"subtitle2",children:Ue(t)}),i(y,{variant:"subtitle2",children:Ue(e.duration)})]})]})]})},pd=[{label:"Pilihan ganda",value:z.MULTIPLE_CHOICE},{label:"Pencocokan gambar",value:z.IMAGE_MATCH},{label:"Pengurutan huruf",value:z.LETTER_SEQUENCE}],hd=()=>{vi();const e=Y({name:"type",defaultValue:z.IMAGE_MATCH}),{field:{onChange:t}}=K({name:"type",defaultValue:z.IMAGE_MATCH}),n=Ee();return u.exports.useEffect(()=>{n.setValue("text","")},[e]),i(h,{sx:{py:2},children:p(xn,{component:"fieldset",children:[i(Te,{component:"legend",children:"Jenis quis"}),i(yn,{value:e,onChange:t,row:!0,name:"row-radio-buttons-group",children:pd.map(r=>i(_n,{value:r.value,control:i(vn,{}),label:r.label},r.value))})]})})},bi=({label:e,onlyUnique:t=!1})=>{const[n,{inline:r}]=T(),a=Y({name:"text"}),s=l=>{if(_t(l.key).isNumeric()){l.preventDefault();return}n&&r(!1),a.includes(l.key)&&(l.preventDefault(),r(!0))};let d={size:"small",fullWidth:!0,helperText:n?"Huruf telah di gunakan":"",error:n,name:"text"};return t&&(d.onKeyDown=s),i(h,{sx:{pr:2},children:i(G,x(g({name:"text"},d),{label:e}))})},gd=()=>i(I,{children:i(bi,{label:"Masukan huruf yang digunakan",onlyUnique:!0})}),md=()=>i(I,{children:i(bi,{label:"Masukan Kata yang di gunakan"})}),wi=u.exports.createContext(null),Ci=()=>u.exports.useContext(wi);class fd extends u.exports.Component{constructor(t){super(t);_(this,"fileRef");_(this,"handler",()=>{this.fileRef.current&&this.fileRef.current.click()});_(this,"getContext",()=>g({clickHandler:this.handler,reset:this.reset},this.state));_(this,"setFormValue",t=>{const{field:n}=this.props.controller;n.onChange(t)});_(this,"reset",()=>{const{field:t}=this.props.controller;t.onChange(void 0),this.setState({previewUrl:"",type:""})});_(this,"onChange",t=>{const n=t.target.files;if(n&&n.length){const r=n[0],a=URL.createObjectURL(r);this.setState({previewUrl:a,type:r.type},()=>{this.props.controller&&this.setFormValue(r)})}});var n;this.fileRef=u.exports.createRef(),this.state={previewUrl:(n=this.props.initialUrl)!=null?n:"",type:""}}render(){return p(wi.Provider,{value:this.getContext(),children:[this.props.children,i("input",{ref:this.fileRef,onChange:this.onChange,type:"file",accept:this.props.accept,style:{display:"none"}})]})}}const xd=r=>{var a=r,{children:e,name:t}=a,n=N(a,["children","name"]);const s=K({name:t});return i(fd,x(g({name:t},n),{controller:s,children:e}))},yd=()=>{const{previewUrl:e,reset:t,clickHandler:n}=Ci();return p(h,{sx:{position:"relative",backgroundColor:"black",display:"flex",justifyContent:"center"},children:[i(h,{component:"img",src:e,sx:{maxHeight:144,maxWidth:256}}),i(St,{title:"Ganti foto",children:i(xe,{color:"secondary",onClick:()=>{t(),n()},size:"small",style:{top:0,right:0,position:"absolute"},children:i(Ae,{})})})]})},_d=({label:e})=>{const{clickHandler:t,previewUrl:n}=Ci();return p(I,{children:[i(b,{fullWidth:!0,size:"small",variant:"contained",color:"primary",onClick:t,children:e}),i(h,{textAlign:"center",paddingY:2,children:n?i(yd,{}):null})]})},Ii=({name:e,label:t})=>i(xd,{accept:"image/*",name:e,children:i(_d,{label:t})}),vd=[{label:"Text",value:"text"},{label:"Gambar",value:"image"}],bd=()=>{Y({name:"multipleChoice.type",defaultValue:"text"});const{field:e}=K({name:"multipleChoice.type",defaultValue:"text"});return p(xn,{component:"fieldset",children:[i(Te,{component:"legend",children:"Jenis pilihan ganda"}),i(yn,x(g({},e),{row:!0,children:vd.map(t=>i(_n,{value:t.value,control:i(vn,{}),label:t.label},t.value))}))]})},wd={init:{y:"-350%",opacity:0},exit:{y:"350%",opacity:0},animate:{y:0,opacity:1}},Cd=s=>{var d=s,{index:e,delay:t,value:n,type:r}=d,a=N(d,["index","delay","value","type"]);const l=`multipleChoice.options.[${e}].content`,c=`Opsi ${me[e]}`;return i(re.div,{style:{overflowX:"hidden"},transition:{y:{delay:t,type:"tween"},opacity:{delay:t}},variants:wd,animate:"animate",initial:"init",exit:"exit",children:i(h,{sx:{my:2,pr:2},children:r==="image"?p(I,{children:[i(y,{children:c}),i(Ii,{name:l,label:"Pilih gambar"})]}):i(G,{size:"small",label:c,fullWidth:!0,name:`multipleChoice.options.[${e}].content`})})})},Id=()=>{const{field:e}=K({name:"multipleChoice.answer",defaultValue:0});return i(li,x(g({noUseForm:!0},e),{label:"Opsi jawaban yang benar",size:"small",sx:{my:2,pr:2},options:me.map((t,n)=>({value:n+1,label:`Opsi ${t}`}))}))},Sd=()=>{const e=Y({name:"multipleChoice.type",defaultValue:"text"});K({name:"multipleChoice.additionalFile",defaultValue:""});const t=Ee();return u.exports.useEffect(()=>{me.forEach((n,r)=>{const a=`multipleChoice.options.[${r}].content`;t.setValue(a,"")})},[e]),p("div",{style:{overflow:"hidden"},children:[p(h,{sx:{pr:2,mb:2},children:[i(G,{sx:{my:2},label:"Masukan pertanyaan quis",name:"multipleChoice.question",size:"small",fullWidth:!0}),i(Ii,{name:"multipleChoice.additionalFile",label:"Upload foto soal tambahan"})]}),i("div",{children:i(bd,{})}),p("div",{children:[i(h,{children:i($e,{exitBeforeEnter:!0,children:me.map((n,r)=>u.exports.createElement(Cd,x(g({},n),{type:e,index:r,width:e==="image"?"100%":"50%",key:`${n}-${e}`,delay:(r+1)*.1,label:me[r]})))})}),i(Id,{})]})]})},Si=u.exports.createContext(null),Pe=()=>u.exports.useContext(Si),Ht=n=>{var r=n,{children:e}=r,t=N(r,["children"]);const{show:a,handleClose:s}=t,d=u.exports.useRef(null),[l,c]=u.exports.useState({height:0,width:0});return u.exports.useEffect(()=>{if(d.current&&a){const m=d.current;c({height:window.innerHeight-m.clientHeight,width:"100vw"})}},[a,d]),p(Gr,{keepMounted:!0,open:a,anchor:"bottom",sx:{zIndex:1e3*1e3},PaperProps:{sx:{minHeight:"100vh",width:"100vw"}},onClose:()=>s(!1),children:[i(De,{color:"transparent",variant:"outlined",elevation:0,ref:d,sx:{position:"static"},children:i(Me,{children:i(b,{onClick:()=>s(!1),children:"Tutup"})})}),i(Si.Provider,{value:x(g({},l),{show:a,handleClose:s}),children:i(h,{sx:x(g({},l),{overflow:"hidden"}),children:l.height?e:i("p",{children:"lol"})})})]})},Pi=[];Object.keys(Pt).forEach(e=>{e!=="transparent"&&Object.keys(Pt[e]).forEach(t=>{Pi.push(Pt[e][t])})});const $i=Pi,ki=e=>{const t=bn.random.arrayElement($i);return Ge.exports.find(e,t)?ki(e):t},Pd=(e,t,n)=>({id:`rect-${e}-node`,text:t,bg:ki(n)});function $d({stage:e,text:t}){return(n,r)=>{if(!e)return[0,0];const s=(e.width()-t.length)/t.length;return{x:r?s*r:0,y:0,width:s,height:s/2}}}const kd=(e,t)=>new Vr.Arrow({stroke:e,strokeWidth:5,globalCompositeOperation:"source-over",points:t}),qd=e=>[e.getClientRect().x+e.getClientRect().width/2,e.height()];function Dd({x:e,y:t},n){const r=n.y(),a=n.x()+n.width(),s=n.x(),d=n.y()+n.width(),l=e>=s&&e<=a,c=t>=r&&t<=d;return l&&c}const Md=(e,t,n)=>{const{bgColor:r}=n,a=[...qd(e),t.x,t.y];return kd(r,a)},Ed=(e,t="text")=>e==null?void 0:e.find("Group").toArray().filter(n=>n.getAttr("data-role")===t),zd=({index:e,stage:t,nodes:n,layer:r})=>a=>{if(n[e].hasArrow)return new Promise(w=>w({nodes:n,arrow:null}));const d=a.currentTarget,l=t.getPointerPosition(),m=n[e].bg,f=Md(a.target,l,{bgColor:m});f.setAttr("data-from",d.getAttr("data-letter"));const v=(w,D)=>{w.points(D),r.batchDraw()};return r.add(f),new Promise(w=>{t.on("mouseup touchend",()=>{const S=Ed(t,"image").find(V=>Dd(t.getPointerPosition(),V));let M=null;if(S){const V=S.x()+S.width()/2;f.points()[0],f.points()[1],S.y(),M={points:[f.points()[0],f.points()[1],S.x()+S.width()/2,S.y()],from:f.getAttr("data-from"),to:S.getAttr("data-letter"),bg:f.stroke(),arrowIndex:e,fromId:d.getAttr("id"),toId:S.getAttr("id")},n[e].hasArrow=!0}w({arrow:M,nodes:n}),f.remove(),r.batchDraw(),t.off("mouseup touchend mousemove touchmove")}),t.on("mousemove touchmove",()=>{const D=t.getPointerPosition();D&&v(f,[f.points()[0],f.points()[1],D.x,D.y])})})},Bt=u.exports.createContext(null);function Qt(){return u.exports.useContext(Bt)}const Rt=u.exports.createContext(null);function Ot(){return u.exports.useContext(Rt)}const Ad=({x:e,y:t,bg:n,text:r,width:a,height:s,pos:d,index:l,hasArrow:c})=>{const m=qe(),{stage:f}=Qt(),{arrows:v}=Ot(),w=f.current.height(),{mouseHandler:D}=Ot(),S=D(l),M=d==="start"?"text":"image",V="/letters/"+r.toLocaleLowerCase()+"0.png",[R]=wn(V),ie=`item-${M}-${l}`,mt=v.find(Fi=>Fi.toId===ie),Li=()=>mt||M==="text"?mt?mt.bg:n:m.palette.grey["200"];return p(Cn,{id:`item-${M}-${l}`,"data-letter":r,"data-role":M,height:s,width:a,onTouchStart:M==="image"?void 0:S,onDragStart:M==="image"?void 0:S,onMouseDown:M==="image"?void 0:S,x:e,y:d==="start"?0:w-(s+20),children:[i(In,{height:s,width:a,fill:Li()}),M==="image"?i(Sn,{height:s,width:a,image:R}):i(Pn,{text:r,fill:"white",height:s,fontSize:s,width:a,align:"center"})]})},qi=({pos:e="start",items:t})=>i(I,{children:t.map((n,r)=>u.exports.createElement(Ad,x(g({},n),{index:r,key:n.id,pos:e})))}),Td=({arrows:e,showHint:t})=>{let n=e;const{stage:{current:r}}=Qt();if(t&&r){const a=r.find("Group").toArray().filter(d=>d.getAttr("data-role")==="text"),s=r.find("Group").toArray().filter(d=>d.getAttr("data-role")==="image");n=n.map(d=>{const l=a.find(m=>m.id()===d.fromId),c=s.find(m=>m.id()===d.toId);return x(g({},d),{points:[l.x()+l.width()/2,l.y()+l.height(),c.x()+c.width()/2,c.y()]})})}return i(I,{children:n.map((a,s)=>i(Lr,{points:a.points,stroke:a.bg},s))})},Gd=()=>{const{popArrow:e,arrows:t,toggleHint:n}=Ot();return p(Me,{children:[i(y,{sx:{mr:"auto"},children:"Samakan huruf & gambar berikut sesuai hurufnya"}),i(b,{onClick:e,disabled:t.length===0,size:"small",variant:"outlined",sx:{textTransform:"none"},startIcon:i(bt,{}),children:"Batalkan pilihan"}),i(b,{onClick:n,size:"small",variant:"outlined",sx:{textTransform:"none"},children:"Show hint"})]})};class Vd extends u.exports.Component{constructor(t){super(t);_(this,"stage");_(this,"layer");_(this,"headerRef");_(this,"getNodes",(t=!0)=>{const{text:n}=this.props,r=this.stage.current,a=n.split(" ").join("").split("").filter(c=>c!==" "),s=[],d=[],l=$d({stage:r,text:a.join("")});return(t?Ge.exports.shuffle(a):a).forEach((c,m)=>{const f=Pd(m,c,d);s.push(x(g(g({},f),l("",m)),{hasArrow:!1})),d.push(f.bg)}),s});_(this,"prepareNodes",()=>{const t=this.getNodes(!1),n=this.getNodes(!0).map((r,a)=>x(g({},r),{bg:t[a].bg}));this.setState({nodes:t,shufledNodes:n})});_(this,"getArrows",()=>this.state.showHint?this.state.nodes.map((t,n)=>{const r=this.state.shufledNodes.findIndex(s=>s.text===t.text),a=this.state.shufledNodes[r];return{toId:`item-image-${r}`,fromId:`item-text-${n}`,bg:t.bg,to:t.text,from:t.text,arrowIndex:n,points:[a.x+t.width/2,t.height,a.x+a.width/2,this.stage.current.height()-t.height]}}):this.state.arrows);_(this,"componentDidMount",()=>{this.prepareNodes()});_(this,"componentDidUpdate",(t,n,r)=>{t.text!==this.props.text&&this.prepareNodes()});_(this,"mouseHandler",t=>n=>zd({index:t,stage:this.stage.current,layer:this.layer.current,nodes:this.state.nodes})(n).then(a=>{a.arrow&&this.setState(s=>(a.arrow&&s.arrows.push(a.arrow),x(g({},s),{nodes:a.nodes})))}));_(this,"getStageHeight",()=>this.headerRef.current?this.props.stageHeight-this.headerRef.current.clientHeight:0);_(this,"popArrow",()=>{this.setState(t=>{const n=t.arrows.pop();return n&&(t.nodes[n.arrowIndex].hasArrow=!1),g({},t)})});_(this,"toggleHint",()=>{this.setState({showHint:!this.state.showHint})});_(this,"getContextValues",()=>({mouseHandler:this.mouseHandler,arrows:this.getArrows(),popArrow:this.popArrow,nodes:this.state.nodes,toggleHint:this.toggleHint}));this.state={nodes:[],shufledNodes:[],showHint:!1,arrows:[]},this.stage=u.exports.createRef(),this.layer=u.exports.createRef(),this.headerRef=u.exports.createRef()}render(){return p(Rt.Provider,{value:this.getContextValues(),children:[i(De,{color:"transparent",position:"static",ref:this.headerRef,children:i(Gd,{})}),i($n,{ref:this.stage,width:window.innerWidth,height:this.getStageHeight(),children:i(kn,{ref:this.layer,children:i(Bt.Provider,{value:{stage:this.stage,layer:this.layer},children:p(Rt.Provider,{value:this.getContextValues(),children:[i(qi,{items:this.state.nodes}),i(qi,{pos:"end",items:this.state.shufledNodes}),i(Td,{showHint:this.state.showHint,arrows:this.getArrows()})]})})})})]})}}const Ld=({text:e})=>{const{height:t,width:n}=Pe();return i(I,{children:i(Vd,{text:e,stageHeight:t})})};function Fd(e){const[t,n]=u.exports.useState(-1),[r,{inline:a}]=T(),{show:s}=Pe();return u.exports.useEffect(()=>{n(-1),a(!1)},[s]),{isSubmitted:r,isTouched:t!==-1,changeAnswer:c=>{r||n(c)},onSubmitted:()=>{t!==-1&&a(!0)},selected:t,isAnswerCorrect:r&&t===e.answer-1}}const Di=u.exports.createContext(null);function Wt(){return u.exports.useContext(Di)}const Ud=["A","B","C","D"],Nd=({index:e,content:t})=>{const{selected:n,changeAnswer:r}=Wt();return console.log(t),p(h,{role:"button",onClick:()=>r(e),className:"item","data-selected":n===e,children:[i(h,{sx:{height:100,width:"100%",backgroundImage:`url(${t})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),i(y,{align:"center",variant:"h2",children:Ud[e]})]})},Hd=["A","B","C","D"],Bd=({index:e,content:t})=>{const{selected:n,changeAnswer:r}=Wt();return p("div",{role:"button",onClick:()=>r(e),className:"item","data-selected":n===e,children:[p(y,{variant:"subtitle2",sx:{fontWeight:"bolder"},children:["Opsi ",Hd[e]]}),i(y,{variant:"subtitle1",children:t})]})},Qd=()=>{const{selected:e,onSubmitted:t,isSubmitted:n,isAnswerCorrect:r}=Wt(),{handleClose:a}=Pe();return p(h,{sx:{display:"flex",alignItems:"center",width:"90%"},children:[i(y,{sx:{color:r?"success.main":n?"error,main":"inherit"},children:n?r?"Jawaban anda benar":"Maaf jawaban anda kurang tepat":"Klik kunci jawaban untuk melihat hasil jawaban anda"}),i(b,{onClick:n?()=>a(!1):t,disabled:e===-1,sx:{textTransform:"none",ml:"auto"},children:n?"Tutup":"Kunci jawaban"})]})},Rd={display:"flex",width:"100%","& > div":{width:["100%","50%"],display:"flex",alignItems:"center",justifyContent:"center"}},Od={display:"flex",flexWrap:"wrap",width:"90%","& > .item":{cursor:"pointer",transition:"all ease .2s",background:"white",width:"50%",p:2,zIndex:1,"&[data-selected='true']":{boxShadow:3,zIndex:2,bgcolor:"primary.main",color:"white"},"&:hover":{bgcolor:"primary.main",color:"white"}}},Wd={text:Bd,image:Nd},Jd=e=>{const t=Wd[e.type];return i(t,g({},e))},jd=e=>{const t=Pe(),{question:n,image:r,options:a,answer:s}=e,d=Fd(e);return i(Di.Provider,{value:d,children:p(h,{sx:x(g({},Rd),{height:t.height,width:t.width}),children:[i("div",{children:p(h,{sx:{width:"100%",textAlign:"center"},children:[r?i(h,{component:"img",src:r,sx:{maxHeight:256}}):null,i(y,{children:n})]})}),i("div",{children:p(h,{sx:{width:"100%"},children:[p(h,{children:[i(y,{variant:"h5",sx:{mb:2},children:"Pilih jawaban anda :"}),i(h,{sx:Od,children:a.map((l,c)=>i(Jd,g({index:c},l),c))})]}),i(Qd,{})]})})]})})},Kd=(e,t)=>t.find("Group").toArray().filter(n=>n.getAttr("id")!==e.getAttr("id"));function Yd(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}function Xd({stage:e,target:t,swap:n,original:r}){return a=>{const s=a.target,l=Kd(s,e).findIndex(c=>Yd(s.getClientRect(),c.getClientRect()));console.log(l===-1),l!==-1?n(t,l):(console.log("go original"),s.setPosition({x:r.x,y:r.y}))}}function Zd({stage:e,text:t}){return(n,r)=>{if(!e)return[0,0];const a=e.height(),s=e.height()/t.length,l=a/2-s/2,c=e.width(),m=(s+30)*t.length,f=(c-m)/2;return{x:r?r*(s+30)+f:f,y:l,width:s,height:s}}}const Jt=u.exports.createContext(null);function Mi(){return u.exports.useContext(Jt)}const eu=({index:e,text:t})=>{const{stage:n}=Qt(),{getNodeState:r,swap:a,mode:s}=Mi(),[d]=r(e),l="/letters/"+t.toLocaleLowerCase()+"0.png",c=qe(),m=u.exports.useRef(null),[f]=wn(l);u.exports.useEffect(()=>{m.current&&m.current.to({x:d.x,y:d.y,duration:.2})},[m.current,d]);const v=Xd({stage:n.current,target:e,original:d,swap:a});return p(Cn,x(g({},d),{id:d.id,ref:m,onDragEnd:v,draggable:!0,children:[i(In,{width:d.width,height:d.height,cornerRadius:12,strokeWidth:1,stroke:c.palette.primary.main}),s==="image"?i(Sn,{image:f,height:d.height,width:d.width}):i(Pn,{fill:"black",fontSize:d.height-10,align:"center",width:d.width,text:t})]}))},tu=()=>{const{height:e}=Pe(),{text:t,toggleHint:n,toggleMode:r,nodes:a}=Mi(),s=window.innerHeight-e;return i(De,{elevation:0,variant:"outlined",color:"transparent",sx:{position:"fixed",top:s,width:"100%",height:"fit-content",p:1},children:p(h,{sx:{display:"flex"},children:[p(y,{variant:"h6",children:['Susunlah kata "',t,'" dengan menggunakan bisindo']}),p(h,{sx:{ml:"auto"},children:[i(b,{onClick:r,sx:{textTransform:"none"},variant:"outlined",children:"Mode"}),i(b,{onClick:n,sx:{textTransform:"none"},variant:"outlined",children:"Kunci jawaban"}),i(b,{onClick:()=>{const l=Ge.exports.sortBy(a,"x").map(c=>c.text);console.log("Answer:",l.join(""))},sx:{textTransform:"none"},variant:"outlined",children:"Periksa jawaban"})]})]})})},Ei=e=>{const t=bn.random.arrayElement($i);return Ge.exports.find(e,t)?Ei(e):t},nu=(e,t,n)=>({id:`rect-${e}-node`,text:t,bg:Ei(n)});class iu extends u.exports.Component{constructor(t){super(t);_(this,"stage");_(this,"layer");_(this,"toggleMode",()=>this.setState(x(g({},this.state),{mode:this.state.mode==="letter"?"image":"letter"})));_(this,"toggleHint",()=>this.setState(x(g({},this.state),{showHint:!this.state.showHint})));_(this,"getNodes",(t=!0)=>{const{text:n}=this.props,r=this.stage.current,a=n.split(" ").join("").split("").filter(c=>c!==" "),s=[],d=[],l=Zd({stage:r,text:a.join("")});return(t?Ge.exports.shuffle(a):a).forEach((c,m)=>{const f=nu(m,c,d);s.push(g(g({},f),l("",m))),d.push(f.bg)}),s});_(this,"prepareNodes",()=>{this.setState({nodes:[...this.getNodes()]})});_(this,"getItems",()=>this.state.showHint?this.getNodes(!1):this.state.nodes);_(this,"componentDidMount",()=>{this.prepareNodes()});_(this,"componentDidUpdate",(t,n,r)=>{t.text!==this.props.text&&this.prepareNodes()});_(this,"swap",(t,n)=>{const r=[...this.state.nodes],a=r[t],s=r[n];r[n]=x(g({},s),{y:a.y,x:a.x}),r[t]=x(g({},r[t]),{x:s.x,y:s.y}),this.setState({nodes:[...r]})});_(this,"getNodeState",t=>{const{nodes:n}=this.state,r=a=>{this.state;const s=[...this.state.nodes],d=s[t];s[t]=g(g({},d),a),this.setState({nodes:[...s]})};return[n[t],r]});_(this,"getContextValues",()=>({nodes:this.state.nodes,text:this.props.text,swap:this.swap,getNodeState:this.getNodeState,toggleHint:this.toggleHint,toggleMode:this.toggleMode,mode:this.state.mode}));this.state={nodes:[],mode:"image",showHint:!1},this.stage=u.exports.createRef(),this.layer=u.exports.createRef()}render(){return p(Jt.Provider,{value:this.getContextValues(),children:[i($n,{height:this.props.height,width:window.innerWidth,ref:this.stage,children:i(kn,{ref:this.layer,children:i(Bt.Provider,{value:{stage:this.stage,layer:this.layer},children:i(Jt.Provider,{value:this.getContextValues(),children:this.getItems().map((t,n)=>i(eu,g({index:n},t),t.id))})})})}),i(tu,{})]})}}const ru=({text:e})=>{const{height:t,width:n}=Pe();return i(iu,{width:n,height:t,text:e})},ou={LETTER_SEQUENCE:ru,MULTIPLE_CHOICE:jd,IMAGE_MATCH:Ld},jt=({type:e,viewerProps:t})=>{var r;const n=(r=ou[e])!=null?r:u.exports.Fragment;return i(n,g({},t))};function Kt(e,t){return e==="MULTIPLE_CHOICE"?{question:t.question,answer:t.answer,image:t.additionalFile&&t.additionalFile instanceof File?URL.createObjectURL(t.additionalFile):typeof t.additionalFile=="string"?t.additionalFile:"",options:t.options.map(n=>({content:n.content instanceof File?URL.createObjectURL(n.content):n.content,type:t.type}))}:{text:t.text}}const au={answer:0,type:"text",question:"",additionalFile:null},su=({onSubmit:e,loading:t})=>{const n=Y({name:"multipleChoice",defaultValue:au}),r=Y({name:"text",defaultValue:""}),a=Y({name:"multipleChoice.options",defaultValue:[]}),s=_i(),l={disabled:(()=>{if(s==="MULTIPLE_CHOICE"){const v=a.find(w=>!w.content);return Boolean(v)||!n.question}else return!Boolean(r)})(),sx:{my:2},variant:"outlined"},c=Kt(s,x(g({},n),{text:r,options:a})),[m,{inline:f}]=T();return p(I,{children:[i(Ht,{show:m,handleClose:f,children:i(jt,{type:s,viewerProps:c})}),p(qn,{sx:{"& > button":{textTransform:"none"}},fullWidth:!0,children:[i(b,x(g({onClick:()=>f(!0)},l),{children:"Tampilkan quis"})),i(b,x(g({},l),{disabled:l.disabled||t,onClick:e,startIcon:t?i(ce,{size:16}):void 0,children:"Simpan"}))]})]})},du={LETTER_SEQUENCE:md,IMAGE_MATCH:gd,MULTIPLE_CHOICE:Sd},uu={animate:{y:0,opacity:1},initial:{y:"-200%",opacity:0},exit:{y:"200%",opacity:0}},lu=()=>{const e=_i(),t=du[e];return i($e,{exitBeforeEnter:!0,children:i(re.div,x(g({},uu),{children:i(t,{})}),e)})},cu={LETTER_SEQUENCE:P.mutateLetterSequenceQuiz,IMAGE_MATCH:P.mutateImageMatchQuiz,MULTIPLE_CHOICE:P.mutateMultipleChoiseQuiz},pu=C(e=>{const t=ld(e),n=ke();Y({control:n.control,defaultValue:z.IMAGE_MATCH,name:"type"});const r=c=>{if("multipleChoice"in c){const m=c,{multipleChoice:f}=m,v=N(m,["multipleChoice"]);return x(g(g({},c),f),{options:c.multipleChoice.options.map(({content:w},D)=>{const S=w instanceof File?"image":"text";return{index:D,[S]:w}})})}return c},[{loading:a,response:s},d]=He({api:cu[n.getValues("type")],parser:r,merge:{videoId:e.video.id}}),l=n.handleSubmit(d);return u.exports.useEffect(()=>{s&&e.onSuccess()},[s]),i(oe,x(g({},n),{children:p(yi.Provider,{value:t,children:[i(su,{onSubmit:l,loading:a}),p(h,{sx:{display:"flex","& > div":{width:"50%"},overflow:"hidden",minHeight:"70vh"},children:[p("div",{children:[i(hd,{}),i(lu,{})]}),i("div",{children:i(cd,{})})]})]})}))}),zi={selected:null,action:null};function hu(){const[e,t]=u.exports.useState(zi),n=a=>()=>t({selected:a,action:"quiz"}),r=a=>()=>t({selected:a,action:"delete"});return x(g({},e),{onDeleteSelected:r,handleSelected:n,handleClose:()=>t(zi)})}const Ai=u.exports.createContext(null);function Yt(){return u.exports.useContext(Ai)}const gu={[z.MULTIPLE_CHOICE]:"Pilihan ganda",[z.IMAGE_MATCH]:"Pencocokan gambar",[z.LETTER_SEQUENCE]:"Pengurutan gambar"},mu=()=>{const{initialFetch:e,result:t,isEmpty:n}=U();u.exports.useEffect(()=>{e()},[]);const{handleSelected:r,onDeleteSelected:a}=Yt();return p("div",{children:[n?i(y,{sx:{my:3},align:"center",variant:"h4",children:"Video ini tidak memiliki quis"}):null,i(h,{sx:{display:"flex",flexWrap:"wrap"},children:t.data.map((s,d)=>i(h,{sx:{width:["100%","33.25%"]},children:i(h,{sx:{p:1},children:p(F,{sx:{p:1},children:[p(y,{variant:"caption",children:["Quiz ",d+1]}),p(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{variant:"subtitle2",children:gu[s.type]}),p(y,{variant:"subtitle2",children:["Ditampilkan pada : ",s.durationText]})]}),p(qn,{fullWidth:!0,size:"small",children:[i(b,{onClick:r(s),sx:{textTransform:"none"},size:"small",variant:"outlined",fullWidth:!0,children:"Simulasi quis"}),i(b,{onClick:a(s),sx:{textTransform:"none"},size:"small",variant:"outlined",fullWidth:!0,color:"error",children:"Hapus"})]})]})})},s.id))})]})},fu=C(()=>i(I,{children:i(mu,{})})),xu=()=>{const{handleSelected:e,selected:t,handleClose:n,action:r}=Yt(),a=t?Kt(t.type,{text:t.image_matcher,question:t.question,answer:t.questionAnswer,options:t.choises,additionalFile:t.additional_image,type:"text"}):{};return i(Ht,{show:Boolean(t&&r==="quiz"),handleClose:n,children:t?i(jt,{type:t.type,viewerProps:a}):null})},yu=()=>{const{selected:e,action:t,handleClose:n}=Yt(),{store:r}=E(),[a,{inline:s}]=T(),{initialFetch:d}=U(),{enqueueSnackbar:l}=ae(),c=()=>{e&&(s(!0),r.mutateQuizDelete({id:e.id}).then(()=>{s(!1),d(),l("Quiz berhasil di hapus",{variant:"success"}),n()}))};return p(Ye,{onClose:n,open:Boolean(e&&t==="delete"),children:[i(Ct,{children:i(y,{children:"Apakah anda yakin untuk menghapus ?"})}),p(gn,{sx:{"& > button":{textTransform:"none"}},children:[i(b,{onClick:n,children:"Batal"}),i(b,{disabled:a,onClick:c,color:"error",children:"Hapus"})]})]})},_u=()=>{const e=hu(),{video:t}=Oe(),{initialFetch:n}=U(),[r,{toggle:a,force:s}]=T(),{enqueueSnackbar:d}=ae(),l=()=>{n(),s(!1)(),d("Quis baru berhasil di tambahkan",{variant:"success"})};return p(Ai.Provider,{value:e,children:[p(h,{sx:{minHeight:"110vh"},children:[p(F,{sx:{p:2,m:1},children:[i(b,{sx:{textTransform:"none"},onClick:a,children:r?"Tutup":"Tambah quis baru"}),i(ze,{in:r,timeout:"auto",mountOnEnter:!0,children:i(pu,{onSuccess:l,video:t})})]}),i(fu,{})]}),i(xu,{}),i(yu,{})]})},vu=Nt(()=>{const{video:e}=Oe();return T(),i(ut,{dataKey:"quizByVideo",includes:{videoId:e.id},children:i(_u,{})})}),bu=C(()=>{const{form:e,loading:t,handler:n,response:r}=Be(),{video:a}=Oe(),{enqueueSnackbar:s,closeSnackbar:d}=ae(),l=H();u.exports.useEffect(()=>{r&&(s("Video berhasil di update",{variant:"success"}),l(`/admin/video/${a.id}/info`))},[r]);const[c,{inline:m}]=T();return u.exports.useEffect(()=>{d(),e.setValue("title",a==null?void 0:a.title),e.setValue("caption",a==null?void 0:a.caption),e.setValue("description",a==null?void 0:a.description),m(!0)},[]),c?i(oe,x(g({},e),{children:p(F,{component:"form",onSubmit:n,sx:{p:2,my:3},children:[p(h,{sx:{display:"flex","& > div":{width:"50%",p:1}},children:[i("div",{children:i(G,{fullWidth:!0,name:"title",label:"Judul video"})}),i("div",{children:i(G,{fullWidth:!0,name:"caption",label:"Caption video"})})]}),p(h,{sx:{my:2,p:1},children:[i(Te,{children:"Deskripsi video"}),i(Ft,{name:"description"})]}),i(ue,{variant:"outlined",fullWidth:!0,icon:i(Ke,{}),loading:t,children:"Simpan"})]})})):i(I,{})}),wu=e=>(e.description=JSON.stringify(e.description),g({},e)),Cu=Nt(()=>{const{video:e}=Oe();return i(Qe,{parser:wu,mutateKey:"editVideo",merge:{id:e==null?void 0:e.id},children:i(bu,{})})}),Iu=()=>{Gt([]);const{gradeInfo:e}=at();return p(L,{children:[i(gi,{gradeId:e.studentGrade.grade.id}),";"]})},Su={component:Iu,icon:u.exports.Fragment,path:"/discussion",name:"discussion",key:"discussion"},Pu=C(({model:e})=>{const t=qe(),[n,{force:r}]=T(),{progressInfo:{getPlaying:a},videoList:{getPlayingPercentage:s}}=at(),d=s(e.id,a(e.id)),l=H();return i(h,{sx:{position:"relative"},children:p(h,{onClick:()=>{l(`/video/${e.id}`)},onMouseEnter:r(!0),onMouseLeave:r(!1),component:re.div,animate:{boxShadow:n?t.shadows[10]:t.shadows[1]},sx:{borderRadius:1,cursor:"pointer"},children:[i(h,{sx:{width:"100%",borderRadius:1},component:"img",src:e.thumbnail,alt:""}),p(h,{sx:{p:2},children:[i(y,{sx:{color:m=>m.palette.grey["800"],fontWeight:"bolder"},variant:"subtitle1",children:e.title}),p(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{sx:{textAlign:"left"},variant:"caption",children:"Progress anda"}),i(y,{sx:{textAlign:"left"},variant:"caption",children:d?`${d}%`:""})]}),i(Fr,{value:d,variant:"determinate"}),p(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{sx:{textAlign:"left"},variant:"caption",children:"Quis"}),p(y,{sx:{textAlign:"left"},variant:"caption",children:["0 /",e.quiz_count]})]})]})]})})}),Ti=({width:e="50%"})=>{const{videoList:{videos:t}}=at();return p(h,{children:[i(y,{sx:{color:n=>n.palette.grey["700"]},variant:"h4",children:"Video pembelajaran"}),i(h,{sx:{display:["block","flex"],flexWrap:"wrap","& > div":{width:["100%",e],p:1}},children:t.map(n=>i(Pu,{model:n},n.id))})]})},$u=()=>{Gt([]);const{gradeInfo:{studentGrade:e}}=at();return console.log(e),p(L,{sx:{py:2,display:"flex",flexWrap:"wrap"},children:[p(h,{sx:{width:["100%","30%"],p:2},children:[i(y,{variant:"h6",sx:{fontWeight:"lighter"},children:"Kelas / batch"}),i(B,{}),i(y,{sx:{color:t=>t.palette.grey["700"]},variant:"h4",children:e.grade.name})]}),i(h,{sx:{width:["100%","70%"]},children:i(Ti,{})})]})},ku={path:"/",component:$u,icon:u.exports.Fragment,name:"progress",key:"progress"},qu=()=>(Gt([]),i("div",{children:"video page"})),Du={component:qu,name:"videos",path:"/videos",icon:u.exports.Fragment,key:"videos"},Mu=e=>e.content.id.title.thumbnail.caption.quiz_count.quizes(t=>t.id.type.choises(n=>n.id.text.image.index).image_matcher.additional_image.questionAnswer.question.show_at),Eu=e=>{const[t,n]=u.exports.useState(null),r=()=>n(null),a=s=>()=>n(s);return E(s=>s.queryQuizAnswers()),{show:Boolean(t),handleClose:r,handleOpen:a,selected:t}};function zu(){const e=Xe(),{loading:t,data:n}=E(a=>a.queryVideo({id:e.id},Mu)),r=Eu(n&&n.video?n.video.quizes:[]);return{video:n&&n.video?n.video:null,loading:t,showLoading:!n||!n.video,quiz:r}}const Gi=u.exports.createContext(null);function We(){return u.exports.useContext(Gi)}const Au=()=>{const{video:e}=We();return i("div",{children:i(Re,{url:e.content})})},Tu=()=>{const{video:e,quiz:{handleOpen:t}}=We(),n=e.quizes;return p(h,{sx:{pb:2},children:[i(B,{}),n.map((r,a)=>p(b,{onClick:t(r),sx:{textTransform:"none"},children:["Quis ",a+1]},r.id)),i(B,{})]})},Gu=()=>{const{quiz:{show:e,handleClose:t,selected:n}}=We(),r=n?Kt(n.type,{text:n.image_matcher,question:n.question,answer:n.questionAnswer,options:n.choises,additionalFile:n.additional_image,type:"text"}):{};return i(Ht,{show:e,handleClose:t,children:n?i(jt,{type:n.type,viewerProps:r}):null})},Vu=()=>{const{video:e}=We();return p("div",{children:[i(y,{sx:{color:t=>t.palette.grey["700"]},variant:"h3",children:e==null?void 0:e.title}),i(y,{sx:{color:t=>t.palette.grey["700"]},variant:"subtitle1",children:e==null?void 0:e.caption})]})},Lu=()=>{const{video:e}=We();return p(h,{sx:{pt:2,mb:1},children:[i(y,{variant:"subtitle1",sx:{fontWeight:"bolder"},children:"Deskripsi video"}),i(h,{sx:{borderRadius:2,p:1,border:"solid 1px",borderColor:t=>t.palette.grey.A400},children:i(gt,{data:e.description})})]})},Fu=C(()=>{const{updateNavs:e}=te();u.exports.useEffect(()=>{e([])},[]);const t=zu(),n=H();return t.showLoading?i(st,{}):i(L,{children:p(Gi.Provider,{value:t,children:[i(b,{onClick:()=>n("/"),size:"small",variant:"outlined",sx:{my:1},startIcon:i(bt,{}),children:"Kembali ke dashboard"}),i(Vu,{}),i(Tu,{}),i(Gu,{}),i(Au,{}),i(Lu,{}),i(h,{sx:{mb:3},children:i(Ti,{width:"33%"})})]})})}),Uu={component:Fu,path:"/video/:id",name:"video-student",icon:u.exports.Fragment,key:"video-student"},Nu=!0,Hu=[{path:"classroom/:slug/:id",component:as,groups:[{path:"videos",component:vs,name:"batch-show-video"},{path:"add-video",component:Gs,name:"batch-show-add-vide"},{path:"students",component:Ns,name:"batch-show-student"},{path:"quiz-check",component:Hs,name:"batch-show-quiz-check"},{path:"discussion",component:ad,name:"batch-show-discussion"}],key:"classroom-show",icon:u.exports.Fragment,name:"classroom show"},{path:"classroom",component:os,name:"menagement batch",key:"batch-index",icon:Ur},{path:"admin/video/:id",component:ss,name:"admin-video-page",key:"admin-video-page",icon:u.exports.Fragment,hideInMenu:Nu,groups:[{path:"*",component:fi,name:"Informasi video"},{path:"info",component:fi,name:"Informasi video"},{path:"quiz",component:vu,name:"Quis"},{path:"edit",component:Cu,name:"Edit"}]}],Bu=[{path:"/login",component:Da,name:"login",key:"login",icon:u.exports.Fragment},{path:"/",component:()=>u.exports.createElement(Nr,{to:"/login"}),name:"login",key:"login",icon:u.exports.Fragment}],Qu=[ku,Du,Su,Uu],Ru=e=>{if(!e)return"/login";const{role:t}=e;return t===pe.ADMIN?"classroom":"/"},Ou=()=>{const e=r=>r?r.role===pe.ADMIN?Hu:Qu:Bu,t=zt(),n=u.exports.useCallback(async()=>{const r=await t.queryAuth().currentPromise();if(r.auth){const{auth:a}=r;return{id:a.id,name:a.name,email:a.email,role:a.role}}return null},[]);return p(Or,{getRoutes:e,authFunctions:n,children:[i(ga,{children:i(Ca,{children:i(Wr,{getFallback:Ru})})}),i(da,{})]})},Vi=document.getElementById("root");Vi&&Hr.exports.render(i(Br,{children:i(Qr,{anchorOrigin:{horizontal:"right",vertical:"top"},children:i(ra,{url:"/graphql",children:i(Ou,{})})})}),Vi);
