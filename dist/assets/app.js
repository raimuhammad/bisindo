var tr=Object.defineProperty,nr=Object.defineProperties;var ir=Object.getOwnPropertyDescriptors;var et=Object.getOwnPropertySymbols;var sn=Object.prototype.hasOwnProperty,dn=Object.prototype.propertyIsEnumerable;var _t=(e,t,n)=>t in e?tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))sn.call(t,n)&&_t(e,n,t[n]);if(et)for(var n of et(t))dn.call(t,n)&&_t(e,n,t[n]);return e},x=(e,t)=>nr(e,ir(t));var N=(e,t)=>{var n={};for(var r in e)sn.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&et)for(var r of et(e))t.indexOf(r)<0&&dn.call(e,r)&&(n[r]=e[r]);return n};var _=(e,t,n)=>(_t(e,typeof t!="symbol"?t+"":t,n),n);import{r as u,j as i,u as tt,A as le,m as G,R as rr,a as ln,M as or,t as o,Q as q,w as L,b as D,h as bt,c as ar,d as sr,e as dr,f as un,g as lr,o as wt,i as me,k as B,l as ur,L as cn,n as cr,p as Le,F as S,S as pr,q as hr,s as gr,V as mr,v as pn,x as Ge,y as hn,z as Ct,B as fr,C as Fe,D as C,E as R,G as c,H as xr,I as h,J as ne,T as y,K as yr,P as gn,N as we,O as mn,U as w,W as vr,X as F,Y as Ue,Z as _r,_ as St,$ as fn,a0 as nt,a1 as It,a2 as xn,a3 as He,a4 as ie,a5 as yn,a6 as K,a7 as Ne,a8 as br,a9 as U,aa as vn,ab as H,ac as Q,ad as Pt,ae as wr,af as it,ag as kt,ah as _n,ai as Cr,aj as Be,ak as rt,al as Sr,am as Ir,an as Ce,ao as bn,ap as ot,aq as O,ar as Pr,as as kr,at as $r,au as qr,av as wn,aw as Dr,ax as Er,ay as zr,az as Mr,aA as Ar,aB as Tr,aC as Vr,aD as Y,aE as Cn,aF as Lr,aG as Gr,aH as Fr,aI as Ur,aJ as $t,aK as Sn,aL as Re,aM as qt,aN as Hr,aO as Dt,aP as Nr,aQ as In,aR as Br,aS as Et,aT as Rr,aU as Pn,aV as kn,aW as $n,aX as re,aY as Qr,aZ as qn,a_ as Dn,a$ as En,b0 as zn,b1 as zt,b2 as Or,b3 as Mn,b4 as Qe,b5 as An,b6 as Tn,b7 as Vn,b8 as Ln,b9 as Gn,ba as Wr,bb as Mt,bc as Fn,bd as Un,be as Hn,bf as jr,bg as Jr,bh as Kr,bi as Yr,bj as Xr,bk as Zr,bl as eo,bm as to,bn as no,bo as io,bp as ro,bq as oo,br as ao}from"./vendor.3286ca82.js";const so=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}};so();const Nn=u.exports.createContext(null);function oe(){return u.exports.useContext(Nn)}class lo extends u.exports.Component{constructor(t){super(t);_(this,"setUser",t=>{this.setState(n=>x(g({},n),{user:t,routes:[...this.props.getRoutes(t)]}))});_(this,"getContext",()=>x(g({},this.state),{setUser:this.setUser}));this.state={routes:[],user:null,initilizing:!0}}componentDidMount(){const{authFunctions:t,getRoutes:n}=this.props;t().then(r=>{this.setState({initilizing:!1,routes:n(r),user:r})})}render(){return i(Nn.Provider,{value:this.getContext(),children:this.state.initilizing?"Initializing":this.props.children})}}const Bn=({children:e})=>{const{pathname:t}=tt();return i(le,{exitBeforeEnter:!0,children:i(G.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},transition:{opacity:{type:"tween"}},style:{minHeight:"100vh"},children:e},t)})},uo=({getFallback:e})=>{const{routes:t,user:n}=oe(),r=e(n);if(!t.find(s=>s.path.replaceAll("/*","")===r))throw new Error(`Path ${r} is not exist in routes`);return i(rr,{children:t.map(({path:s,component:d,groups:l})=>{const p=l!=null?l:[];return i(ln,{path:s,element:i(Bn,{children:i(d,{})}),children:p.map(({path:m,component:f})=>i(ln,{path:m,element:i(Bn,{children:i(f,{})})},m))},s)})})},E=or;var fe;(function(e){e.ADMIN="ADMIN",e.STUDENT="STUDENT"})(fe||(fe={}));const co=o.enumeration("AppRole",["ADMIN","STUDENT"]),po=E.named("User").props({__typename:o.optional(o.literal("User"),"User"),id:o.identifier,name:o.union(o.undefined,o.string),email:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),role:o.union(o.undefined,co),need_change_password:o.union(o.undefined,o.boolean),active:o.union(o.undefined,o.null,o.boolean)}).views(e=>({get store(){return e.__getStore()}}));class W extends q{get id(){return this.__attr("id")}get name(){return this.__attr("name")}get email(){return this.__attr("email")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get role(){return this.__attr("role")}get need_change_password(){return this.__attr("need_change_password")}get active(){return this.__attr("active")}}function ho(){return new W}const xe=ho().name.email.created_at.updated_at.role.need_change_password.active,Se=po.actions(e=>({log(){console.log(JSON.stringify(e))}})),go=L()(E.named("Progress").props({__typename:o.optional(o.literal("Progress"),"Progress"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,D(o.late(()=>Se))),video_histories:o.union(o.undefined,o.string),quiz_histories:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}})));class ue extends q{get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get video_histories(){return this.__attr("video_histories")}get quiz_histories(){return this.__attr("quiz_histories")}user(t){return this.__child("user",W,t)}}function mo(){return new ue}const Oe=mo().user_id.video_histories.quiz_histories,at=go.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get videoHistories(){return e.video_histories?JSON.parse(e.video_histories):[]},get quizHistories(){return e.quiz_histories?JSON.parse(e.quiz_histories):[]}})),fo=L()(E.named("StudentGrade").props({__typename:o.optional(o.literal("StudentGrade"),"StudentGrade"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),student:o.union(o.undefined,o.null,D(o.late(()=>Se))),grade:o.union(o.undefined,o.null,D(o.late(()=>je))),progress:o.union(o.undefined,D(o.late(()=>at)))}).views(e=>({get store(){return e.__getStore()}})));class st extends q{get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}student(t){return this.__child("student",W,t)}grade(t){return this.__child("grade",ce,t)}progress(t){return this.__child("progress",ue,t)}}function xo(){return new st}const yo=xo().created_at.updated_at,dt=fo.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get studentName(){return e.student?e.student.name:""},get gradeName(){return e.grade?e.grade.name:""}})),vo=L()(E.named("Grade").props({__typename:o.optional(o.literal("Grade"),"Grade"),id:o.identifier,student_count:o.union(o.undefined,o.integer),video_count:o.union(o.undefined,o.integer),name:o.union(o.undefined,o.string),students:o.union(o.undefined,o.array(D(o.late(()=>dt)))),videos:o.union(o.undefined,o.array(D(o.late(()=>ut)))),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class ce extends q{get id(){return this.__attr("id")}get student_count(){return this.__attr("student_count")}get video_count(){return this.__attr("video_count")}get name(){return this.__attr("name")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}students(t){return this.__child("students",st,t)}videos(t){return this.__child("videos",X,t)}}function _o(){return new ce}const We=_o().student_count.video_count.name.created_at.updated_at,je=vo.actions(e=>({log(){console.log(JSON.stringify(e))}})),bo=E.named("MultipleChoise").props({__typename:o.optional(o.literal("MultipleChoise"),"MultipleChoise"),id:o.identifier,image:o.union(o.undefined,o.string),text:o.union(o.undefined,o.string),index:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class Rn extends q{get id(){return this.__attr("id")}get image(){return this.__attr("image")}get text(){return this.__attr("text")}get index(){return this.__attr("index")}}function wo(){return new Rn}wo().image.text.index;const At=bo.actions(e=>({log(){console.log(JSON.stringify(e))}}));var T;(function(e){e.IMAGE_MATCH="IMAGE_MATCH",e.LETTER_SEQUENCE="LETTER_SEQUENCE",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE"})(T||(T={}));const Co=o.enumeration("QuizType",["IMAGE_MATCH","LETTER_SEQUENCE","MULTIPLE_CHOICE"]),So=L()(E.named("Quiz").props({__typename:o.optional(o.literal("Quiz"),"Quiz"),id:o.identifier,video_id:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),show_at:o.union(o.undefined,o.number),type:o.union(o.undefined,Co),choises:o.union(o.undefined,o.array(D(o.late(()=>At)))),question:o.union(o.undefined,o.string),questionAnswer:o.union(o.undefined,o.integer),additional_image:o.union(o.undefined,o.string),image_matcher:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}})));class ae extends q{get id(){return this.__attr("id")}get video_id(){return this.__attr("video_id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get show_at(){return this.__attr("show_at")}get type(){return this.__attr("type")}get question(){return this.__attr("question")}get questionAnswer(){return this.__attr("questionAnswer")}get additional_image(){return this.__attr("additional_image")}get image_matcher(){return this.__attr("image_matcher")}choises(t){return this.__child("choises",Rn,t)}}function Io(){return new ae}const Ie=Io().video_id.created_at.updated_at.show_at.type.question.questionAnswer.additional_image.image_matcher;bt.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){if(e===12&&(e=0),t==="pagi")return e;if(t==="siang")return e>=11?e:e+12;if(t==="sore"||t==="malam")return e+12},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}});function Po(e){var n;const t=bt((n=e.createdAt)!=null?n:e.created_at).locale("id");return{get isMoreThan3Days(){return bt(new Date).diff(t,"days")>3},get hummanize(){return e.isMoreThan3Days?t.format("LL"):t.fromNow()},get createdMoment(){return t}}}function ko(e){let t=e,n=0;for(;t>=60;)n+=1,t-=60;const r=e%60;return{minute:n,modulo:r}}function Je(e){const{minute:t,modulo:n}=ko(e),r=t<10?`0${t}`:`${t}`,a=n<10?`0${n}`:`${n}`;return`${r}:${a}`}const $o={MULTIPLE_CHOICE:"Pilihan ganda",IMAGE_MATCH:"Pencocokan gambar",LETTER_SEQUENCE:"Urut gambar"},lt=So.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get typeLabel(){return $o[e.type]}})).views(Po).views(e=>({get durationText(){var t;return Je((t=e.show_at)!=null?t:0)}})),qo=L()(E.named("Video").props({__typename:o.optional(o.literal("Video"),"Video"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),title:o.union(o.undefined,o.string),caption:o.union(o.undefined,o.string),description:o.union(o.undefined,o.string),content:o.union(o.undefined,o.string),thumbnail:o.union(o.undefined,o.string),duration:o.union(o.undefined,o.integer),grades:o.union(o.undefined,o.array(D(o.late(()=>je)))),quizes:o.union(o.undefined,o.array(D(o.late(()=>lt)))),student_progress:o.union(o.undefined,o.array(D(o.late(()=>at)))),quiz_count:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}})));class X extends q{get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get title(){return this.__attr("title")}get caption(){return this.__attr("caption")}get description(){return this.__attr("description")}get content(){return this.__attr("content")}get thumbnail(){return this.__attr("thumbnail")}get duration(){return this.__attr("duration")}get quiz_count(){return this.__attr("quiz_count")}grades(t){return this.__child("grades",ce,t)}quizes(t){return this.__child("quizes",ae,t)}student_progress(t){return this.__child("student_progress",ue,t)}}function Do(){return new X}const ye=Do().created_at.updated_at.title.caption.description.content.thumbnail.duration.quiz_count,ut=qo.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get durationText(){var t;return Je((t=e.duration)!=null?t:0)}})),Eo=E.named("QuizAnswer").props({__typename:o.optional(o.literal("QuizAnswer"),"QuizAnswer"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),user_id:o.union(o.undefined,o.string),quiz_id:o.union(o.undefined,o.string),to:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),from:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),items:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),selected:o.union(o.undefined,o.null,o.string)}).views(e=>({get store(){return e.__getStore()}}));class Tt extends q{get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get user_id(){return this.__attr("user_id")}get quiz_id(){return this.__attr("quiz_id")}get to(){return this.__attr("to")}get from(){return this.__attr("from")}get items(){return this.__attr("items")}get selected(){return this.__attr("selected")}}function zo(){return new Tt}const Qn=zo().created_at.updated_at.user_id.quiz_id.to.from.items.selected,On=Eo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Mo=E.named("PaginatorInfo").props({__typename:o.optional(o.literal("PaginatorInfo"),"PaginatorInfo"),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),firstItem:o.union(o.undefined,o.null,o.integer),hasMorePages:o.union(o.undefined,o.boolean),lastItem:o.union(o.undefined,o.null,o.integer),lastPage:o.union(o.undefined,o.integer),perPage:o.union(o.undefined,o.integer),total:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class ve extends q{get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get firstItem(){return this.__attr("firstItem")}get hasMorePages(){return this.__attr("hasMorePages")}get lastItem(){return this.__attr("lastItem")}get lastPage(){return this.__attr("lastPage")}get perPage(){return this.__attr("perPage")}get total(){return this.__attr("total")}}function Ao(){return new ve}Ao().count.currentPage.firstItem.hasMorePages.lastItem.lastPage.perPage.total;const Pe=Mo.actions(e=>({log(){console.log(JSON.stringify(e))}})),To=L()(E.named("VideoPaginator").props({__typename:o.optional(o.literal("VideoPaginator"),"VideoPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Pe)),data:o.union(o.undefined,o.array(D(o.late(()=>ut))))}).views(e=>({get store(){return e.__getStore()}})));class Wn extends q{paginatorInfo(t){return this.__child("paginatorInfo",ve,t)}data(t){return this.__child("data",X,t)}}function Vo(){return new Wn}const Lo=Vo(),Go=To.actions(e=>({log(){console.log(JSON.stringify(e))}})),Fo=L()(E.named("QuizPaginator").props({__typename:o.optional(o.literal("QuizPaginator"),"QuizPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Pe)),data:o.union(o.undefined,o.array(D(o.late(()=>lt))))}).views(e=>({get store(){return e.__getStore()}})));class jn extends q{paginatorInfo(t){return this.__child("paginatorInfo",ve,t)}data(t){return this.__child("data",ae,t)}}function Uo(){return new jn}const Ho=Uo(),No=Fo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Bo=L()(E.named("StudentGradePaginator").props({__typename:o.optional(o.literal("StudentGradePaginator"),"StudentGradePaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Pe)),data:o.union(o.undefined,o.array(D(o.late(()=>dt))))}).views(e=>({get store(){return e.__getStore()}})));class ct extends q{paginatorInfo(t){return this.__child("paginatorInfo",ve,t)}data(t){return this.__child("data",st,t)}}function Ro(){return new ct}const Vt=Ro(),Qo=Bo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Oo=L()(E.named("GradePaginator").props({__typename:o.optional(o.literal("GradePaginator"),"GradePaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Pe)),data:o.union(o.undefined,o.array(D(o.late(()=>je))))}).views(e=>({get store(){return e.__getStore()}})));class Jn extends q{paginatorInfo(t){return this.__child("paginatorInfo",ve,t)}data(t){return this.__child("data",ce,t)}}function Wo(){return new Jn}const jo=Wo(),Jo=Oo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Ko=L()(E.named("DiscussionReply").props({__typename:o.optional(o.literal("DiscussionReply"),"DiscussionReply"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,D(o.late(()=>Se))),discussion:o.union(o.undefined,D(o.late(()=>pt))),content:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class Ke extends q{get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get content(){return this.__attr("content")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}user(t){return this.__child("user",W,t)}discussion(t){return this.__child("discussion",ke,t)}}function Yo(){return new Ke}const Lt=Yo().user_id.content.created_at.updated_at,Gt=Ko.actions(e=>({log(){console.log(JSON.stringify(e))}})),Xo=L()(E.named("Discussion").props({__typename:o.optional(o.literal("Discussion"),"Discussion"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,D(o.late(()=>Se))),content:o.union(o.undefined,o.string),replies:o.union(o.undefined,o.array(o.union(o.null,D(o.late(()=>Gt))))),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class ke extends q{get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get content(){return this.__attr("content")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}user(t){return this.__child("user",W,t)}replies(t){return this.__child("replies",Ke,t)}}function Zo(){return new ke}const Ft=Zo().user_id.content.created_at.updated_at,pt=Xo.actions(e=>({log(){console.log(JSON.stringify(e))}})),ea=L()(E.named("DiscussionPaginator").props({__typename:o.optional(o.literal("DiscussionPaginator"),"DiscussionPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Pe)),data:o.union(o.undefined,o.array(D(o.late(()=>pt))))}).views(e=>({get store(){return e.__getStore()}})));class Kn extends q{paginatorInfo(t){return this.__child("paginatorInfo",ve,t)}data(t){return this.__child("data",ke,t)}}function ta(){return new Kn}const na=ta(),ia=ea.actions(e=>({log(){console.log(JSON.stringify(e))}})),ra=E.named("VideoGrade").props({__typename:o.optional(o.literal("VideoGrade"),"VideoGrade"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),video_id:o.union(o.undefined,o.string),grade_id:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}}));class Yn extends q{get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get video_id(){return this.__attr("video_id")}get grade_id(){return this.__attr("grade_id")}}function oa(){return new Yn}const aa=oa().created_at.updated_at.video_id.grade_id,Xn=ra.actions(e=>({log(){console.log(JSON.stringify(e))}}));var Zn;(function(e){e.ASC="ASC",e.DESC="DESC"})(Zn||(Zn={}));o.enumeration("SortOrder",["ASC","DESC"]);const sa=E.named("SimplePaginatorInfo").props({__typename:o.optional(o.literal("SimplePaginatorInfo"),"SimplePaginatorInfo"),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),firstItem:o.union(o.undefined,o.null,o.integer),lastItem:o.union(o.undefined,o.null,o.integer),perPage:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class da extends q{get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get firstItem(){return this.__attr("firstItem")}get lastItem(){return this.__attr("lastItem")}get perPage(){return this.__attr("perPage")}}function la(){return new da}la().count.currentPage.firstItem.lastItem.perPage;const ua=sa.actions(e=>({log(){console.log(JSON.stringify(e))}})),ca=E.named("PageInfo").props({__typename:o.optional(o.literal("PageInfo"),"PageInfo"),hasNextPage:o.union(o.undefined,o.boolean),hasPreviousPage:o.union(o.undefined,o.boolean),startCursor:o.union(o.undefined,o.null,o.string),endCursor:o.union(o.undefined,o.null,o.string),total:o.union(o.undefined,o.integer),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),lastPage:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class pa extends q{get hasNextPage(){return this.__attr("hasNextPage")}get hasPreviousPage(){return this.__attr("hasPreviousPage")}get startCursor(){return this.__attr("startCursor")}get endCursor(){return this.__attr("endCursor")}get total(){return this.__attr("total")}get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get lastPage(){return this.__attr("lastPage")}}function ha(){return new pa}ha().hasNextPage.hasPreviousPage.startCursor.endCursor.total.count.currentPage.lastPage;const ga=ca.actions(e=>({log(){console.log(JSON.stringify(e))}}));var ei;(function(e){e.ONLY="ONLY",e.WITH="WITH",e.WITHOUT="WITHOUT"})(ei||(ei={}));o.enumeration("Trashed",["ONLY","WITH","WITHOUT"]);var se;(function(e){e.queryAuth="queryAuth",e.queryVideo="queryVideo",e.queryGetVideoByGrade="queryGetVideoByGrade",e.queryVideoNotInGrade="queryVideoNotInGrade",e.queryQuizAnswers="queryQuizAnswers",e.queryIsUniqueEmail="queryIsUniqueEmail",e.queryUserByGrade="queryUserByGrade",e.queryVideoByGrade="queryVideoByGrade",e.queryQuizByGrade="queryQuizByGrade",e.queryProgressByGrade="queryProgressByGrade",e.queryGradeAll="queryGradeAll",e.queryGradeById="queryGradeById",e.queryGradeQuizes="queryGradeQuizes",e.queryProgress="queryProgress",e.queryGradeByAuth="queryGradeByAuth",e.queryStudentProgress="queryStudentProgress",e.queryVideos="queryVideos",e.queryQuizes="queryQuizes",e.queryStudents="queryStudents",e.queryGrades="queryGrades",e.queryGetStudentByGrade="queryGetStudentByGrade",e.queryStudentGrades="queryStudentGrades",e.queryDiscussion="queryDiscussion"})(se||(se={}));var P;(function(e){e.mutateLogin="mutateLogin",e.mutateLogout="mutateLogout",e.mutateVideo="mutateVideo",e.mutateVideoUpdate="mutateVideoUpdate",e.mutateVideoDelete="mutateVideoDelete",e.mutateQuizDelete="mutateQuizDelete",e.mutateMultipleChoiseQuiz="mutateMultipleChoiseQuiz",e.mutateImageMatchQuiz="mutateImageMatchQuiz",e.mutateLetterSequenceQuiz="mutateLetterSequenceQuiz",e.mutateQuizAnswer="mutateQuizAnswer",e.mutateUser="mutateUser",e.mutateLoginWithInvitation="mutateLoginWithInvitation",e.mutateUserChangeUserPassword="mutateUserChangeUserPassword",e.mutateSentInvitation="mutateSentInvitation",e.mutateUserEdit="mutateUserEdit",e.mutateUserActivation="mutateUserActivation",e.mutateUserDelete="mutateUserDelete",e.mutateGrade="mutateGrade",e.mutateGradeEdit="mutateGradeEdit",e.mutateAddVideoInGrade="mutateAddVideoInGrade",e.mutateUpdateVideoProgress="mutateUpdateVideoProgress",e.mutateUpdateQuizProgress="mutateUpdateQuizProgress",e.mutateDiscussion="mutateDiscussion",e.mutateDiscussionReply="mutateDiscussionReply",e.mutateUpdateDiscussion="mutateUpdateDiscussion",e.mutateUpdateDiscussionReply="mutateUpdateDiscussionReply",e.mutateDeleteDiscussion="mutateDeleteDiscussion",e.mutateDeleteDiscussionReply="mutateDeleteDiscussionReply"})(P||(P={}));const ma=L()(ar.named("RootStore").extend(sr([["User",()=>Se],["Video",()=>ut],["Grade",()=>je],["StudentGrade",()=>dt],["Progress",()=>at],["Quiz",()=>lt],["MultipleChoise",()=>At],["QuizAnswer",()=>On],["VideoPaginator",()=>Go],["PaginatorInfo",()=>Pe],["QuizPaginator",()=>No],["StudentGradePaginator",()=>Qo],["GradePaginator",()=>Jo],["DiscussionPaginator",()=>ia],["Discussion",()=>pt],["DiscussionReply",()=>Gt],["VideoGrade",()=>Xn],["SimplePaginatorInfo",()=>ua],["PageInfo",()=>ga]],["User","Video","Grade","StudentGrade","Progress","Quiz","MultipleChoise","QuizAnswer","Discussion","DiscussionReply","VideoGrade"],"js")).props({users:o.optional(o.map(o.late(()=>Se)),{}),videos:o.optional(o.map(o.late(()=>ut)),{}),grades:o.optional(o.map(o.late(()=>je)),{}),studentGrades:o.optional(o.map(o.late(()=>dt)),{}),progresses:o.optional(o.map(o.late(()=>at)),{}),quizzes:o.optional(o.map(o.late(()=>lt)),{}),multipleChoises:o.optional(o.map(o.late(()=>At)),{}),quizAnswers:o.optional(o.map(o.late(()=>On)),{}),discussions:o.optional(o.map(o.late(()=>pt)),{}),discussionReplies:o.optional(o.map(o.late(()=>Gt)),{}),videoGrades:o.optional(o.map(o.late(()=>Xn)),{})}).actions(e=>({queryAuth(t,n=xe.toString(),r={}){return e.query(`query auth { auth {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},queryVideo(t,n=ye.toString(),r={}){return e.query(`query video($id: ID!) { video(id: $id) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},queryGetVideoByGrade(t,n=ye.toString(),r={}){return e.query(`query getVideoByGrade($gradeId: ID!) { getVideoByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},queryVideoNotInGrade(t,n=ye.toString(),r={}){return e.query(`query videoNotInGrade($id: ID!) { videoNotInGrade(id: $id) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},queryQuizAnswers(t,n=Qn.toString(),r={}){return e.query(`query quizAnswers { quizAnswers {
        ${typeof n=="function"?n(new Tt).toString():n}
      } }`,t,r)},queryIsUniqueEmail(t,n={}){return e.query("query isUniqueEmail($email: String!) { isUniqueEmail(email: $email) }",t,n)},queryUserByGrade(t,n=xe.toString(),r={}){return e.query(`query userByGrade($gradeId: ID!) { userByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},queryVideoByGrade(t,n=ye.toString(),r={}){return e.query(`query videoByGrade($gradeId: ID!) { videoByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},queryQuizByGrade(t,n=Ie.toString(),r={}){return e.query(`query quizByGrade($gradeId: ID!) { quizByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},queryProgressByGrade(t,n=Oe.toString(),r={}){return e.query(`query progressByGrade($gradeId: ID!) { progressByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new ue).toString():n}
      } }`,t,r)},queryGradeAll(t,n=We.toString(),r={}){return e.query(`query gradeAll { gradeAll {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},queryGradeById(t,n=We.toString(),r={}){return e.query(`query gradeById($id: ID!) { gradeById(id: $id) {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},queryGradeQuizes(t,n=Ie.toString(),r={}){return e.query(`query gradeQuizes($gradeId: ID!) { gradeQuizes(grade_id: $gradeId) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},queryProgress(t,n=Oe.toString(),r={}){return e.query(`query progress { progress {
        ${typeof n=="function"?n(new ue).toString():n}
      } }`,t,r)},queryGradeByAuth(t,n=yo.toString(),r={}){return e.query(`query gradeByAuth { gradeByAuth {
        ${typeof n=="function"?n(new st).toString():n}
      } }`,t,r)},queryStudentProgress(t,n=Oe.toString(),r={}){return e.query(`query studentProgress($userId: ID!) { studentProgress(user_id: $userId) {
        ${typeof n=="function"?n(new ue).toString():n}
      } }`,t,r)},queryVideos(t,n=Lo.toString(),r={}){return e.query(`query videos($gradeId: ID, $search: String, $first: Int, $page: Int) { videos(grade_id: $gradeId, search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new Wn).toString():n}
      } }`,t,r)},queryQuizes(t,n=Ho.toString(),r={}){return e.query(`query quizes($videoId: String!, $first: Int, $page: Int) { quizes(videoId: $videoId, first: $first, page: $page) {
        ${typeof n=="function"?n(new jn).toString():n}
      } }`,t,r)},queryStudents(t,n=Vt.toString(),r={}){return e.query(`query students($search: String, $gradeId: String, $first: Int, $page: Int) { students(search: $search, grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new ct).toString():n}
      } }`,t,r)},queryGrades(t,n=jo.toString(),r={}){return e.query(`query grades($search: String, $first: Int, $page: Int) { grades(search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new Jn).toString():n}
      } }`,t,r)},queryGetStudentByGrade(t,n=Vt.toString(),r={}){return e.query(`query getStudentByGrade($gradeId: ID!, $first: Int, $page: Int) { getStudentByGrade(grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new ct).toString():n}
      } }`,t,r)},queryStudentGrades(t,n=Vt.toString(),r={}){return e.query(`query studentGrades($gradeId: String, $search: String, $first: Int, $page: Int) { studentGrades(grade_id: $gradeId, search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new ct).toString():n}
      } }`,t,r)},queryDiscussion(t,n=na.toString(),r={}){return e.query(`query discussion($gradeId: ID!, $first: Int, $page: Int) { discussion(grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new Kn).toString():n}
      } }`,t,r)},mutateLogin(t,n){return e.mutate("mutation login($email: String!, $password: String!) { login(email: $email, password: $password) }",t,n)},mutateLogout(t,n){return e.mutate("mutation logout { logout }",t,n)},mutateVideo(t,n=ye.toString(),r){return e.mutate(`mutation video($gradeId: String!, $title: String!, $caption: String!, $description: String!, $content: Upload!) { video(grade_id: $gradeId, title: $title, caption: $caption, description: $description, content: $content) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},mutateVideoUpdate(t,n=ye.toString(),r){return e.mutate(`mutation videoUpdate($id: ID!, $title: String!, $caption: String!, $description: String!) { videoUpdate(id: $id, title: $title, caption: $caption, description: $description) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},mutateVideoDelete(t,n=ye.toString(),r){return e.mutate(`mutation videoDelete($id: ID!) { videoDelete(id: $id) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},mutateQuizDelete(t,n=Ie.toString(),r){return e.mutate(`mutation quizDelete($id: ID!) { quizDelete(id: $id) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},mutateMultipleChoiseQuiz(t,n=Ie.toString(),r){return e.mutate(`mutation multipleChoiseQuiz($videoId: String!, $showAt: Int!, $options: [MultipleChoiseInput!]!, $answer: Int!, $additionalFile: Upload, $question: String!) { multipleChoiseQuiz(video_id: $videoId, show_at: $showAt, options: $options, answer: $answer, additionalFile: $additionalFile, question: $question) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},mutateImageMatchQuiz(t,n=Ie.toString(),r){return e.mutate(`mutation imageMatchQuiz($videoId: String!, $showAt: Int!, $text: String!) { imageMatchQuiz(video_id: $videoId, show_at: $showAt, text: $text) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},mutateLetterSequenceQuiz(t,n=Ie.toString(),r){return e.mutate(`mutation letterSequenceQuiz($videoId: String!, $showAt: Int!, $text: String!) { letterSequenceQuiz(video_id: $videoId, show_at: $showAt, text: $text) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},mutateQuizAnswer(t,n=Qn.toString(),r){return e.mutate(`mutation quizAnswer($args: CreateQuizAnswerInput!) { quizAnswer(args: $args) {
        ${typeof n=="function"?n(new Tt).toString():n}
      } }`,t,r)},mutateUser(t,n=xe.toString(),r){return e.mutate(`mutation user($args: CreateUserInput!) { user(args: $args) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},mutateLoginWithInvitation(t,n){return e.mutate("mutation loginWithInvitation($invitation: String!, $password: String!) { loginWithInvitation(invitation: $invitation, password: $password) }",t,n)},mutateUserChangeUserPassword(t,n){return e.mutate("mutation userChangeUserPassword($password: String!, $passwordConfirmation: String!) { userChangeUserPassword(password: $password, password_confirmation: $passwordConfirmation) }",t,n)},mutateSentInvitation(t,n){return e.mutate("mutation sentInvitation($id: String!) { sentInvitation(id: $id) }",t,n)},mutateUserEdit(t,n=xe.toString(),r){return e.mutate(`mutation userEdit($id: String!, $name: String, $email: String) { userEdit(id: $id, name: $name, email: $email) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},mutateUserActivation(t,n=xe.toString(),r){return e.mutate(`mutation userActivation($id: String!, $password: String!) { userActivation(id: $id, password: $password) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},mutateUserDelete(t,n=xe.toString(),r){return e.mutate(`mutation userDelete($id: String!) { userDelete(id: $id) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},mutateGrade(t,n=We.toString(),r){return e.mutate(`mutation grade($name: String!) { grade(name: $name) {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},mutateGradeEdit(t,n=We.toString(),r){return e.mutate(`mutation gradeEdit($id: ID!, $name: String) { gradeEdit(id: $id, name: $name) {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},mutateAddVideoInGrade(t,n=aa.toString(),r){return e.mutate(`mutation addVideoInGrade($videoId: ID!, $gradeId: ID!) { addVideoInGrade(video_id: $videoId, grade_id: $gradeId) {
        ${typeof n=="function"?n(new Yn).toString():n}
      } }`,t,r)},mutateUpdateVideoProgress(t,n=Oe.toString(),r){return e.mutate(`mutation updateVideoProgress($videoId: ID!, $play: Float!) { updateVideoProgress(video_id: $videoId, play: $play) {
        ${typeof n=="function"?n(new ue).toString():n}
      } }`,t,r)},mutateUpdateQuizProgress(t,n=Oe.toString(),r){return e.mutate(`mutation updateQuizProgress($quizId: ID!, $correct: Boolean!) { updateQuizProgress(quiz_id: $quizId, correct: $correct) {
        ${typeof n=="function"?n(new ue).toString():n}
      } }`,t,r)},mutateDiscussion(t,n=Ft.toString(),r){return e.mutate(`mutation discussion($gradeId: ID!, $userId: ID!, $content: String!) { discussion(grade_id: $gradeId, user_id: $userId, content: $content) {
        ${typeof n=="function"?n(new ke).toString():n}
      } }`,t,r)},mutateDiscussionReply(t,n=Lt.toString(),r){return e.mutate(`mutation discussionReply($userId: ID!, $discussionId: ID!, $content: String!) { discussionReply(user_id: $userId, discussion_id: $discussionId, content: $content) {
        ${typeof n=="function"?n(new Ke).toString():n}
      } }`,t,r)},mutateUpdateDiscussion(t,n=Ft.toString(),r){return e.mutate(`mutation updateDiscussion($id: ID!, $content: String!) { updateDiscussion(id: $id, content: $content) {
        ${typeof n=="function"?n(new ke).toString():n}
      } }`,t,r)},mutateUpdateDiscussionReply(t,n=Lt.toString(),r){return e.mutate(`mutation updateDiscussionReply($id: ID!, $content: String!) { updateDiscussionReply(id: $id, content: $content) {
        ${typeof n=="function"?n(new Ke).toString():n}
      } }`,t,r)},mutateDeleteDiscussion(t,n=Ft.toString(),r){return e.mutate(`mutation deleteDiscussion($id: ID!) { deleteDiscussion(id: $id) {
        ${typeof n=="function"?n(new ke).toString():n}
      } }`,t,r)},mutateDeleteDiscussionReply(t,n=Lt.toString(),r){return e.mutate(`mutation deleteDiscussionReply($id: ID!) { deleteDiscussionReply(id: $id) {
        ${typeof n=="function"?n(new Ke).toString():n}
      } }`,t,r)}}))),fa=ma.actions(e=>({log(){console.log(JSON.stringify(e))}})),ti=dr(un),M=lr(ti,un),xa=wt(me({email:B().required().email(),password:B().required().min(6)})),ya=e=>[{name:"email",type:"email",label:"Masukan email anda",icon:ur},{name:"password",type:"password",label:"Password",icon:cn}].map(t=>x(g({},t),{disabled:e,fullWidth:!0})),ni=u.exports.createContext(null),Ut=()=>u.exports.useContext(ni);function ii(){const e=Ut();return u.exports.useCallback(async t=>{const n=await e.queryAuth();if(t&&n&&n.auth){const{auth:r}=n;return t({id:r.id,name:r.name,email:r.email,role:r.role})}if(n&&n.auth){const{auth:r}=n;return{name:r.name,email:r.email,role:r.role}}return null},[])}function va(e){const t=Le({resolver:xa}),{setQuery:n,loading:r,data:a}=M(),s=a&&!a.login&&!r;u.exports.useEffect(()=>{a&&a.login&&e()},[a]);const d=t.handleSubmit(l=>n(p=>p.mutateLogin(l)));return{form:t,onSubmit:d,loading:r,isCredentialInvalid:s}}class _a extends u.exports.Component{constructor(t){super(t);_(this,"rootStore");this.rootStore=fa.create(void 0,{gqlHttpClient:new cr.GraphQLClient(this.props.url,{credentials:"include"})})}render(){return i(ti.Provider,{value:this.rootStore,children:i(ni.Provider,{value:this.rootStore,children:this.props.children})})}}const ba="imandidikr@gmail.com",wa="password";var Ca={email:ba,password:wa};function $(e=!1){const[t,n]=u.exports.useState(e),r=u.exports.useCallback(s=>()=>n(s),[]),a=u.exports.useCallback(()=>{n(!t)},[t]);return[t,{force:r,toggle:a,inline:n}]}const Sa=()=>{const[e,{force:t}]=$(),{user:n,setUser:r}=oe(),a=ii(),s=Ut(),d=u.exports.useCallback(()=>s.mutateLogin(Ca).then(({login:l})=>{if(l)return a(r)}),[]);return i(S,{children:i(pr,{ariaLabel:"SpeedDial example",open:e,sx:{position:"fixed",bottom:"1rem",right:"1rem"},onMouseEnter:t(!0),onMouseLeave:t(!1),icon:i(hr,{}),children:i(gr,{onClick:d,FabProps:{disabled:Boolean(n)},tooltipTitle:"Login",icon:i(mr,{})})})})};function Ia(){const[e]=pn("admin-sidebar-open"),[t,n]=pn("admin-sidebar-open"),r=()=>n(!0),a=()=>n(!1),[s,d]=u.exports.useState(""),l=Ge(),p=hn(l.breakpoints.down("md"));return u.exports.useEffect(()=>{p&&e&&n(!1)},[e,p]),{title:s,setTitle:d,sidebaropen:Boolean(t),handleCloseDrawer:a,handleOpenDrawer:r}}const ri=u.exports.createContext(null),Ht=()=>u.exports.useContext(ri);function oi(){const e=Ge();return hn(e.breakpoints.down("sm"))}function $e(e){return Ct(e).replaceAll("query","").replaceAll("mutate","").camelCase().value()}function qe({api:e,merge:t={},parser:n}){const{data:r,loading:a,error:s,setQuery:d}=M(),l=$e(e),p=m=>(n&&(m=g({},n(m))),d(f=>f[e](g(g({},m),t))));return[{loading:a,response:r?r[l]:null,error:s},p]}const Pa=240,ka=fr(Fe,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:t})=>g({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},t&&{marginLeft:Pa,[e.breakpoints.down("sm")]:{marginLeft:0,width:"100%"},transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})})),$a={paddingLeft:[0,0],paddingRight:[0,0],display:["block","flex"],color:"#2c3e50","& > .page-info":{paddingX:2,display:"flex",alignItems:"center"},"& > .search-bar":{borderRadius:1,display:"flex",bgcolor:"red",alignItems:"center",border:"solid 1px #f8f8f8",boxShadow:"inset 0 1px 2px #eee","& > .icon-container":{alignItems:"center",display:"flex",paddingX:2,background:"#f9f9f9",height:42}}},qa=C(()=>{const{user:e}=oe(),t=oi(),[n,r]=u.exports.useState(null),[{loading:a,response:s},d]=qe({api:P.mutateLogout}),{setUser:l}=oe(),p=R();u.exports.useEffect(()=>{s&&(p("/"),l(null))},[s]);const m=()=>{d({})},f=b=>{r(n?null:b.target)};if(!e)return i(S,{});const{name:v}=e;return c(S,{children:[i(xr,{sx:{zIndex:100*100,color:"white"},open:a,children:c(h,{sx:{textAlign:"center"},children:[i(ne,{color:"inherit"}),i(y,{children:"Mengeluarkan akun anda"})]})}),i(yr,{PaperProps:{elevation:1,sx:{width:200}},onClose:()=>r(null),open:Boolean(n),anchorEl:n,children:i(gn,{onClick:m,children:"Logout"})}),i(h,{sx:{marginLeft:"auto",position:["absolute","static"],top:0,right:0},children:t?i(we,{onClick:f,children:i(mn,{})}):i(w,{onClick:f,endIcon:i(vr,{}),startIcon:i(mn,{}),children:t?"":v})})]})}),ai=()=>i(S,{children:i(ka,{sx:{borderLeft:"none",background:"white",color:"black"},variant:"outlined",elevation:0,position:"fixed",open:!1,children:i(F,{children:c(Ue,{sx:$a,children:[i(h,{className:"page-info",children:c(h,{sx:{display:"flex",alignItems:"center",bgcolor:e=>e.palette.grey.A100,borderRadius:2},children:[i(_r,{sx:{flex:1,paddingLeft:2},placeholder:"Pencarian"}),i(St,{sx:{mr:2}})]})}),i(qa,{})]})})})}),si=()=>{const{user:e}=oe();return e?i(h,{sx:{minHeight:"10vh",display:"flex",alignItems:"center",bgcolor:"primary.dark",color:"white",py:3},children:c(F,{children:[c(y,{sx:{fontWeight:"bolder"},variant:"h4",children:["Selamat datang, ",e.name]}),i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:e.role})]})}):i(S,{})},di=u.exports.createContext(null),pe=()=>u.exports.useContext(di);class Da extends u.exports.Component{constructor(t){super(t);_(this,"updateNav",t=>{this.setState({navs:[...t]})});_(this,"updateBackUrl",(t=null)=>{this.setState({backurl:t})});_(this,"getContextValue",()=>x(g({},this.state),{updateNavs:this.updateNav,updateBackUrl:this.updateBackUrl}));this.state={navs:[],backurl:null}}render(){return i(di.Provider,{value:this.getContextValue(),children:this.props.children})}}const li=()=>{const{navs:e,backurl:t}=pe(),n=R(),{pathname:r}=tt(),a=l=>{n(l)};console.log(r),u.exports.useEffect(()=>{document.body.scroll({top:0});const l=document.getElementById("root");l&&(l.scrollTo(0,0),window.scrollTo({top:0,behavior:"smooth"}))},[r]);const s=()=>{t&&n(t.url)},d=()=>{const l=e.findIndex(p=>p.path===r.replaceAll("%20"," "));return console.log(e),l===-1?0:l};return i(Fe,{component:G.div,animate:{height:e.length?"fit-content":0},sx:{overflow:"hidden"},position:"static",color:"transparent",elevation:0,variant:"outlined",children:c(F,{sx:{"& > *":{color:"white"},py:0,minHeight:"fit-content",display:"flex",alignItems:"center"},children:[i(fn,{sx:{py:0},value:d(),children:e.map((l,p)=>i(nt,{onClick:()=>a(l.path),sx:{py:0,my:0,textTransform:"none",fontWeight:"bolder"},label:l.label,value:p},l.path))}),i(G.div,{style:{flex:1,marginLeft:"auto",width:"fit-content",textAlign:"right"},animate:{opacity:t?1:0},children:i(w,{onClick:s,startIcon:i(It,{}),sx:{textTransform:"none"},children:t==null?void 0:t.label})})]})})},Ea=({children:e})=>{const t=Ia();return i(ri.Provider,{value:t,children:c(h,{sx:{background:"#f9f9f9",minHeight:"100vh"},children:[i(xn,{}),i(ai,{}),c(h,{id:"main-component",component:"main",sx:{flexGrow:1,minHeight:"100vh"},children:[i(Ue,{}),i(si,{}),i(li,{}),e]})]})})},za=({children:e})=>i(S,{children:e});function Ma(){const{user:e}=oe(),{loading:t,data:n}=M(d=>{var l;return d.queryStudentProgress({userId:(l=e==null?void 0:e.id)!=null?l:""})}),r=()=>{var d;return n&&((d=n.studentProgress)==null?void 0:d.videoHistories)?n.studentProgress.videoHistories:[]},a=()=>{var d;return n&&((d=n.studentProgress)==null?void 0:d.videoHistories)?n.studentProgress.quizHistories:[]},s=d=>{const l=r().find(p=>p.video_id.toString()===d);return l?l.time:0};return{progress:n?n.studentProgress:null,loading:!n||t,videoHistory:r(),quizHistory:a(),getPlaying:s}}function Aa(){const{loading:e,data:t}=M(n=>n.queryGradeByAuth({},r=>r.id.grade(a=>a.id.name.video_count)));return{studentGrade:t?t.gradeByAuth:null,loading:!t||e}}function Ta({studentGrade:e}){const{data:t,loading:n,setQuery:r}=M(),a=t?t.getVideoByGrade:[],s=(d,l)=>{const p=a.find(f=>f.id===d);if(!p)return 0;const m=l/p.duration*100;return isFinite(m)?Math.floor(m):0};return u.exports.useEffect(()=>{e&&r(d=>d.queryGetVideoByGrade({gradeId:e.grade.id}))},[e]),{videos:a,loading:!t||n,getPlayingPercentage:s}}function Va(){const e=Ma(),t=Aa(),n=Ta(t),r=[e.loading,t.loading,n.loading].find(Boolean);return{progressInfo:e,videoList:n,gradeInfo:t,isPageLoading:Boolean(r)}}const ui=u.exports.createContext(null);function Z(){return u.exports.useContext(ui)}const De=()=>i(h,{sx:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%,-50%)",zIndex:100*100},children:i(ne,{size:150})}),La=C(({children:e})=>{const t=Va();return i(ui.Provider,{value:t,children:c(h,{sx:{background:"#f9f9f9",minHeight:"100vh"},children:[i(xn,{}),i(ai,{}),c(h,{id:"main-component",component:"main",sx:{flexGrow:1,minHeight:"100vh"},children:[i(Ue,{}),i(si,{}),i(li,{}),t.isPageLoading?i(De,{}):e]})]})})});function Nt(e){const{updateNavs:t,navs:n}=pe();u.exports.useEffect(()=>{!e.length&&!n.length&&t([{label:"Dashboard",path:"/"},{label:"Diskusi",path:"/discussion"}])},[e])}const Ga={[fe.ADMIN]:Ea,[fe.STUDENT]:La,GUEST:za},Fa=e=>{const{user:t}=oe(),n=t?t.role:"GUEST",r=Ga[n];return i(r,g({},e))};class ci extends u.exports.Component{constructor(){super(...arguments);_(this,"getValue",()=>{const{type:t="text",select:n,controller:r}=this.props;switch(t){case"number":return 0;case"money":return 0;default:{if(n)return"__default__";if(r){const{value:a}=r.field;if(!(a instanceof File))return a!=null?a:""}return this.props.value?this.props.value:""}}});_(this,"handleChange",t=>{const n=t.target.value,{onChange:r}=this.props;r&&r(n),this.props.controller&&this.props.controller.field.onChange(n)})}propBuilder(){var p;const a=this.props,{controller:t}=a,n=N(a,["controller"]),r={onChange:this.handleChange,value:this.getValue()};if(t){const s=t,{field:d}=s,l=d,{ref:m}=l,f=N(l,["ref"]),{fieldState:v}=s;if(v.error){const{message:b}=v.error;r.helperText=b,r.error=!0}return r.onChange=b=>{f==null||f.onChange(b),this.handleChange(b)},x(g(g(g({},n),f),r),{inputRef:m,inputProps:g({},(p=n.inputProps)!=null?p:{})})}return g(g({},n),r)}render(){return i(yn,g({},this.propBuilder()))}}const A=n=>{var r=n,{noUseForm:e}=r,t=N(r,["noUseForm"]);const a=He();if(!a&&!e&&!t.onChange)throw new Error("Please provide onChange props if without use useForm");if(e)return i(ci,g({},t));const s=ie({name:t.name,control:a.control});return i(ci,g({controller:s},t))},Ua=({component:e,makeProps:t,getKey:n,data:r})=>i(S,{children:r.map(a=>{let s=n?n(a):a;typeof a=="object"&&"key"in a&&(s=a.key);const d=x(g({},t?t(a):a),{key:s});return i(e,g({},d))})});function Ha(e){return u.exports.useCallback(()=>i(Ua,g({},e)),[e])}const Na={display:{sm:"block",md:"flex"},bgcolor:"primary.main",height:"100vh",overflow:"hidden","& > .content":{display:"flex",alignItems:"center",justifyContent:"center",width:{sm:"100%",md:"50%"},height:"100%"}},Ba=n=>{var r=n,{icon:e}=r,t=N(r,["icon"]);return i(h,{sx:{marginY:2,padding:2},children:i(A,x(g({},t),{InputProps:{endAdornment:i(vn,{position:"end",children:i(e,{})})}}))})},Ra=()=>{const e=ii(),{enqueueSnackbar:t}=U(),n=oe(),r=R();return()=>{e().then(a=>{if(a){const{name:s}=a;t(`Selamat datang ${s}`),r(a.role===fe.ADMIN?"/classroom":"/"),n.setUser(a)}})}},Qa=C(()=>{const e=Ra(),{isCredentialInvalid:t,form:n,onSubmit:r,loading:a}=va(e),s=ya(a),d=Ha({getKey({name:l}){return l},component:Ba,data:s});return i(K,x(g({},n),{children:c("form",{onSubmit:r,children:[i(d,{}),c(h,{textAlign:"right",padding:2,children:[i(Ne,{in:t,timeout:"auto",children:i(y,{sx:{color:"error.light",marginY:2},variant:"subtitle2",children:"Kombinasi email & password salah"})}),i(w,{variant:"contained",size:"large",type:"submit",endIcon:a?i(ne,{sx:{color:"white"},size:15}):i(br,{}),children:"Masuk"})]})]})}))}),Oa=()=>c(h,{component:"main",sx:Na,children:[i("div",{className:"content",children:c(h,{sx:{color:"white"},children:[i(y,{variant:"h1",children:"Bisindo"}),i(y,{variant:"h5",children:"Selamat datang"}),i(y,{children:"Kami adalah platform kursus online untuk pembelajaran bahasa isyarat."})]})}),i("div",{className:"content",children:c(H,{sx:{padding:2,width:"80%",height:"60%",color:"#2c3e50"},children:[i(y,{align:"center",variant:"h5",sx:{fontWeight:"light"},children:"Login dengan email & password anda"}),i(Q,{sx:{marginY:2}}),i(Qa,{})]})})]});function Wa(e){return e?{data:e.data,paginator:e.paginatorInfo}:{data:[],paginator:{perPage:10,currentPage:0,count:0,lastPage:0,lastItem:0,firstItem:0,hasMorePages:!1,total:0,__typename:"PaginatorInfo"}}}const ja=(e,t)=>{const n=$e(e),{data:r,loading:a,setQuery:s}=M(),d=p=>s(m=>m[e](p,f=>f.data(t).paginatorInfo(new ve().currentPage.hasMorePages.lastPage.perPage.count.total.lastItem.firstItem)));return{result:Wa(r&&r[n]?r[n]:null),fetch:d,loading:a,hasResponse:Boolean(r)}},Ja=({include:e,callback:t})=>{const[n,r]=u.exports.useState(e);return{updateParameter:d=>l=>{const p=x(g({},n),{[d]:l});r(g({},p)),t(x(g({},p),{page:1,first:10}))},removeParam:d=>{let l={};r(p=>(delete p[d],l=p,g({},p))),t(x(g({},l),{page:1,first:10}))},parameter:n}},Ka=({callback:e,paginator:t,merge:n})=>{const r=u.exports.useCallback((d,l)=>{e(x(g({},n),{page:d,first:l}))},[n]);return{go:r,next:()=>r(t.currentPage+1,10),prev:()=>r(t.currentPage+1,10)}};function Ya({includeQuery:e,api:t,selector:n}){const{fetch:r,loading:a,result:s,hasResponse:d}=ja(t,n),{parameter:l,updateParameter:p,removeParam:m}=Ja({include:e,callback:r}),f=Ka({callback:r,paginator:s.paginator,merge:l}),v=u.exports.useCallback(()=>{r(g({page:1,first:10},e))},[e]),b=d&&s.data.length===0;return{result:s,actions:x(g({},f),{updateParameter:p,parameter:l,removeParam:m}),loading:a,initialFetch:v,isEmpty:b,hasResponse:d}}function ht(e,t){return(n={})=>Ya({includeQuery:n,api:e,selector:t})}const Xa={quizByVideo:ht(se.queryQuizes,e=>e.show_at.id.type.additional_image.question.questionAnswer.image_matcher.choises(t=>t.id.image.text.index)),grades:ht(se.queryGrades,We),students:ht(se.queryStudents,e=>e.id.student(xe).grade(t=>t.id.name)),discussion:ht(se.queryDiscussion,e=>e.id.content.created_at.user_id.user(t=>t.name.id).replies(t=>t.user_id.id.user(n=>n.name).content.user_id.created_at))},pi=u.exports.createContext(null);function V(){return u.exports.useContext(pi)}const gt=C(({dataKey:e,includes:t={},children:n})=>{const r=Xa[e];if(!r)throw new Error(`Paginator for ${e} is not defined`);const a=r(t);return i(pi.Provider,{value:a,children:n})}),Za=["videos","student","editor","discussion"],es=()=>{const[e,t]=u.exports.useState({selected:null,mobileControlTab:"list",tab:"videos"}),{selected:n,mobileControlTab:r}=e;oi();const a=u.exports.useCallback(p=>{t(m=>x(g({},m),{selected:p,mobileControlTab:"manage"}))},[r]),s=u.exports.useCallback(p=>{t(m=>x(g({},m),{tab:p}))},[]),d=u.exports.useCallback(p=>{t(m=>x(g({},m),{mobileControlTab:p}))},[]);u.exports.useEffect(()=>{n&&s("videos")},[n]);const l=u.exports.useCallback(p=>()=>a(p),[]);return{selected:n,tablist:Za,activeTab:e.tab,mobileControlTab:r,setMobileControlTab:d,setActiveTab:s,setModel:l}},hi=u.exports.createContext(null);function ts(){return u.exports.useContext(hi)}function ns({api:e,rule:t,parser:n,merge:r={}}){const a=Le({resolver:wt(t)}),s=$e(e),{data:d,store:l}=M(),[p,m]=u.exports.useState(!1),[f,v]=u.exports.useState(!1),[b,k]=u.exports.useState({response:null}),I=u.exports.useCallback(te=>{v(!1),k({response:null});const de=n?n(g(g({},te),r)):g(g({},te),r);return m(!0),l[e](de).currentPromise().then(Ve=>{m(!1),Ve&&Ve[s]&&k({response:Ve}),v(!1)}).catch(()=>{console.log("Error"),v(!0),m(!1)})},[e]),z=a.handleSubmit(I),ee=u.exports.useCallback(()=>{a.reset({})},[]),ge=u.exports.useCallback(te=>{Object.values(de=>{a.setValue(de,te[de])})},[]);return{response:b.response,form:a,setFormValue:ge,reset:ee,loading:p,handler:z,error:f}}function j({api:e,rule:t}){return(n={},r)=>ns({api:e,rule:t,merge:n,parser:r})}const Bt=me({name:B().required()}),Rt={videos:{required:"Silahkan pilih video terlebih dahulu"},title:{required:"Silahkan isi judul video"},caption:{required:"Silahkan isi caption video"},description:{required:"Silahkan isi deskripsi video"}},is=Pt().test("video",Rt.videos.required,e=>e&&e instanceof File),gi=Pt().test("description validator",Rt.description.required,e=>{try{return e.blocks.length===1?e.blocks[0].text!=="":e.blocks.length>0}catch{return!1}}),rs=me({content:is.required(Rt.videos.required),title:B().required(),caption:B().required(),description:gi.required()}),os=me({title:B().required(),caption:B().required(),description:gi.required()}),mi=me({email:B().required().email(),name:B().required()}),as=me({password:B().required("Password wajib disi").min(6,"Minimal password  6 karakter"),passwordConfirmation:B().required("Silahkan konfirmasi password").oneOf([wr("password")],"Konfirmasi password salah")}),ss={description:{required:"Silahkan isi konten diskusi"}},ds=Pt().test("description validator",ss.description.required,e=>{try{return e.blocks.length===1?e.blocks[0].text!=="":e.blocks.length>0}catch{return!1}}),mt=me({content:ds.required()}),ls={createBatch:j({api:P.mutateGrade,rule:Bt}),editBatch:j({api:P.mutateGrade,rule:Bt}),addVideo:j({api:P.mutateVideo,rule:rs}),addUser:j({api:P.mutateUser,rule:mi}),addDiscussion:j({api:P.mutateDiscussion,rule:mt}),editDiscussion:j({api:P.mutateUpdateDiscussion,rule:mt}),addDiscussionReply:j({api:P.mutateDiscussionReply,rule:mt}),editDiscussionReply:j({api:P.mutateUpdateDiscussionReply,rule:mt}),editVideo:j({api:P.mutateVideoUpdate,rule:os}),activation:j({api:P.mutateUserActivation,rule:as}),editUser:j({api:P.mutateUserEdit,rule:mi})},fi=u.exports.createContext(null);function _e(){return u.exports.useContext(fi)}const Ee=C(({mutateKey:e,merge:t={},parser:n,children:r})=>{const a=ls[e];if(!a)throw new Error(`Please implemented mutation ${e}`);const s=a(t,n);return i(fi.Provider,{value:s,children:r})}),us=C(({onSuccess:e,model:t})=>{const{setFormValue:n,response:r,form:a,handler:s,loading:d}=_e();return u.exports.useEffect(()=>{r&&e(r)},[r]),u.exports.useEffect(()=>{t&&n({name:t.name})},[t]),i(K,x(g({},a),{children:c("form",{onSubmit:s,children:[i(A,{fullWidth:!0,name:"name",label:"Nama batch"}),i(w,{sx:{marginY:2},variant:"contained",size:"large",type:"submit",endIcon:d?i(ne,{sx:{color:"white"},size:15}):i(it,{}),children:"Simpan"})]})}))}),cs={marginTop:2,textTransform:"none",mb:2},ps=()=>{const[e,{toggle:t,inline:n}]=$(),{enqueueSnackbar:r}=U(),{initialFetch:a}=V();return c(S,{children:[i(w,{onClick:t,startIcon:e?i(kt,{}):i(_n,{}),sx:cs,variant:"outlined",children:e?"Tutup":"Tambah batch baru"}),i(Ne,{in:e,sx:{mb:2},timeout:"auto",children:i(Ee,{mutateKey:"createBatch",children:i(H,{sx:{padding:2,borderRadius:0},children:i(us,{onSuccess:d=>{r(`${d.name} berhasil di tambahkan`,{variant:"success"}),n(!1),a()}})})})})]})},hs=()=>{const[e,t]=u.exports.useState(""),n=v=>t(v),{actions:{removeParam:r,parameter:a,updateParameter:s},result:d,loading:l,hasResponse:p}=V();return i(F,{children:c("form",{onSubmit:v=>{s("search")(`%${e}%`),v.preventDefault()},onReset:()=>{r("search"),t("")},children:[i(A,{fullWidth:!0,disabled:l,variant:"standard",InputProps:{startAdornment:i(vn,{sx:{px:2},position:"start",children:i(St,{})})},sx:{bgcolor:"white","& input":{py:2}},placeholder:"Masukan kata kunci pencarian",name:"search",onChange:n,value:e,noUseForm:!0,size:"medium"}),c(h,{sx:{p:1,display:"flex",justifyContent:"flex-end"},children:[i(h,{sx:{display:p?"block":"none"},children:i(y,{variant:"caption",children:d.paginator.total?`Hasil pencarian : ${d.paginator.total} item`:`Data tidak di temukan dengan kata kunci "${a.search}"`})}),c(h,{sx:{ml:"auto"},children:[i(w,{type:"submit",startIcon:i(St,{}),disabled:l,children:"Cari"}),i(w,{type:"reset",startIcon:i(Cr,{}),disabled:l||!e,children:"Reset"})]})]})]})})},xi=({children:e,handleClose:t,open:n,isCloseDisabled:r})=>i(Be,{open:n,PaperProps:{sx:{minWidth:["80vw","50vw"]}},onClose:r?void 0:t,children:i(rt,{children:e})}),J=a=>{var s=a,{loading:e,disabled:t,icon:n}=s,r=N(s,["loading","disabled","icon"]);return i(w,x(g({},r),{startIcon:e?i(ne,{size:20}):n,type:"submit",disabled:t||e}))};function ze({message:e,show:t,variant:n,callback:r,autoShow:a}){const{enqueueSnackbar:s,closeSnackbar:d}=U(),l=()=>{const p=()=>typeof e=="function"?e():e;d(),s(p(),{variant:n})};return u.exports.useEffect(()=>(d(),()=>{d()}),[]),u.exports.useEffect(()=>{a&&t&&r&&r(),!a&&t&&(r&&r(),l())},[t,n]),l}function gs(e=""){const t=R();return{navigate:()=>{t(e)},to:a=>()=>t(a)}}const yi=({icon:e,text:t})=>c(h,{sx:{display:"inline-flex",alignItems:"center",mr:2},children:[i(h,{sx:{mr:2},children:e}),i(y,{variant:"caption",children:t})]}),ms=C(({batch:e,onSelect:t})=>{const n=`/classroom/${Ct(e.name).slugify().value()}/${e.id}/videos`,{navigate:r}=gs(n);return c(H,{sx:{p:2,mx:[1,0],mb:2,display:["block","flex"]},children:[c(h,{sx:{width:["100%","80%"]},children:[i(y,{variant:"h4",sx:{textTransform:"capitalize"},children:e.name}),i(yi,{text:`${e.student_count} siswa`,icon:i(Sr,{})}),i(yi,{text:`${e.video_count} video`,icon:i(Ir,{})})]}),c(h,{sx:{width:["100%","20%"],"& >button":{mb:1}},children:[i(w,{onClick:r,size:"small",fullWidth:!0,variant:"outlined",children:"Manage"}),i(w,{onClick:t(e,"update"),size:"small",fullWidth:!0,variant:"outlined",children:"Ganti nama batch"}),i(w,{onClick:t(e,"delete"),size:"small",fullWidth:!0,variant:"outlined",children:"Hapus"})]})]})}),fs=C(({selected:e,action:t,handleClose:n})=>{const r=Le({resolver:wt(Bt)}),[{response:a,loading:s},d]=qe({api:P.mutateGradeEdit,merge:{id:e?e.id:""}}),l=r.handleSubmit(d),p=ze({show:Boolean(a&&t==="update"),message:"Perubahan berhasil disimpan",variant:"success",autoShow:!1});return u.exports.useEffect(()=>{a&&(n(),p())},[a]),u.exports.useEffect(()=>{e&&r.setValue("name",e.name)},[e]),i(xi,{handleClose:n,open:t==="update",isCloseDisabled:s,children:i(K,x(g({},r),{children:c("form",{onSubmit:l,children:[i(y,{variant:"subtitle1",children:"Ganti nama batch"}),i(A,{fullWidth:!0,name:"name"}),i(J,{icon:i(it,{}),loading:s,children:"Simpan"})]})}))})}),xs=C(({selected:e,action:t,handleClose:n})=>{const[{response:r,loading:a},s]=qe({api:P.mutateGradeDelete,merge:{id:e?e.id:""}}),d=ze({message:r?`${r.name} berhasil di hapus`:"",autoShow:!1,variant:"success",show:Boolean(r)}),{initialFetch:l}=V();return u.exports.useEffect(()=>{r&&(d(),l(),n())},[r]),c(xi,{handleClose:n,open:t==="delete",isCloseDisabled:a,children:[c(y,{variant:"h5",children:["Apakah anda yakin untuk menghapus ",e?e.name:""," ?"]}),c(h,{sx:{pt:4,width:["100%","50%"],"& > button":{textTransform:"capitalize"}},children:[i(J,{onClick:()=>s({}),icon:i(Ce,{}),loading:a,children:"Hapus"}),i(w,{variant:"outlined",disabled:a,onClick:n,children:"Batal"})]})]})}),ys=C(()=>{const{result:{data:e}}=V(),[t,n]=u.exports.useState({selected:null,action:null}),{selected:r,action:a}=t,s=(l,p)=>()=>n({selected:l,action:p}),d=()=>{n({action:null,selected:r}),setTimeout(()=>{n({selected:null,action:null})},1e3)};return c(F,{children:[e.map(l=>i(ms,{batch:l,onSelect:s},l.id)),i(fs,x(g({},t),{handleClose:d})),i(xs,x(g({},t),{handleClose:d}))]})}),vs=()=>{const{initialFetch:e,loading:t,isEmpty:n,hasResponse:r}=V();return ts(),u.exports.useEffect(()=>{e()},[]),c(S,{children:[i(F,{children:i(ps,{})}),i(hs,{}),i(ys,{})]})},_s=()=>{const{setTitle:e}=Ht(),{updateNavs:t}=pe();u.exports.useEffect(()=>(e("Menagemen batch"),t([]),()=>{e("")}),[]);const n=es();return i(gt,{dataKey:"grades",children:i(hi.Provider,{value:n,children:i(vs,{})})})},bs=()=>i(_s,{}),ws=C(e=>{const{updateBackUrl:t}=pe();return u.exports.useEffect(()=>(t({url:"classroom",label:"kembali ke ruang kelas"}),()=>t(null)),[]),i(F,{children:i(bn,{})})}),Cs=C(e=>{const t=tt(),{updateBackUrl:n}=pe();return u.exports.useEffect(()=>{t.state&&t.state.backurl&&n(t.state.backurl)},[t]),i(F,{children:i(bn,{})})});function Ss(e,t){const n=$e(e),{data:r,setQuery:a,loading:s}=M(),d=()=>{a(m=>m[e](t))};u.exports.useEffect(()=>{d()},[]);const l=()=>r?r[n]:[],p=()=>{if(s)return!1;const m=r&&r[n];return m?m.length===0:!1};return{data:l(),isEmpty:p(),loading:s,fetch:d,hasResponse:Boolean(r)}}function vi(e){return t=>Ss(e,t)}const Is=vi(se.queryVideoByGrade),Ps={videoByGrade:Is,studentByGrade:vi(se.queryStudents)},_i=u.exports.createContext(null);function ks(){return u.exports.useContext(_i)}const $s=C(({dataKey:e,props:t={},children:n})=>{const r=Ps[e](t);return i(_i.Provider,{value:r,children:n})});function qs({api:e,provider:t,id:n}){const r=$e(e),a=b=>b[e]({id:n}),{loading:s,error:d,setQuery:l,data:p}=M(a),m=()=>l(a),f={refreshModel:m,pageLoading:s,error:Boolean(d),modelId:n,model:p?p[r]:null,hasResponse:Boolean(p&&p[r])};return x(g({},(()=>t?t(f):{})()),{refreshModel:m,pageLoading:s,error:Boolean(d),modelId:n,model:p?p[r]:null,hasResponse:Boolean(p&&p[r])})}const Ds=e=>{const[t,n]=u.exports.useState({page:e[0],animate:"opacity",animateDirection:"left"});return[t,a=>{const s=e.findIndex(p=>p===a),d=e.findIndex(p=>p===t.page),l=s>d?"left":"right";n({page:a,animateDirection:l,animate:"x"})}]},ft=["VIDEOS","ADD-VIDEO","STUDENTS","QUIZ-CHECK","DISCUSSION"];function Es(){Ds(ft),R();const{pathname:e}=tt(),[t,n]=u.exports.useState("Videos"),[r,a]=u.exports.useState({animate:"x",animateDirection:"left"});ot(),u.exports.useEffect(()=>{let d=e.split("/").pop();if(d==="batch"&&(d="videos"),d){if(!ft.includes(d.toLocaleUpperCase()))return;n(d.toLocaleUpperCase())}},[e]);const s=d=>{const l=ft.findIndex(f=>f===d),p=ft.findIndex(f=>f===t),m=l>p?"left":"right";a({animateDirection:m,animate:"x"})};return{pageControll:[x(g({},r),{page:t}),s]}}function zs({pageLoading:e,model:t,hasResponse:n}){const[r,a]=u.exports.useState(!1),[s,d]=u.exports.useState(!1),l=()=>d(!0),p=()=>d(!1);u.exports.useEffect(()=>{!e&&t&&n&&setTimeout(()=>{a(!0)},1e3)},[e,n,t]);const{pageControll:m}=Es();return{showpage:r,progress:s,pageControll:m,showProgress:l,hideProgress:p}}const Ms=e=>({api:se.queryGradeById,id:e,provider:zs}),bi=u.exports.createContext(null);function he(){return u.exports.useContext(bi)}function As(e){const{id:t,slug:n}=e,{setTitle:r}=Ht(),{updateNavs:a}=pe();return u.exports.useEffect(()=>{r(" "),a([]);const s=({path:l,label:p})=>({path:`/classroom/${n}/${t}/${l}`,label:p}),d=[{label:"Video",path:"videos"},{label:"Tambah video",path:"add-video"},{label:"Siswa",path:"students"},{label:"Periksa quis",path:"quiz-check"},{label:"Diskusi",path:"discussion"}].map(s);return a(d),()=>{r("")}},[t]),qs(Ms(t))}const xt=e=>C(()=>{const t=ot(),n=As(t);return u.exports.useEffect(()=>{n.refreshModel()},[]),i(bi.Provider,{value:n,children:i($s,{dataKey:"videoByGrade",props:{gradeId:t.id},children:n.pageLoading||!n.model?i(De,{}):i(e,{})})})}),Ts=({model:e})=>{const t=R(),{model:n}=he(),r=()=>t(`/admin/video/${e.id}/info`,{state:{backurl:{url:`/classroom/${n.name}/${n.id}/videos`,label:`Manage ke kelas ${n.name}`}}});return i(H,{sx:{mb:2},children:c(O,{container:!0,children:[i(O,{item:!0,sm:12,md:2,children:i(h,{component:"img",src:e.thumbnail,sx:{width:"100%",height:"100%"}})}),i(O,{item:!0,sm:12,md:8,children:i(h,{sx:{p:1},children:i(y,{variant:"h4",children:e.title})})}),i(O,{item:!0,sm:12,md:2,sx:{display:"flex",alignItems:"center",p:2},children:i(w,{onClick:r,fullWidth:!0,children:"Manage video"})})]})})},Vs=xt(C(()=>{const{data:e,fetch:t}=ks();return u.exports.useEffect(()=>{t()},[]),i(h,{sx:{py:5},children:e.map(n=>i(Ts,{model:n},n.id))})}));const Ye=({url:e,onPlaying:t,play:n=!1,playOnTime:r,playerRef:a,onPlayEnded:s})=>{const d=a||u.exports.useRef(null),[l,{toggle:p,inline:m}]=$(n);return u.exports.useEffect(()=>{r&&m(!1);const v=d.current;v&&r&&v.pause().then(()=>{v.callAdapter("setCurrentTime",r).catch(console.log)})},[r,d]),i(h,{children:c(Pr,{onVmPlaybackEnded:s,playsinline:!0,ref:d,onVmCurrentTimeChange:v=>{t&&setTimeout(()=>{t(parseInt(v.detail.toFixed(1)))},1e3)},children:[e?i(kr,{crossOrigin:"use-credentials",children:i("source",{"data-src":e})}):i(S,{}),i($r,{children:c(qr,{fullWidth:!0,children:[i(wn,{children:i(Dr,{})}),c(wn,{space:"top",children:[i(Er,{}),i(zr,{}),i(Mr,{separator:"/"})]})]})})]})})},Ls={noVideoText:"Silahkan pilih video terlebih dahulu",noVideoTextButton:"Pilih video",changeVideoTextButton:"Ganti video",changeVideoTextButton1:"Pilih video lainya",uploadVideoSuccess:"Video berhasil di tambahkan"};var Gs={videos:Ls};const Fs=({name:e})=>{const{errors:t}=Ar();if(!t[e])return i(u.exports.Fragment,{});const{message:n}=t[e];return i(Tr,{error:!0,children:n})},Us={backgroundColor:"white",position:"sticky",top:0,zIndex:10},wi=e=>{const t=JSON.parse(e);return typeof t!="object"?wi(t):t},Hs=e=>{const t=e.value;if(!t)return Y.EditorState.createEmpty();try{const n=wi(t);if(!("blocks"in n&&"entityMap"in n))return Y.EditorState.createEmpty();const a=Y.convertFromRaw(n);return Y.EditorState.createWithContent(a)}catch{return Y.EditorState.createEmpty()}};class Ns extends u.exports.Component{constructor(t){super(t);_(this,"EditorState");_(this,"reset",()=>{this.EditorState=Y.EditorState.createEmpty()});_(this,"onEditorChange",t=>{const{field:n}=this.props;this.EditorState=t,n.onChange(Y.convertToRaw(t.getCurrentContent()))});this.EditorState=Hs(this.props.field),typeof this.props.field.value=="string"&&this.props.field.onChange(Y.convertToRaw(this.EditorState.getCurrentContent())),this.props.editorRef&&(this.props.editorRef.current={reset:this.reset})}render(){const t=this.props.disableOptions?{options:[]}:{};return c(S,{children:[i(Cn.exports.Editor,{onEditorStateChange:this.onEditorChange,toolbarHidden:this.props.disableOptions,toolbarStyle:Us,editorState:this.EditorState,toolbar:t,editorStyle:{minHeight:300},placeholder:this.props.placeholder}),i(Fs,{name:this.props.field.name})]})}}const Bs=Vr(Ns),Qt=({name:e,editorRef:t,disableOptions:n=!1,placeholder:r=""})=>{const a=ie({name:e});return i(Bs,x(g({},a),{placeholder:r,editorRef:t,disableOptions:n}))},Ci={value:"__disabled__",label:"Pilih salah satu opsi"};class Si extends u.exports.Component{constructor(t){super(t);_(this,"options");_(this,"handleFormChange",t=>{if(this.props.controller){const{controller:n}=this.props;if(n){const{onChange:r}=n.field;r(t)}}this.props.onChange&&this.props.onChange(t)});_(this,"handleChange",t=>{const n=t.target.value;this.handleFormChange(n)});_(this,"findInOption",t=>this.options.find(n=>n.value===t));_(this,"getErrorProps",()=>{var n,r;if(!this.props.controller)return{};const{fieldState:t}=this.props.controller;return{error:Boolean(t.error),helperText:(r=(n=t.error)==null?void 0:n.message)!=null?r:""}});_(this,"getValue",()=>{const t=r=>{if(!r)return"__disabled__";const a=this.findInOption(r);return a?a.value:"__disabled__"};if(this.props.controller){const{field:{value:r}}=this.props.controller;return t(r)}const{value:n}=this.props;return t(n)});_(this,"getFieldProps",()=>{var s;const a=this.props,{options:t,controller:n}=a,r=N(a,["options","controller"]);return x(g(g({},r),this.getErrorProps()),{SelectProps:x(g({},(s=r.SelectProps)!=null?s:{}),{inputRef:n==null?void 0:n.field.ref}),onChange:this.handleChange,value:this.getValue()})});this.options=[Ci,...this.props.options]}render(){const t=this.getFieldProps();return i("div",{children:i(yn,x(g({},t),{select:!0,fullWidth:!0,children:this.options.map(n=>i(gn,{disabled:n.value===Ci.value,value:n.value,children:n.label},n.value))}))})}}const yt=Gs.videos,Rs=()=>{const e=He(),t=u.exports.useRef(null),[n,r]=u.exports.useState(""),a=d=>{const l=d.target.files?d.target.files[0]:null;if(l){e.setValue("content",l);const p=new FileReader;p.onloadend=()=>{r(p.result)},p.readAsDataURL(l)}},s=()=>{t.current&&t.current.click()};return Gr(()=>{var d;t.current&&((d=t.current)==null||d.addEventListener("change",a))}),[{inputRef:t,onClick:s},n]},Qs=e=>({minHeight:256,alignItems:"center",justifyContent:"center",display:e?"flex":"block","& > .video-wrapper":{width:"100%",background:"black"}}),Os=()=>{const[{onClick:e,inputRef:t},n]=Rs(),a=He().formState.errors,{enqueueSnackbar:s,closeSnackbar:d}=U();return u.exports.useEffect(()=>{a.content&&(d(),s(a.content.message,{variant:"error"}))},[a]),c(h,{sx:Qs(!n),children:[i("input",{style:{display:"none"},type:"file",accept:"video/*",ref:t}),n?i("div",{className:"video-wrapper",children:i(Ye,{url:n})}):i(S,{}),c("div",{children:[n?null:i(y,{children:yt.noVideoText}),i(w,{onClick:e,children:n?yt.changeVideoTextButton1:yt.changeVideoTextButton})]})]})},Ws=C(()=>{const{form:e,reset:t,response:n,loading:r,handler:a}=_e(),{pageControll:s,showProgress:d,hideProgress:l}=he(),p=s[1];return u.exports.useEffect(()=>{(r?d:l)()},[r]),ze({message:yt.uploadVideoSuccess,show:Boolean(n),callback(m){p("VIDEOS")},variant:"success"}),i(K,x(g({},e),{children:c(O,{container:!0,spacing:2,onSubmit:a,component:"form",children:[i(O,{item:!0,xs:12,md:8,children:i(Os,{})}),i(O,{item:!0,xs:12,md:4,children:c(h,{sx:{pt:2},children:[i(A,{sx:{mb:3},label:"Judul video",name:"title",fullWidth:!0}),i(A,{sx:{mb:3},label:"Caption video",name:"caption",fullWidth:!0})]})}),c(O,{item:!0,xs:12,children:[i(h,{sx:{p:[0,2]},children:i(Qt,{placeholder:"Deskripsi video",name:"description"})}),i(h,{sx:{p:[0,2],mt:3},children:i(J,{variant:"outlined",fullWidth:!0,icon:i(Lr,{}),loading:r,children:"Upload video"})})]})]})}))}),js=e=>(e.description=JSON.stringify(e.description),g({},e)),Js=()=>{const{modelId:e}=he();return i(Ee,{parser:js,merge:{gradeId:e},mutateKey:"addVideo",children:i(h,{sx:{mb:5},children:i(Ws,{})})})},Ks=C(({videos:e})=>{var k;const t=e.map(I=>({label:I.title,value:I.id})),{modelId:n,model:r}=he(),a=R(),{enqueueSnackbar:s}=U(),[{loading:d,response:l},p]=qe({api:P.mutateAddVideoInGrade,merge:{gradeId:n}});u.exports.useEffect(()=>{l&&(s("Video berhasil di tambahkan",{variant:"success"}),a(`/batch/${r.name}/${r.id}/videos`))},[l]);const m=Le(),f=ie({control:m.control,name:"videoId",defaultValue:t[0].value}),v=e.find(I=>I.id===f.field.value),b=m.handleSubmit(p);return c(h,{sx:{minHeight:"50vh",display:["block","flex"],"& > div":{p:1}},children:[i(h,{sx:{width:["100%","70%"],overflow:"hidden"},children:i(le,{exitBeforeEnter:!0,children:i(G.div,{transition:{x:{type:"tween"}},initial:{x:"-200%"},animate:{x:0},exit:{x:"200%"},children:v&&i(Ye,{url:v.content})},(k=v==null?void 0:v.id)!=null?k:"video-id")})}),c(h,{component:"form",onSubmit:b,sx:{width:["100%","30%"]},children:[i(Si,x(g({noUseForm:!0,disabled:d,size:"small"},f.field),{options:t,name:"videoId"})),i(J,{sx:{mt:2,textTransform:"none"},fullWidth:!0,icon:i(it,{}),loading:!1,children:"Simpan"})]})]})}),Ys=C(()=>{const{modelId:e}=he(),{data:t,loading:n}=M(s=>s.queryVideoNotInGrade({id:e})),a=(()=>{var s;return t?(s=t.videoNotInGrade)!=null?s:[]:[]})();return i(le,{exitBeforeEnter:!0,children:i(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n?i(h,{sx:{py:5,display:"flex",justifyContent:"center"},children:c(h,{sx:{textAlign:"center"},children:[i(ne,{size:50}),i(y,{sx:{display:"block"},variant:"caption",children:"Loading"})]})}):i(H,{sx:{p:2},children:a.length?i(Ks,{videos:a}):i(y,{align:"center",variant:"subtitle1",children:"Tidak ada video yang dapat di pilih"})})},n?"loading":"oke")})}),Xs=xt(()=>(he(),c(S,{children:[i(y,{color:"primary",sx:{mt:2},variant:"h5",children:"Pilih dari video yang telah terupload"}),i(Q,{sx:{my:2}}),i(Ys,{}),i(y,{color:"primary",sx:{mt:2},variant:"h5",children:"Upload video baru"}),i(Q,{sx:{my:2}}),i(H,{sx:{p:1,mb:5},children:i(Js,{})})]}))),Zs=C(({rows:e,columns:t,paginator:n,paginationHandler:r,onRowClick:a})=>i(S,{children:i(Fr,{pagination:!0,paginationMode:"server",onRowClick:l=>a&&a(l.row),onPageChange:l=>{r(l+1,n.perPage)},onPageSizeChange:l=>{r(1,l+1)},page:n.currentPage?n.currentPage-1:1,rowsPerPageOptions:[10,20,30],rowCount:n.total-1,pageSize:n.perPage,rows:[...e],columns:t,autoHeight:!0})}));function ed(){const[e,t]=u.exports.useState({user:null,action:"activation"}),n=s=>{t({user:s,action:s.status?"edit":"activation"})},r=()=>{t({user:null,action:"activation"})},a=s=>{t(x(g({},e),{action:s}))};return x(g({},e),{changeStudent:n,handleClose:r,changeAction:a})}const Ii=u.exports.createContext(null);function Me(){return u.exports.useContext(Ii)}const td={activation:"activation",edit:"editUser"},nd=e=>t=>(e&&(e.name===t.name&&delete t.name,e.email===t.email&&delete t.email),t);function Ot(e,t){const{enqueueSnackbar:n}=U(),{handleClose:r}=Me(),{initialFetch:a}=V();u.exports.useEffect(()=>{e&&(r(),n(t,{variant:"success"}),a())},[e])}const id=C(({onLoading:e})=>{const{loading:t,form:n,handler:r,response:a}=_e();U();const{handleClose:s,user:d}=Me();return V(),Ot(a,`${d==null?void 0:d.name} berhasil di aktifkan`),u.exports.useEffect(()=>{e(t)},[t]),c(K,x(g({},n),{children:[i(h,{sx:{p:1,mb:3,border:"solid 1px gray",borderRadius:1},children:i(y,{children:"Gunakan form ini untuk mengaktifkan akun & memberikan password ke pada pengguna agar dapat login dengan password yang diberikan."})}),c("form",{onSubmit:r,children:[i(A,{autoComplete:"off",fullWidth:!0,variant:"outlined",name:"password",type:"password",label:"Password"}),i(A,{sx:{my:2},fullWidth:!0,type:"password",variant:"outlined",name:"passwordConfirmation",label:"Konfirmasi password"}),i(J,{icon:i(Ur,{}),loading:t,children:"Aktifkan akun"})]})]}))}),rd=C(({onLoading:e})=>{const{loading:t,form:n,handler:r,response:a,error:s}=_e();Ot(a,"Perubahan berhasil di simpan"),u.exports.useEffect(()=>{s&&n.setError("email",{type:"backend",message:"Email telah di gunakan"})},[s]);const{user:d}=Me();return u.exports.useEffect(()=>{d&&(n.setValue("name",d.name),n.setValue("email",d.email))},[d]),u.exports.useEffect(()=>{e(t)},[t]),i(K,x(g({},n),{children:c("form",{onSubmit:r,children:[i(A,{sx:{mb:2},fullWidth:!0,variant:"outlined",name:"email",label:"Email"}),i(A,{sx:{mb:2},fullWidth:!0,variant:"outlined",name:"name",label:"Nama"}),i(J,{icon:i($t,{}),loading:t,children:"Simpan perubahan"})]})}))}),od=C(()=>{const{user:e}=Me(),[{loading:t,response:n,error:r},a]=qe({api:P.mutateUserDelete,merge:{id:e==null?void 0:e.id}});return console.log(r),Ot(n,"Pengguna berhasil di hapus"),c("div",{children:[c(y,{variant:"subtitle1",children:["Apakah anda yakin untuk menhapus akun ",e==null?void 0:e.name," ?"]}),i(J,{onClick:()=>a({}),sx:{my:2},icon:i(Ce,{}),loading:t,children:"Hapus"})]})}),ad={activation:id,edit:rd,delete:od},sd=()=>{const{user:e,handleClose:t,action:n,changeAction:r}=Me(),a=e?ad[n]:u.exports.Fragment,[s,{inline:d}]=$(),l=!e||n==="delete"?"":td[n],p=e&&n!=="delete"?Ee:u.exports.Fragment,m=e&&n!=="delete"?{mutateKey:l,parser:nd(e),merge:{id:e.id}}:{};return c(Sn,{sx:{zIndex:100*100},onClose:s?void 0:t,open:Boolean(e),PaperProps:{sx:{width:["100vw","20vw"],overflow:"hidden"}},anchor:"right",children:[c(fn,{onChange:(f,v)=>r(v),value:n,children:[i(nt,{sx:{textTransform:"none"},value:"edit",label:"Edit"}),i(nt,{sx:{textTransform:"none"},value:"activation",label:"Aktivasi akun",disabled:e&&e.status}),i(nt,{sx:{textTransform:"none"},value:"delete",label:"Hapus"})]}),i(le,{exitBeforeEnter:!0,children:i(G.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},transition:{x:{type:"tween"}},children:i(h,{sx:{p:2},children:i(p,x(g({},m),{children:i(a,g({},e?{onLoading:d}:{}))}))})},n)})]})},dd=[{field:"name",headerName:"Nama siswa",flex:1},{field:"email",headerName:"Alamat email",flex:1},{field:"status",headerName:"Status",flex:.2,valueGetter(e){return e.row.status?"Aktif":"Non aktif"}}],ld=C(()=>{const[e,{toggle:t,force:n}]=$(),{loading:r,form:a,handler:s,response:d}=_e(),{initialFetch:l}=V();return ze({message:"Siswa berhasil di tambahkan",show:Boolean(d),variant:"success",callback(p){n(!1)(),a.reset(),l()}}),c(H,{sx:{p:2,mt:2},children:[i(w,{color:e?"error":"primary",onClick:t,children:e?"Tutup":"Tambahkan siswa"}),i(Ne,{sx:{mt:e?2:0},in:e,children:c(O,{container:!0,children:[i(O,{item:!0,xs:12,md:6,children:i(K,x(g({},a),{children:c("form",{onSubmit:s,children:[i(A,{sx:{mb:4},label:"Nama siswa",name:"name",fullWidth:!0}),i(A,{type:"email",label:"Alamat email",fullWidth:!0,name:"email"}),i(J,{sx:{mt:3},icon:i(_n,{}),loading:r,children:"Simpan"})]})}))}),i(O,{item:!0,xs:12,md:6,sx:{px:2},children:i(y,{variant:"subtitle1",children:"Tambahkan siswa dengan mengirim email invitasi yang akan di daftarkan, siswa dapat login dengan link yang di berikan untuk mengganti password."})})]})})]})}),ud=C(()=>{const{result:e,initialFetch:t,actions:{go:n}}=V();u.exports.useEffect(()=>{t()},[]);const r=e.data.map(s=>({name:s.student.name,email:s.student.email,id:s.student.id,status:s.student.active})),{changeStudent:a}=Me();return i(h,{sx:{py:2},children:i(Zs,{onRowClick:a,paginationHandler:n,paginator:e.paginator,columns:dd,rows:r})})}),cd=xt(()=>{const{modelId:e}=he(),t=ed();return c(gt,{dataKey:"students",includes:{gradeId:e},children:[i(Ee,{parser:n=>({args:n}),merge:{grade_id:e},mutateKey:"addUser",children:i(ld,{})}),c(Ii.Provider,{value:t,children:[i(sd,{}),i(ud,{})]})]})}),pd=e=>i("div",{children:i("h1",{children:"Quiz check"})});function hd(e){const{user:t}=oe(),[n,r]=u.exports.useState(null),a=u.exports.useCallback(p=>(t==null?void 0:t.id)===p.user_id,[t]),[s,d]=u.exports.useState(null),l=()=>s&&(n==="edit"||n==="editReply")?s.content:null;return{enableCrud:a,setFormMode:r,formMode:n,gradeId:e,userId:t==null?void 0:t.id,setSelected:d,initialContent:l(),selectedId:s?s.id:""}}const Pi=u.exports.createContext(null),Ae=()=>u.exports.useContext(Pi),gd="Thread berhasil ditambahkan",md="Perubahan berhasil disimpan",fd="Balasan anda berhasil di tambahkan",xd="Perubahan berhasil disimpan";var yd={create:gd,edit:md,addReply:fd,editReply:xd};const vd=C(()=>{const{formMode:e,setFormMode:t,initialContent:n,setSelected:r,selectedId:a}=Ae(),{loading:s,form:d,response:l,handler:p,reset:m}=_e(),{initialFetch:f}=V();u.exports.useEffect(()=>{n&&e&&d.setValue("content",n)},[n,e]);const v=()=>{s||(m(),t(null))},b=u.exports.useCallback(()=>e?yd[e]:"",[e]);return ze({message:b(),show:Boolean(l),callback:()=>{r(null),t(null),v(),f()},variant:"success"}),i(Be,{fullWidth:!0,open:Boolean(e),onClose:v,children:i(K,x(g({},d),{children:i(h,{sx:{p:2},children:c("form",{onSubmit:p,children:[i(Re,{children:"Konten diskusi : "}),i(Qt,{name:"content"}),i(J,{icon:i(qt,{}),loading:s,children:"Simpan"})]})})}))})}),_d=Hr(e=>({root:{"& > *":{fontFamily:"Roboto!important"}},editor:{"& > *":{fontFamily:"Roboto!important"}}})),ki=e=>{const t=JSON.parse(e);return typeof t=="string"?ki(t):t},vt=({data:e})=>{const t=_d();try{const n=Y.convertFromRaw(ki(e)),r=Y.EditorState.createWithContent(n);return i("div",{className:t.root,children:i(Cn.exports.Editor,{editorClassName:t.editor,toolbarHidden:!0,readOnly:!0,toolbar:{},editorState:r})})}catch(n){return console.log(n),null}},$i=u.exports.createContext(null),Wt=()=>u.exports.useContext($i),bd=()=>{const{open:e,handleCloseDialog:t,getContentText:n,loading:r,onConfirm:a}=Wt();return c(Be,{open:e,onClose:t,children:[i(rt,{children:n()}),c(Dt,{children:[i(w,{disabled:r,onClick:t,startIcon:i(Nr,{}),children:"Batal"}),i(J,{color:"error",onClick:a,icon:i(Ce,{}),loading:r,children:"Hapus"})]})]})},wd=({api:e,callback:t,getSuccesMessage:n,getContentText:r})=>{const[a,s]=u.exports.useState(e),d=$e(a),{loading:l,data:p,setQuery:m}=M(),[f,v]=u.exports.useState(null),[b,k]=u.exports.useState(!0);ze({message:n?n():"Data berhasil di hapus",callback(){v(null),t(),k(!0)},variant:"success",show:Boolean(p&&p[d])&&!b,autoShow:!1});const I=()=>{l||v(null)},z=(ge,te)=>()=>{s(te||e),v(ge.id)},ee=()=>(k(!1),m(ge=>ge[a]({id:f})));return{open:Boolean(f),loading:l,handleCloseDialog:I,handleOpenDialog:z,getContentText:r,Dialog:bd,onConfirm:ee}},Cd=({model:e})=>{const{setSelected:t,setFormMode:n}=Ae(),{handleOpenDialog:r}=Wt(),a=r(e,P.mutateDeleteDiscussionReply);return c(h,{sx:{py:1,textAlign:"right"},children:[i(we,{color:"primary",onClick:()=>{t(e),n("editReply")},children:i($t,{})}),i(we,{color:"error",onClick:a,children:i(Ce,{})})]})},Sd=({model:e})=>{const{enableCrud:t}=Ae();return c(h,{sx:{p:1,ml:[0,3,10]},children:[c(h,{sx:{display:"flex",py:1},children:[i(h,{children:i(In,{src:"/test.png",alt:e.user.name})}),c(h,{children:[i(y,{sx:{ml:1},variant:"subtitle2",children:e.user.name}),i(y,{sx:{ml:1},variant:"subtitle2",children:e.created_at})]})]}),i(Q,{}),i(vt,{data:e.content}),t(e)?i(Cd,{model:e}):null,i(Q,{})]})},Id=({replies:e})=>i(S,{children:e.map(t=>i(Sd,{model:t},t.id))}),Pd=({model:e})=>{const{setSelected:t,setFormMode:n,enableCrud:r}=Ae(),{handleOpenDialog:a}=Wt(),s=u.exports.useCallback(()=>{t(e),n("edit")},[]),d=a(e);return c(h,{sx:{display:"flex"},children:[c(h,{sx:{display:"flex",alignItems:"center"},children:[i(h,{children:i(In,{src:"/test.png",alt:e.user.name})}),c(h,{children:[i(y,{sx:{ml:1},variant:"subtitle2",children:e.user.name}),i(y,{sx:{ml:1},variant:"subtitle2",children:e.created_at})]})]}),r(e)?c(h,{sx:{ml:"auto"},children:[i(Et,{title:"Hapus",children:i(we,{color:"error",onClick:d,children:i(Ce,{})})}),i(Et,{title:"Edit",children:i(we,{color:"primary",onClick:s,children:i($t,{})})})]}):null]})},kd=({model:e})=>{const{setSelected:t,setFormMode:n}=Ae();u.exports.useCallback(()=>{t(e),n("edit")},[]);const[r,a]=u.exports.useState(!1),s=u.exports.useCallback(()=>{t(e),n("addReply")},[]);return c(H,{sx:{mb:2},children:[i(h,{sx:{p:2},children:i(Pd,{model:e})}),i(Q,{}),i(h,{sx:{p:2},children:i(vt,{data:e.content})}),i(Q,{}),c(h,{sx:{p:2},children:[c(h,{sx:{display:"flex"},children:[i(w,{startIcon:i(qt,{}),onClick:()=>a(!r),sx:{textTransform:"none"},children:"Tampilkan komentar"}),i(w,{startIcon:i(Br,{}),onClick:s,sx:{textTransform:"none",ml:"auto"},children:"Buat komentar"})]}),c(Ne,{in:r,unmountOnExit:!0,children:[e.replies.length?null:i(y,{variant:"h5",align:"center",sx:{py:3},children:"Thread ini belum memiliki komentar"}),i(Id,{replies:e.replies})]})]})]})},$d=C(()=>{const{setFormMode:e}=Ae(),{isEmpty:t,initialFetch:n,result:{data:r}}=V();u.exports.useEffect(()=>{n()},[]);const a=u.exports.useCallback(()=>{e("create")},[]),s=wd({api:P.mutateDeleteDiscussion,callback:n,getContentText(){return"Apakah anda yakin untuk menghapus thread diskusi ini ? "}});return c($i.Provider,{value:s,children:[i(s.Dialog,{}),t?c(h,{sx:{textAlign:"center",py:5},children:[i(y,{align:"center",variant:"h5",children:"Saat ini tidak ada thread diskusi"}),i(w,{onClick:a,sx:{textTransform:"none"},children:"Klik disini untuk menambahkan"})]}):null,c(F,{children:[i(h,{sx:{my:2},children:i(w,{startIcon:i(qt,{}),onClick:a,children:"Buat thread diskusi"})}),r.map(d=>i(kd,{model:d},d.id))]})]})}),qd={addReply:"addDiscussionReply",create:"addDiscussion",edit:"editDiscussion",editReply:"editDiscussionReply"},qi=({gradeId:e})=>{const t=hd(e),n=t.formMode?qd[t.formMode]:"addDiscussion",r=({content:a})=>{const s={content:JSON.stringify(a),userId:t.userId,gradeId:e};return t.formMode==="addReply"&&t.selectedId?s.discussionId=t.selectedId:t.selectedId&&(t.formMode==="edit"||t.formMode==="editReply")&&(s.id=t.selectedId),s};return i(Pi.Provider,{value:t,children:c(gt,{dataKey:"discussion",includes:{gradeId:e},children:[i(Ee,{mutateKey:n,parser:r,children:i(vd,{})}),i($d,{})]})})},Dd=xt(()=>{const{modelId:e}=he();return i(qi,{gradeId:e})}),Ed=({id:e})=>{const{data:t,loading:n,setQuery:r}=M(),a=()=>{r(d=>d.queryVideo({id:e},l=>l.id.content.caption.description.duration.quiz_count.thumbnail.title.grades(p=>p.id.name)))},{setTitle:s}=Ht();return u.exports.useEffect(()=>(s("Menagamen video"),()=>s("")),[]),u.exports.useEffect(()=>{a()},[e]),{video:t?t.video:null,isNotFound:t&&!t.video,loading:n}},Di=u.exports.createContext(null);function Xe(){return u.exports.useContext(Di)}const zd=[{path:"info",name:"Informasi video"},{path:"quiz",name:"Quis"},{path:"edit",name:"Edit"}];function jt(e){return C(()=>{const t=ot(),n=Ed(t),{updateNavs:r}=pe();return u.exports.useEffect(()=>{const a=d=>`/admin/video/${t.id}${d?`/${d}`:""}`,s=zd.map(d=>({label:d.name,path:a(d.path==="/"?"":d.path)}));r([...s])},[]),i(Di.Provider,{value:n,children:!n.video||n.loading?i(De,{}):i(e,{})})})}const Ei=jt(()=>{const{video:e}=Xe(),t=R(),n=({id:a,name:s})=>()=>t(`/classroom/${s}/${a}/videos`),r=`/admin/video/${e==null?void 0:e.id}/quiz`;return c("div",{children:[i(h,{sx:{mb:2},children:i(Ye,{url:e==null?void 0:e.content})}),c(h,{sx:{display:"flex",mb:5},children:[i(h,{sx:{width:"70%"},children:c(h,{sx:{p:2,pl:0},children:[c(h,{sx:{p:1,border:"solid 1px",borderColor:a=>a.palette.grey.A400,borderRadius:1},children:[i(y,{variant:"h5",children:e==null?void 0:e.title}),i(y,{variant:"subtitle1",children:e==null?void 0:e.caption})]}),i(y,{sx:{my:1},variant:"subtitle1",children:"Deskripsi video"}),i(h,{sx:{p:1,border:"solid 1px",borderColor:a=>a.palette.grey.A400,borderRadius:1},children:i(vt,{data:e==null?void 0:e.description})})]})}),i(h,{sx:{width:"30%"},children:c(H,{sx:{p:1,minHeight:500},children:[i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:"Jumlah quiz"}),c(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{variant:"button",sx:{cursor:"pointer",display:"block",textTransform:"none"},children:(e==null?void 0:e.quiz_count)?`${e.quiz_count} kuis`:"-"}),i(w,{to:r,sx:{textTransform:"none"},component:Rr,children:(e==null?void 0:e.quiz_count)?"Tampilkan quis":"Buat quis"})]}),i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:"Batch / Kelas"}),i(Q,{}),i(Pn,{dense:!0,children:e==null?void 0:e.grades.map(a=>i(kn,{dense:!0,onClick:n(a),sx:{bgcolor:s=>s.palette.grey["200"]},button:!0,children:i($n,{primary:a.name})},a.id))})]})})]})]})}),be=["A","B","C","D"],zi=be.map((e,t)=>({content:"",type:"text",index:t})),Md=be.map((e,t)=>({content:null,type:"image",index:t}));function Ad({video:e}){const[t,n]=u.exports.useState({type:T.IMAGE_MATCH,text:"",multipleChoise:{answer:0,question:"",additionalFile:null,type:"text"}}),[r,a]=u.exports.useState(zi);return u.exports.useEffect(()=>{console.log("called"),t.multipleChoise.type==="text"?a([...zi]):a([...Md])},[t.multipleChoise]),{multipleChoiseOptions:r,formValues:t,callbacks:{onMultipleChoiseChange:f=>v=>{const b=x(g({},t.multipleChoise),{[f]:v});n(x(g({},t),{multipleChoise:g({},b)}))},onTextChange:f=>{n(x(g({},t),{text:f}))},changeMultipleChoiseOptions:f=>v=>{const b=[...r];b[f].content=v,a([...b])}},changeType:f=>{const v=x(g({},t),{text:"",type:f});f===T.MULTIPLE_CHOICE&&(v.multipleChoise={answer:0,type:"text",question:"",additionalFile:null}),n(g({},v))},video:e}}const Mi=u.exports.createContext(null);function Ai(){return re({name:"type",defaultValue:T.IMAGE_MATCH})}function Ti(){return u.exports.useContext(Mi)}const Td=()=>{const{video:e}=Ti(),[t,n]=u.exports.useState(0),r=(l,p)=>n(p),[a,{toggle:s}]=$(!1),d=ie({name:"showAt",defaultValue:0});return u.exports.useEffect(()=>{d.field.onChange(t)},[t]),c(h,{paddingY:2,children:[i(Ye,{url:e.content,play:a,playOnTime:t}),c(h,{marginTop:1,children:[i(Re,{children:"Di tampilkan pada menit"}),i(h,{children:i(Qr,{min:0,max:e.duration,track:!1,onChange:r,valueLabelDisplay:"off"})}),c(h,{display:"flex",justifyContent:"space-between",children:[i(y,{variant:"subtitle2",children:Je(0)}),i(y,{variant:"subtitle2",children:Je(t)}),i(y,{variant:"subtitle2",children:Je(e.duration)})]})]})]})},Vd=[{label:"Pilihan ganda",value:T.MULTIPLE_CHOICE},{label:"Pencocokan gambar",value:T.IMAGE_MATCH},{label:"Pengurutan huruf",value:T.LETTER_SEQUENCE}],Ld=()=>{Ti();const e=re({name:"type",defaultValue:T.IMAGE_MATCH}),{field:{onChange:t}}=ie({name:"type",defaultValue:T.IMAGE_MATCH}),n=He();return u.exports.useEffect(()=>{n.setValue("text","")},[e]),i(h,{sx:{py:2},children:c(qn,{component:"fieldset",children:[i(Re,{component:"legend",children:"Jenis quis"}),i(Dn,{value:e,onChange:t,row:!0,name:"row-radio-buttons-group",children:Vd.map(r=>i(En,{value:r.value,control:i(zn,{}),label:r.label},r.value))})]})})},Vi=({label:e,onlyUnique:t=!1})=>{const[n,{inline:r}]=$(),a=re({name:"text"}),s=l=>{if(Ct(l.key).isNumeric()){l.preventDefault();return}n&&r(!1),a.includes(l.key)&&(l.preventDefault(),r(!0))};let d={size:"small",fullWidth:!0,helperText:n?"Huruf telah di gunakan":"",error:n,name:"text"};return t&&(d.onKeyDown=s),i(h,{sx:{pr:2},children:i(A,x(g({name:"text"},d),{label:e}))})},Gd=()=>i(S,{children:i(Vi,{label:"Masukan huruf yang digunakan",onlyUnique:!0})}),Fd=()=>i(S,{children:i(Vi,{label:"Masukan Kata yang di gunakan"})}),Li=u.exports.createContext(null),Gi=()=>u.exports.useContext(Li);class Ud extends u.exports.Component{constructor(t){super(t);_(this,"fileRef");_(this,"handler",()=>{this.fileRef.current&&this.fileRef.current.click()});_(this,"getContext",()=>g({clickHandler:this.handler,reset:this.reset},this.state));_(this,"setFormValue",t=>{const{field:n}=this.props.controller;n.onChange(t)});_(this,"reset",()=>{const{field:t}=this.props.controller;t.onChange(void 0),this.setState({previewUrl:"",type:""})});_(this,"onChange",t=>{const n=t.target.files;if(n&&n.length){const r=n[0],a=URL.createObjectURL(r);this.setState({previewUrl:a,type:r.type},()=>{this.props.controller&&this.setFormValue(r)})}});var n;this.fileRef=u.exports.createRef(),this.state={previewUrl:(n=this.props.initialUrl)!=null?n:"",type:""}}render(){return c(Li.Provider,{value:this.getContext(),children:[this.props.children,i("input",{ref:this.fileRef,onChange:this.onChange,type:"file",accept:this.props.accept,style:{display:"none"}})]})}}const Hd=r=>{var a=r,{children:e,name:t}=a,n=N(a,["children","name"]);const s=ie({name:t});return i(Ud,x(g({name:t},n),{controller:s,children:e}))},Nd=()=>{const{previewUrl:e,reset:t,clickHandler:n}=Gi();return c(h,{sx:{position:"relative",backgroundColor:"black",display:"flex",justifyContent:"center"},children:[i(h,{component:"img",src:e,sx:{maxHeight:144,maxWidth:256}}),i(Et,{title:"Ganti foto",children:i(we,{color:"secondary",onClick:()=>{t(),n()},size:"small",style:{top:0,right:0,position:"absolute"},children:i(Ce,{})})})]})},Bd=({label:e})=>{const{clickHandler:t,previewUrl:n}=Gi();return c(S,{children:[i(w,{fullWidth:!0,size:"small",variant:"contained",color:"primary",onClick:t,children:e}),i(h,{textAlign:"center",paddingY:2,children:n?i(Nd,{}):null})]})},Fi=({name:e,label:t})=>i(Hd,{accept:"image/*",name:e,children:i(Bd,{label:t})}),Rd=[{label:"Text",value:"text"},{label:"Gambar",value:"image"}],Qd=()=>{re({name:"multipleChoice.type",defaultValue:"text"});const{field:e}=ie({name:"multipleChoice.type",defaultValue:"text"});return c(qn,{component:"fieldset",children:[i(Re,{component:"legend",children:"Jenis pilihan ganda"}),i(Dn,x(g({},e),{row:!0,children:Rd.map(t=>i(En,{value:t.value,control:i(zn,{}),label:t.label},t.value))}))]})},Od={init:{y:"-350%",opacity:0},exit:{y:"350%",opacity:0},animate:{y:0,opacity:1}},Wd=s=>{var d=s,{index:e,delay:t,value:n,type:r}=d,a=N(d,["index","delay","value","type"]);const l=`multipleChoice.options.[${e}].content`,p=`Opsi ${be[e]}`;return i(G.div,{style:{overflowX:"hidden"},transition:{y:{delay:t,type:"tween"},opacity:{delay:t}},variants:Od,animate:"animate",initial:"init",exit:"exit",children:i(h,{sx:{my:2,pr:2},children:r==="image"?c(S,{children:[i(y,{children:p}),i(Fi,{name:l,label:"Pilih gambar"})]}):i(A,{size:"small",label:p,fullWidth:!0,name:`multipleChoice.options.[${e}].content`})})})},jd=()=>{const{field:e}=ie({name:"multipleChoice.answer",defaultValue:0});return i(Si,x(g({noUseForm:!0},e),{label:"Opsi jawaban yang benar",size:"small",sx:{my:2,pr:2},options:be.map((t,n)=>({value:n+1,label:`Opsi ${t}`}))}))},Jd=()=>{const e=re({name:"multipleChoice.type",defaultValue:"text"});ie({name:"multipleChoice.additionalFile",defaultValue:""});const t=He();return u.exports.useEffect(()=>{be.forEach((n,r)=>{const a=`multipleChoice.options.[${r}].content`;t.setValue(a,"")})},[e]),c("div",{style:{overflow:"hidden"},children:[c(h,{sx:{pr:2,mb:2},children:[i(A,{sx:{my:2},label:"Masukan pertanyaan quis",name:"multipleChoice.question",size:"small",fullWidth:!0}),i(Fi,{name:"multipleChoice.additionalFile",label:"Upload foto soal tambahan"})]}),i("div",{children:i(Qd,{})}),c("div",{children:[i(h,{children:i(le,{exitBeforeEnter:!0,children:be.map((n,r)=>u.exports.createElement(Wd,x(g({},n),{type:e,index:r,width:e==="image"?"100%":"50%",key:`${n}-${e}`,delay:(r+1)*.1,label:be[r]})))})}),i(jd,{})]})]})},Ui=u.exports.createContext(null),Te=()=>u.exports.useContext(Ui),Jt=n=>{var r=n,{children:e}=r,t=N(r,["children"]);const{show:a,handleClose:s}=t,d=u.exports.useRef(null),[l,p]=u.exports.useState({height:0,width:0});return u.exports.useEffect(()=>{if(d.current&&a){const m=d.current;p({height:window.innerHeight-m.clientHeight,width:"100vw"})}},[a,d]),c(Sn,{keepMounted:!0,open:a,anchor:"bottom",sx:{zIndex:1e3*1e3},PaperProps:{sx:{minHeight:"100vh",width:"100vw"}},onClose:()=>s(!1),children:[i(Fe,{color:"transparent",variant:"outlined",elevation:0,ref:d,sx:{position:"static"},children:i(Ue,{children:i(w,{onClick:()=>s(!1),children:"Tutup"})})}),i(Ui.Provider,{value:x(g({},l),{show:a,handleClose:s}),children:i(h,{sx:x(g({},l),{overflow:"hidden"}),children:l.height?e:i("p",{children:"lol"})})})]})},Hi=[];Object.keys(zt).forEach(e=>{e!=="transparent"&&Object.keys(zt[e]).forEach(t=>{Hi.push(zt[e][t])})});const Ni=Hi,Bi=e=>{const t=Mn.random.arrayElement(Ni);return Qe.exports.find(e,t)?Bi(e):t},Kd=(e,t,n)=>({id:`rect-${e}-node`,text:t,bg:Bi(n)});function Yd({stage:e,text:t}){return(n,r)=>{if(!e)return[0,0];const s=(e.width()-t.length)/t.length;return{x:r?s*r:0,y:0,width:s,height:s/2}}}const Xd=(e,t)=>new Or.Arrow({stroke:e,strokeWidth:5,globalCompositeOperation:"source-over",points:t}),Zd=e=>[e.getClientRect().x+e.getClientRect().width/2,e.height()];function el({x:e,y:t},n){const r=n.y(),a=n.x()+n.width(),s=n.x(),d=n.y()+n.width(),l=e>=s&&e<=a,p=t>=r&&t<=d;return l&&p}const tl=(e,t,n)=>{const{bgColor:r}=n,a=[...Zd(e),t.x,t.y];return Xd(r,a)},nl=(e,t="text")=>e==null?void 0:e.find("Group").toArray().filter(n=>n.getAttr("data-role")===t),il=({index:e,stage:t,nodes:n,layer:r})=>a=>{if(n[e].hasArrow)return new Promise(b=>b({nodes:n,arrow:null}));const d=a.currentTarget,l=t.getPointerPosition(),m=n[e].bg,f=tl(a.target,l,{bgColor:m});f.setAttr("data-from",d.getAttr("data-letter"));const v=(b,k)=>{b.points(k),r.batchDraw()};return r.add(f),new Promise(b=>{t.on("mouseup touchend",()=>{const I=nl(t,"image").find(ee=>el(t.getPointerPosition(),ee));let z=null;if(I){const ee=I.x()+I.width()/2;f.points()[0],f.points()[1],I.y(),z={points:[f.points()[0],f.points()[1],I.x()+I.width()/2,I.y()],from:f.getAttr("data-from"),to:I.getAttr("data-letter"),bg:f.stroke(),arrowIndex:e,fromId:d.getAttr("id"),toId:I.getAttr("id")},n[e].hasArrow=!0}b({arrow:z,nodes:n}),f.remove(),r.batchDraw(),t.off("mouseup touchend mousemove touchmove")}),t.on("mousemove touchmove",()=>{const k=t.getPointerPosition();k&&v(f,[f.points()[0],f.points()[1],k.x,k.y])})})},Kt=u.exports.createContext(null);function Yt(){return u.exports.useContext(Kt)}const Xt=u.exports.createContext(null);function Zt(){return u.exports.useContext(Xt)}const rl=({x:e,y:t,bg:n,text:r,width:a,height:s,pos:d,index:l,hasArrow:p})=>{const m=Ge(),{stage:f}=Yt(),{arrows:v}=Zt(),b=f.current.height(),{mouseHandler:k}=Zt(),I=k(l),z=d==="start"?"text":"image",ee="/letters/"+r.toLocaleLowerCase()+"0.png",[ge]=An(ee),te=`item-${z}-${l}`,de=v.find(er=>er.toId===te),Ve=()=>de||z==="text"?de?de.bg:n:m.palette.grey["200"];return c(Tn,{id:`item-${z}-${l}`,"data-letter":r,"data-role":z,height:s,width:a,onTouchStart:z==="image"?void 0:I,onDragStart:z==="image"?void 0:I,onMouseDown:z==="image"?void 0:I,x:e,y:d==="start"?0:b-(s+20),children:[i(Vn,{height:s,width:a,fill:Ve()}),z==="image"?i(Ln,{height:s,width:a,image:ge}):i(Gn,{text:r,fill:"white",height:s,fontSize:s,width:a,align:"center"})]})},Ri=({pos:e="start",items:t})=>i(S,{children:t.map((n,r)=>u.exports.createElement(rl,x(g({},n),{index:r,key:n.id,pos:e})))}),ol=({arrows:e,showHint:t})=>{let n=e;const{stage:{current:r}}=Yt();if(t&&r){const a=r.find("Group").toArray().filter(d=>d.getAttr("data-role")==="text"),s=r.find("Group").toArray().filter(d=>d.getAttr("data-role")==="image");n=n.map(d=>{const l=a.find(m=>m.id()===d.fromId),p=s.find(m=>m.id()===d.toId);return x(g({},d),{points:[l.x()+l.width()/2,l.y()+l.height(),p.x()+p.width()/2,p.y()]})})}return i(S,{children:n.map((a,s)=>i(Wr,{points:a.points,stroke:a.bg},s))})};function en({isCorrect:e,onSuccess:t,onSubmit:n}){const[r,{inline:a}]=$(),[s,{inline:d}]=$();return{loading:r,onSubmitHandler:()=>{n?(a(!0),n(e).then(()=>{t(),d(!0),a(!1)})):(t(),d(!0))},submitted:s}}const al=()=>{const{popArrow:e,arrows:t,toggleHint:n,isSubmitDisabled:r,isAnswerCorrect:a,onSubmit:s,showHint:d}=Zt(),[l,{force:p}]=$(),{onSubmitHandler:m,submitted:f,loading:v}=en({isCorrect:a,onSuccess:p(!0),onSubmit:s});return c(Ue,{children:[i(y,{sx:{mr:"auto"},children:"Samakan huruf & gambar berikut sesuai hurufnya"}),c(h,{sx:{mr:2,display:"flex",alignItems:"center"},children:[f?i(y,{sx:{display:"inline-block",mr:2},children:a?"Jawaban anda benar":"Maaf jawaban anda tidak tepat"}):null,c(Mt,{sx:{display:"block"},children:[i(w,{onClick:e,disabled:v||f||t.length===0,size:"small",variant:"outlined",sx:{textTransform:"none"},startIcon:i(It,{}),children:"Batalkan pilihan"}),i(w,{onClick:m,disabled:r||f,size:"small",variant:"outlined",sx:{textTransform:"none"},children:"Simpan jawaban"})]})]}),i(w,{onClick:n,disabled:!l||a,size:"small",variant:"outlined",sx:{textTransform:"none"},children:d?"Jawaban saya":"Tampilkan kunci jawaban"})]})};class sl extends u.exports.Component{constructor(t){super(t);_(this,"stage");_(this,"layer");_(this,"headerRef");_(this,"getNodes",(t=!0)=>{const{text:n}=this.props,r=this.stage.current,a=n.split(" ").join("").split("").filter(p=>p!==" "),s=[],d=[],l=Yd({stage:r,text:a.join("")});return(t?Qe.exports.shuffle(a):a).forEach((p,m)=>{const f=Kd(m,p,d);s.push(x(g(g({},f),l("",m)),{hasArrow:!1})),d.push(f.bg)}),s});_(this,"prepareNodes",()=>{const t=this.getNodes(!1),n=this.getNodes(!0).map((r,a)=>x(g({},r),{bg:t[a].bg}));this.setState({nodes:t,shufledNodes:n})});_(this,"getArrows",()=>this.state.showHint?this.state.nodes.map((t,n)=>{const r=this.state.shufledNodes.findIndex(s=>s.text===t.text),a=this.state.shufledNodes[r];return{toId:`item-image-${r}`,fromId:`item-text-${n}`,bg:t.bg,to:t.text,from:t.text,arrowIndex:n,points:[a.x+t.width/2,t.height,a.x+a.width/2,this.stage.current.height()-t.height]}}):this.state.arrows);_(this,"componentDidMount",()=>{this.prepareNodes()});_(this,"componentDidUpdate",(t,n,r)=>{t.text!==this.props.text&&this.prepareNodes()});_(this,"mouseHandler",t=>n=>il({index:t,stage:this.stage.current,layer:this.layer.current,nodes:this.state.nodes})(n).then(a=>{a.arrow&&this.setState(s=>(a.arrow&&s.arrows.push(a.arrow),x(g({},s),{nodes:a.nodes})))}));_(this,"getStageHeight",()=>this.headerRef.current?this.props.stageHeight-this.headerRef.current.clientHeight:0);_(this,"popArrow",()=>{this.setState(t=>{const n=t.arrows.pop();return n&&(t.nodes[n.arrowIndex].hasArrow=!1),g({},t)})});_(this,"toggleHint",()=>{this.setState({showHint:!this.state.showHint})});_(this,"isAnswerCorrect",()=>this.state.arrows.length===this.props.text.length?!this.state.arrows.find(n=>n.from!==n.to):!1);_(this,"getContextValues",()=>({mouseHandler:this.mouseHandler,arrows:this.getArrows(),popArrow:this.popArrow,nodes:this.state.nodes,toggleHint:this.toggleHint,isSubmitDisabled:this.state.arrows.length!==this.props.text.length,isAnswerCorrect:this.isAnswerCorrect(),onSubmit:this.props.onSubmit,showHint:this.state.showHint}));this.state={nodes:[],shufledNodes:[],showHint:!1,arrows:[]},this.stage=u.exports.createRef(),this.layer=u.exports.createRef(),this.headerRef=u.exports.createRef()}render(){return c(Xt.Provider,{value:this.getContextValues(),children:[i(Fe,{color:"transparent",position:"static",ref:this.headerRef,children:i(al,{})}),i(Fn,{ref:this.stage,width:window.innerWidth,height:this.getStageHeight(),children:i(Un,{ref:this.layer,children:i(Kt.Provider,{value:{stage:this.stage,layer:this.layer},children:c(Xt.Provider,{value:this.getContextValues(),children:[i(Ri,{items:this.state.nodes}),i(Ri,{pos:"end",items:this.state.shufledNodes}),i(ol,{showHint:this.state.showHint,arrows:this.getArrows()})]})})})})]})}}const dl=({text:e,onSubmit:t})=>{const{height:n,width:r}=Te();return i(S,{children:i(sl,{text:e,onSubmit:t,stageHeight:n})})};function ll(e){const[t,n]=u.exports.useState(-1),[r,{inline:a}]=$(),{show:s}=Te();return u.exports.useEffect(()=>{n(-1),a(!1)},[s]),{isSubmitted:r,isTouched:t!==-1,changeAnswer:p=>{r||n(p)},onSubmitted:()=>{t!==-1&&a(!0)},selected:t,isAnswerCorrect:t?t===e.answer-1:!1,onSubmit:e.onSubmit}}const Qi=u.exports.createContext(null);function tn(){return u.exports.useContext(Qi)}const ul=["A","B","C","D"],cl=({index:e,content:t})=>{const{selected:n,changeAnswer:r}=tn();return console.log(t),c(h,{role:"button",onClick:()=>r(e),className:"item","data-selected":n===e,children:[i(h,{sx:{height:100,width:"100%",backgroundImage:`url(${t})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),i(y,{align:"center",variant:"h2",children:ul[e]})]})},pl=["A","B","C","D"],hl=({index:e,content:t})=>{const{selected:n,changeAnswer:r}=tn();return c("div",{role:"button",onClick:()=>r(e),className:"item","data-selected":n===e,children:[c(y,{variant:"subtitle2",sx:{fontWeight:"bolder"},children:["Opsi ",pl[e]]}),i(y,{variant:"subtitle1",children:t})]})},gl=()=>{const{selected:e,onSubmitted:t,isAnswerCorrect:n,onSubmit:r}=tn(),{handleClose:a}=Te(),{loading:s,onSubmitHandler:d,submitted:l}=en({isCorrect:n,onSubmit:r,onSuccess:t});return c(h,{sx:{display:"flex",alignItems:"center",width:"90%"},children:[i(y,{sx:{color:n?"success.main":l?"error,main":"inherit"},children:l?n?"Jawaban anda benar":"Maaf jawaban anda kurang tepat":"Klik kunci jawaban untuk melihat hasil jawaban anda"}),i(le,{exitBeforeEnter:!0,children:i(G.div,{style:{marginLeft:"auto"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?i(ne,{sx:{ml:"auto"},size:20}):i(w,{onClick:l?()=>a(!1):d,disabled:e===-1,sx:{textTransform:"none",ml:"auto"},children:l?"Tutup":"Kunci jawaban"})},s?"loading":"not-loading")})]})},ml={display:"flex",width:"100%","& > div":{width:["100%","50%"],display:"flex",alignItems:"center",justifyContent:"center"}},fl={display:"flex",flexWrap:"wrap",width:"90%","& > .item":{cursor:"pointer",transition:"all ease .2s",background:"white",width:"50%",p:2,zIndex:1,"&[data-selected='true']":{boxShadow:3,zIndex:2,bgcolor:"primary.main",color:"white"},"&:hover":{bgcolor:"primary.main",color:"white"}}},xl={text:hl,image:cl},yl=e=>{const t=xl[e.type];return i(t,g({},e))},vl=e=>{const t=Te(),{question:n,image:r,options:a,answer:s}=e,d=ll(e);return i(Qi.Provider,{value:d,children:c(h,{sx:x(g({},ml),{height:t.height,width:t.width}),children:[i("div",{children:c(h,{sx:{width:"100%",textAlign:"center"},children:[r?i(h,{component:"img",src:r,sx:{maxHeight:256}}):null,i(y,{children:n})]})}),i("div",{children:c(h,{sx:{width:"100%"},children:[c(h,{children:[i(y,{variant:"h5",sx:{mb:2},children:"Pilih jawaban anda :"}),i(h,{sx:fl,children:a.map((l,p)=>i(yl,g({index:p},l),p))})]}),i(gl,{})]})})]})})},_l=(e,t)=>t.find("Group").toArray().filter(n=>n.getAttr("id")!==e.getAttr("id"));function bl(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}function wl({stage:e,target:t,swap:n,original:r}){return a=>{const s=a.target,l=_l(s,e).findIndex(p=>bl(s.getClientRect(),p.getClientRect()));console.log(l===-1),l!==-1?n(t,l):(console.log("go original"),s.setPosition({x:r.x,y:r.y}))}}function Cl({stage:e,text:t}){return(n,r)=>{if(!e)return[0,0];const a=e.height(),s=e.height()/t.length,l=a/2-s/2,p=e.width(),m=(s+30)*t.length,f=(p-m)/2;return{x:r?r*(s+30)+f:f,y:l,width:s,height:s}}}const nn=u.exports.createContext(null);function Oi(){return u.exports.useContext(nn)}const Sl=({index:e,text:t})=>{const{stage:n}=Yt(),{getNodeState:r,swap:a,mode:s,enableDrag:d}=Oi(),[l]=r(e),p="/letters/"+t.toLocaleLowerCase()+"0.png",m=Ge(),f=u.exports.useRef(null),[v]=An(p);u.exports.useEffect(()=>{f.current&&f.current.to({x:l.x,y:l.y,duration:.2})},[f.current,l]);const b=wl({stage:n.current,target:e,original:l,swap:a});return c(Tn,x(g({},l),{id:l.id,ref:f,onDragEnd:d?b:void 0,draggable:d,children:[i(Vn,{width:l.width,height:l.height,cornerRadius:12,strokeWidth:1,stroke:m.palette.primary.main}),s==="image"?i(Ln,{image:v,height:l.height,width:l.width}):i(Gn,{fill:"black",fontSize:l.height-10,align:"center",width:l.width,text:t})]}))},Il=()=>{const{height:e}=Te(),{text:t,toggleHint:n,toggleMode:r,toggleDrag:a,nodes:s,mode:d,showHint:l,onSubmit:p}=Oi(),m=window.innerHeight-e,f=Qe.exports.sortBy(s,"x").map(z=>z.text),v=t===f.join(""),{loading:b,onSubmitHandler:k,submitted:I}=en({isCorrect:v,onSubmit:p,onSuccess(){a()}});return i(Fe,{elevation:0,variant:"outlined",color:"transparent",sx:{position:"fixed",top:m,width:"100%",height:"fit-content",p:1},children:c(h,{sx:{display:"flex"},children:[c(y,{variant:"h6",children:['Susunlah kata "',t,'" dengan menggunakan bisindo']}),i(h,{sx:{ml:"auto",display:"flex",alignItems:"center"},children:i(le,{exitBeforeEnter:!0,children:i(G.div,{exit:{opacity:0},animate:{opacity:1},initial:{opacity:0},children:b?i(S,{children:i(ne,{size:20})}):I?c(S,{children:[c(w,{onClick:r,sx:{textTransform:"none",mr:2},variant:"outlined",children:["Tampilkan ",d==="letter"?"gambar":"huruf"]}),i(w,{onClick:n,sx:{textTransform:"none"},variant:"outlined",children:"Kunci jawaban"})]}):i(w,{onClick:k,sx:{textTransform:"none"},variant:"outlined",children:l?"Jawaban anda":"Kunci jawaban"})},I?"submitted":"not-submitted")})})]})})},Wi=e=>{const t=Mn.random.arrayElement(Ni);return Qe.exports.find(e,t)?Wi(e):t},Pl=(e,t,n)=>({id:`rect-${e}-node`,text:t,bg:Wi(n)});class kl extends u.exports.Component{constructor(t){super(t);_(this,"stage");_(this,"layer");_(this,"toggleMode",()=>this.setState(x(g({},this.state),{mode:this.state.mode==="letter"?"image":"letter"})));_(this,"toggleHint",()=>this.setState(x(g({},this.state),{showHint:!this.state.showHint})));_(this,"getNodes",(t=!0)=>{const{text:n}=this.props,r=this.stage.current,a=n.split(" ").join("").split("").filter(p=>p!==" "),s=[],d=[],l=Cl({stage:r,text:a.join("")});return(t?Qe.exports.shuffle(a):a).forEach((p,m)=>{const f=Pl(m,p,d);s.push(g(g({},f),l("",m))),d.push(f.bg)}),s});_(this,"prepareNodes",()=>{this.setState({nodes:[...this.getNodes()]})});_(this,"getItems",()=>this.state.showHint?this.getNodes(!1):this.state.nodes);_(this,"componentDidMount",()=>{this.prepareNodes()});_(this,"componentDidUpdate",(t,n,r)=>{t.text!==this.props.text&&this.prepareNodes()});_(this,"swap",(t,n)=>{const r=[...this.state.nodes],a=r[t],s=r[n];r[n]=x(g({},s),{y:a.y,x:a.x}),r[t]=x(g({},r[t]),{x:s.x,y:s.y}),this.setState({nodes:[...r]})});_(this,"getNodeState",t=>{const{nodes:n}=this.state,r=a=>{this.state;const s=[...this.state.nodes],d=s[t];s[t]=g(g({},d),a),this.setState({nodes:[...s]})};return[n[t],r]});_(this,"toggleDrag",()=>this.setState({enableDrag:!this.state.enableDrag}));_(this,"getContextValues",()=>({nodes:this.state.nodes,text:this.props.text,swap:this.swap,getNodeState:this.getNodeState,toggleHint:this.toggleHint,toggleMode:this.toggleMode,mode:this.state.mode,showHint:this.state.showHint,enableDrag:this.state.enableDrag,toggleDrag:this.toggleDrag,onSubmit:this.props.onSubmit}));this.state={nodes:[],mode:"image",showHint:!1,enableDrag:!0},this.stage=u.exports.createRef(),this.layer=u.exports.createRef()}render(){return c(nn.Provider,{value:this.getContextValues(),children:[i(Fn,{height:this.props.height,width:window.innerWidth,ref:this.stage,children:i(Un,{ref:this.layer,children:i(Kt.Provider,{value:{stage:this.stage,layer:this.layer},children:i(nn.Provider,{value:this.getContextValues(),children:this.getItems().map((t,n)=>i(Sl,g({index:n},t),t.id))})})})}),i(Il,{})]})}}const $l=({text:e,onSubmit:t})=>{const{height:n,width:r}=Te();return i(kl,{width:r,height:n,onSubmit:t,text:e})},ql={LETTER_SEQUENCE:$l,MULTIPLE_CHOICE:vl,IMAGE_MATCH:dl},rn=({type:e,viewerProps:t,onSubmit:n})=>{var a;const r=(a=ql[e])!=null?a:u.exports.Fragment;return i(r,x(g({},t),{onSubmit:n}))};function on(e,t){return e==="MULTIPLE_CHOICE"?{question:t.question,answer:t.answer,image:t.additionalFile&&t.additionalFile instanceof File?URL.createObjectURL(t.additionalFile):typeof t.additionalFile=="string"?t.additionalFile:"",options:t.options.map(n=>({content:n.content instanceof File?URL.createObjectURL(n.content):n.content,type:t.type}))}:{text:t.text}}const Dl={answer:0,type:"text",question:"",additionalFile:null},El=({onSubmit:e,loading:t})=>{const n=re({name:"multipleChoice",defaultValue:Dl}),r=re({name:"text",defaultValue:""}),a=re({name:"multipleChoice.options",defaultValue:[]}),s=Ai(),l={disabled:(()=>{if(s==="MULTIPLE_CHOICE"){const v=a.find(b=>!b.content);return Boolean(v)||!n.question}else return!Boolean(r)})(),sx:{my:2},variant:"outlined"},p=on(s,x(g({},n),{text:r,options:a})),[m,{inline:f}]=$();return c(S,{children:[i(Jt,{show:m,handleClose:f,children:i(rn,{type:s,viewerProps:p})}),c(Mt,{sx:{"& > button":{textTransform:"none"}},fullWidth:!0,children:[i(w,x(g({onClick:()=>f(!0)},l),{children:"Tampilkan quis"})),i(w,x(g({},l),{disabled:l.disabled||t,onClick:e,startIcon:t?i(ne,{size:16}):void 0,children:"Simpan"}))]})]})},zl={LETTER_SEQUENCE:Fd,IMAGE_MATCH:Gd,MULTIPLE_CHOICE:Jd},Ml={animate:{y:0,opacity:1},initial:{y:"-200%",opacity:0},exit:{y:"200%",opacity:0}},Al=()=>{const e=Ai(),t=zl[e];return i(le,{exitBeforeEnter:!0,children:i(G.div,x(g({},Ml),{children:i(t,{})}),e)})},Tl={LETTER_SEQUENCE:P.mutateLetterSequenceQuiz,IMAGE_MATCH:P.mutateImageMatchQuiz,MULTIPLE_CHOICE:P.mutateMultipleChoiseQuiz},Vl=C(e=>{const t=Ad(e),n=Le();re({control:n.control,defaultValue:T.IMAGE_MATCH,name:"type"});const r=p=>{if("multipleChoice"in p){const m=p,{multipleChoice:f}=m,v=N(m,["multipleChoice"]);return x(g(g({},p),f),{options:p.multipleChoice.options.map(({content:b},k)=>{const I=b instanceof File?"image":"text";return{index:k,[I]:b}})})}return p},[{loading:a,response:s},d]=qe({api:Tl[n.getValues("type")],parser:r,merge:{videoId:e.video.id}}),l=n.handleSubmit(d);return u.exports.useEffect(()=>{s&&e.onSuccess()},[s]),i(K,x(g({},n),{children:c(Mi.Provider,{value:t,children:[i(El,{onSubmit:l,loading:a}),c(h,{sx:{display:"flex","& > div":{width:"50%"},overflow:"hidden",minHeight:"70vh"},children:[c("div",{children:[i(Ld,{}),i(Al,{})]}),i("div",{children:i(Td,{})})]})]})}))}),ji={selected:null,action:null};function Ll(){const[e,t]=u.exports.useState(ji),n=a=>()=>t({selected:a,action:"quiz"}),r=a=>()=>t({selected:a,action:"delete"});return x(g({},e),{onDeleteSelected:r,handleSelected:n,handleClose:()=>t(ji)})}const Ji=u.exports.createContext(null);function an(){return u.exports.useContext(Ji)}const Gl={[T.MULTIPLE_CHOICE]:"Pilihan ganda",[T.IMAGE_MATCH]:"Pencocokan gambar",[T.LETTER_SEQUENCE]:"Pengurutan gambar"},Fl=()=>{const{initialFetch:e,result:t,isEmpty:n}=V();u.exports.useEffect(()=>{e()},[]);const{handleSelected:r,onDeleteSelected:a}=an();return c("div",{children:[n?i(y,{sx:{my:3},align:"center",variant:"h4",children:"Video ini tidak memiliki quis"}):null,i(h,{sx:{display:"flex",flexWrap:"wrap"},children:t.data.map((s,d)=>i(h,{sx:{width:["100%","33.25%"]},children:i(h,{sx:{p:1},children:c(H,{sx:{p:1},children:[c(y,{variant:"caption",children:["Quiz ",d+1]}),c(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{variant:"subtitle2",children:Gl[s.type]}),c(y,{variant:"subtitle2",children:["Ditampilkan pada : ",s.durationText]})]}),c(Mt,{fullWidth:!0,size:"small",children:[i(w,{onClick:r(s),sx:{textTransform:"none"},size:"small",variant:"outlined",fullWidth:!0,children:"Simulasi quis"}),i(w,{onClick:a(s),sx:{textTransform:"none"},size:"small",variant:"outlined",fullWidth:!0,color:"error",children:"Hapus"})]})]})})},s.id))})]})},Ul=C(()=>i(S,{children:i(Fl,{})})),Hl=()=>{const{handleSelected:e,selected:t,handleClose:n,action:r}=an(),a=t?on(t.type,{text:t.image_matcher,question:t.question,answer:t.questionAnswer,options:t.choises,additionalFile:t.additional_image,type:"text"}):{};return i(Jt,{show:Boolean(t&&r==="quiz"),handleClose:n,children:t?i(rn,{type:t.type,viewerProps:a}):null})},Nl=()=>{const{selected:e,action:t,handleClose:n}=an(),{store:r}=M(),[a,{inline:s}]=$(),{initialFetch:d}=V(),{enqueueSnackbar:l}=U(),p=()=>{e&&(s(!0),r.mutateQuizDelete({id:e.id}).then(()=>{s(!1),d(),l("Quiz berhasil di hapus",{variant:"success"}),n()}))};return c(Be,{onClose:n,open:Boolean(e&&t==="delete"),children:[i(rt,{children:i(y,{children:"Apakah anda yakin untuk menghapus ?"})}),c(Dt,{sx:{"& > button":{textTransform:"none"}},children:[i(w,{onClick:n,children:"Batal"}),i(w,{disabled:a,onClick:p,color:"error",children:"Hapus"})]})]})},Bl=()=>{const e=Ll(),{video:t}=Xe(),{initialFetch:n}=V(),[r,{toggle:a,force:s}]=$(),{enqueueSnackbar:d}=U(),l=()=>{n(),s(!1)(),d("Quis baru berhasil di tambahkan",{variant:"success"})};return c(Ji.Provider,{value:e,children:[c(h,{sx:{minHeight:"110vh"},children:[c(H,{sx:{p:2,m:1},children:[i(w,{sx:{textTransform:"none"},onClick:a,children:r?"Tutup":"Tambah quis baru"}),i(Ne,{in:r,timeout:"auto",mountOnEnter:!0,children:i(Vl,{onSuccess:l,video:t})})]}),i(Ul,{})]}),i(Hl,{}),i(Nl,{})]})},Rl=jt(()=>{const{video:e}=Xe();return $(),i(gt,{dataKey:"quizByVideo",includes:{videoId:e.id},children:i(Bl,{})})}),Ql=C(()=>{const{form:e,loading:t,handler:n,response:r}=_e(),{video:a}=Xe(),{enqueueSnackbar:s,closeSnackbar:d}=U(),l=R();u.exports.useEffect(()=>{r&&(s("Video berhasil di update",{variant:"success"}),l(`/admin/video/${a.id}/info`))},[r]);const[p,{inline:m}]=$();return u.exports.useEffect(()=>{d(),e.setValue("title",a==null?void 0:a.title),e.setValue("caption",a==null?void 0:a.caption),e.setValue("description",a==null?void 0:a.description),m(!0)},[]),p?i(K,x(g({},e),{children:c(H,{component:"form",onSubmit:n,sx:{p:2,my:3},children:[c(h,{sx:{display:"flex","& > div":{width:"50%",p:1}},children:[i("div",{children:i(A,{fullWidth:!0,name:"title",label:"Judul video"})}),i("div",{children:i(A,{fullWidth:!0,name:"caption",label:"Caption video"})})]}),c(h,{sx:{my:2,p:1},children:[i(Re,{children:"Deskripsi video"}),i(Qt,{name:"description"})]}),i(J,{variant:"outlined",fullWidth:!0,icon:i(it,{}),loading:t,children:"Simpan"})]})})):i(S,{})}),Ol=e=>(e.description=JSON.stringify(e.description),g({},e)),Wl=jt(()=>{const{video:e}=Xe();return i(Ee,{parser:Ol,mutateKey:"editVideo",merge:{id:e==null?void 0:e.id},children:i(Ql,{})})}),jl=()=>{Nt([]);const{gradeInfo:e}=Z();return c(F,{children:[i(qi,{gradeId:e.studentGrade.grade.id}),";"]})},Jl={component:jl,icon:u.exports.Fragment,path:"/discussion",name:"discussion",key:"discussion"};function Kl(e){const{progressInfo:{videoHistory:t,quizHistory:n},videoList:{videos:r}}=Z(),a=()=>{const d=r.findIndex(l=>l.id===e.id);return d>0?r[d-1]:null};return{getIsLocked:()=>{const d=a();if(!d)return!1;const l=t.find(m=>m.video_id.toString()===d.id.toString()),p=n.filter(m=>m.videoId.toString()===d.id.toString());return!l||p.length!==d.quiz_count?!0:l.time<d.duration}}}const Yl={opacity:0,position:"absolute",top:0,left:0,height:"100%",width:"100%",background:"rgba(0,0,0,0.60)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6},Xl=C(({model:e,onClick:t})=>{const n=Ge(),[r,{force:a}]=$(),{progressInfo:{getPlaying:s},videoList:{getPlayingPercentage:d}}=Z(),l=d(e.id,s(e.id)),{getIsLocked:p}=Kl(e),m=p(),{progressInfo:{quizHistory:f}}=Z(),v=f.filter(b=>b.videoId.toString()===e.id.toString());return i(h,{sx:{position:"relative"},children:c(h,{onClick:()=>!m&&t(e),onMouseEnter:a(!0),onMouseLeave:a(!1),component:G.div,animate:{boxShadow:r?n.shadows[10]:n.shadows[1]},sx:{borderRadius:1,cursor:"pointer",position:"relative"},children:[m?i(G.div,{whileHover:{opacity:1,zIndex:100},style:Yl,children:c(h,{sx:{textAlign:"center",color:"white"},children:[i(cn,{}),i(y,{children:"Video ini terkunci"})]})}):null,i(h,{sx:{zIndex:99,width:"100%",borderRadius:1},component:"img",src:e.thumbnail,alt:""}),c(h,{sx:{p:2},children:[i(y,{sx:{color:b=>b.palette.grey["800"],fontWeight:"bolder"},variant:"subtitle1",children:e.title}),c(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{sx:{textAlign:"left"},variant:"caption",children:"Progress anda"}),i(y,{sx:{textAlign:"left"},variant:"caption",children:l?`${l}%`:""})]}),i(Hn,{value:l,variant:"determinate"}),c(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{sx:{textAlign:"left"},variant:"caption",children:"Quis"}),c(y,{sx:{textAlign:"left"},variant:"caption",children:[v.length," / ",e.quiz_count]})]})]})]})})}),Ki=({width:e="50%",onItemClick:t,exluded:n=[]})=>{const{videoList:{videos:r}}=Z(),a=R(),s=t||(l=>{a(`/video/${l.id}`)});return c(h,{children:[i(y,{sx:{color:l=>l.palette.grey["700"]},variant:"h4",children:"Video pembelajaran"}),i(h,{sx:{display:["block","flex"],flexWrap:"wrap","& > div":{width:["100%",e],p:1}},children:(()=>r.filter(l=>!(n==null?void 0:n.includes(l.id))))().map(l=>i(Xl,{onClick:s,model:l},l.id))})]})},Zl=()=>{const{gradeInfo:{studentGrade:e}}=Z();return c("div",{children:[i(y,{variant:"h6",sx:{fontWeight:"lighter"},children:"Kelas / batch"}),i(y,{sx:{fontWeight:"bolder",color:t=>t.palette.grey["700"]},variant:"h5",children:e.grade.name})]})},eu=C(()=>{const{videoList:{videos:e},progressInfo:{videoHistory:t}}=Z(),n=e.filter(a=>{const s=t.find(d=>d.video_id.toString()===a.id.toString());return s?s.time>=a.duration:!1}),r=n.length?n.length/e.length*100:0;return c("div",{style:{position:"relative"},children:[c(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{children:"Progress anda"}),c(y,{children:[n.length," / ",e.length," video"]})]}),c(h,{sx:{flex:1},children:[c(h,{sx:{mb:1,display:"flex",justifyContent:"space-between","& > *":{color:"primary.main"}},children:[i(jr,{}),i(Jr,{})]}),i(Hn,{variant:"determinate",value:r}),i(h,{sx:{width:`${r+3}%`,display:"flex",justifyContent:"flex-end"},children:c("div",{children:[i(Kr,{sx:{color:"primary.main",display:"block",p:0,m:0}}),c(y,{variant:"caption",children:[r," %"]})]})})]})]})}),tu=()=>(Nt([]),c(F,{sx:{py:2},children:[c(h,{sx:{width:["100%"],display:"flex","&>div":{width:"50%",p:1}},children:[i(Zl,{}),i(eu,{})]}),i(Q,{sx:{mb:2}}),i(h,{sx:{width:["100%"]},children:i(Ki,{width:"25%"})})]})),nu={path:"/",component:tu,icon:u.exports.Fragment,name:"progress",key:"progress"},iu=()=>(Nt([]),i("div",{children:"video page"})),ru={component:iu,name:"videos",path:"/videos",icon:u.exports.Fragment,key:"videos"},ou=e=>e.content.id.title.thumbnail.caption.quiz_count.quizes(t=>t.id.type.choises(n=>n.id.text.image.index).image_matcher.additional_image.questionAnswer.question.show_at),au=e=>{const[t,n]=u.exports.useState(null),r=()=>n(null),a=s=>()=>n(s);return M(s=>s.queryQuizAnswers()),{show:Boolean(t),handleClose:r,handleOpen:a,selected:t}},su=(e=[],t)=>{const n=u.exports.useRef(null),[r,a]=u.exports.useState(null);$();const{enqueueSnackbar:s}=U();u.exports.useEffect(()=>{r&&(s("Quiz akan segera di mulai"),setTimeout(()=>{var l;console.log("called"),t.handleOpen(r)(),(l=n.current)==null||l.pause()},5e3))},[r]);const d=u.exports.useCallback(l=>{if(!r){const p=e.find(m=>m.show_at-5===Math.floor(l.detail));p&&a(p)}},[e,r]);return u.exports.useEffect(()=>{const l=n.current;if(l)return l.addEventListener("vmCurrentTimeChange",d),()=>{l.removeEventListener("vmCurrentTimeChange",d)}},[n.current]),{playerRef:n}};function du(){const e=ot(),{loading:t,data:n}=M(d=>d.queryVideo({id:e.id},ou));Yr(e);const r=n&&n.video?n.video.quizes:[],a=au();return{videoUtilities:su(r,a),video:n&&n.video?n.video:null,loading:t,showLoading:!n||!n.video,quiz:a}}function Yi(e){const{store:t}=M();return async(n,r)=>{const a={videoId:n.id,play:r||e.currentTime};return t.mutateUpdateVideoProgress(a).currentPromise()}}const Xi=u.exports.createContext(null);function Ze(){return u.exports.useContext(Xi)}const lu=C(()=>{const{video:e,videoUtilities:t}=Ze(),{videoList:{videos:n}}=Z(),a=n.findIndex(b=>b.id===(e==null?void 0:e.id))===n.length-1,s=Yi(t.playerRef.current),[d,{inline:l}]=$(),[p,{inline:m}]=$(),{enqueueSnackbar:f}=U();return c(S,{children:[p?i(De,{}):null,c(Be,{onClose:()=>l(!1),open:d,fullWidth:!0,children:[i(rt,{children:i(Xr,{children:a?"Anda telah menyelesaikan semua video pembelajaran pada kelas ini":"Anda telah menyelesaikan video ini, apakah ingin melanjutkan ke video berikutnya ?"})}),c(Dt,{sx:{"& > button":{textTransform:"none"}},children:[i(w,{onClick:()=>l(!1),color:"secondary",startIcon:i(kt,{}),children:"Tutup"}),a?null:i(w,{startIcon:i(Zr,{}),children:"Ya"})]})]}),i(Ye,{onPlayEnded:()=>{console.log("on onded"),e&&(m(!0),s(e,e.duration).then(()=>{l(!0),m(!1)}).catch(()=>{m(!1),f("Ops terjadi kesalahan",{variant:"error"})}))},playerRef:t.playerRef,url:e.content})]})}),uu=C(()=>{const{video:e,quiz:{handleOpen:t}}=Ze(),{progressInfo:{quizHistory:n}}=Z(),r=e.quizes,a=s=>Boolean(n.find(d=>d.id.toString()===s.id.toString()));return c(h,{sx:{pb:2},children:[i(Q,{}),r.map((s,d)=>c(w,{disabled:a(s),onClick:t(s),sx:{textTransform:"none"},children:["Quis ",d+1]},s.id)),i(Q,{})]})}),cu=()=>{const{quiz:{show:e,handleClose:t,selected:n},videoUtilities:r}=Ze(),a=n?on(n.type,{text:n.image_matcher,question:n.question,answer:n.questionAnswer,options:n.choises,additionalFile:n.additional_image,type:"text"}):{},{store:s}=M(),d=async l=>{if(n)return s.mutateUpdateQuizProgress({quizId:n.id,correct:l}).currentPromise().then(()=>{var m;const p=(m=r.playerRef)==null?void 0:m.current;p&&p.play()})};return i(Jt,{show:e,handleClose:t,children:n?i(rn,{type:n.type,onSubmit:d,viewerProps:a}):null})},pu=()=>{const{video:e}=Ze();return c("div",{children:[i(y,{sx:{color:t=>t.palette.grey["700"]},variant:"h3",children:e==null?void 0:e.title}),i(y,{sx:{color:t=>t.palette.grey["700"]},variant:"subtitle1",children:e==null?void 0:e.caption})]})},hu=()=>{const{video:e}=Ze();return c(h,{sx:{pt:2,mb:1},children:[i(y,{variant:"subtitle1",sx:{fontWeight:"bolder"},children:"Deskripsi video"}),i(h,{sx:{borderRadius:2,p:1,border:"solid 1px",borderColor:t=>t.palette.grey.A400},children:i(vt,{data:e.description})})]})},gu=({index:e,history:t,quiz:n})=>c(kn,{children:[i(eo,{children:i(()=>t?t.correct?i(to,{}):i(kt,{}):i(S,{}),{})}),i($n,{secondary:t?t.correct?"Jawaban benar":"Jawaban tidak tepat":"Belum di kerjakan",primary:`Quis ${e+1}`})]}),mu=({history:e,quizes:t})=>i(Pn,{children:t.map((n,r)=>i(gu,{quiz:n,history:e.find(a=>a.id.toString()===n.id.toString()),index:r},n.id))}),fu=C(()=>{var p;const{updateNavs:e}=pe();u.exports.useEffect(()=>{e([])},[]);const t=du(),[n,{inline:r}]=$(),a=R(),s=Yi(t.videoUtilities.playerRef.current),d=m=>{const f=t.videoUtilities.playerRef.current;f&&(r(!0),s(m,f.currentTime).then(()=>{r(!1),a(`/video/${m.id}`)}).catch(()=>{r(!1),a(`/video/${m.id}`)}))},{progressInfo:{quizHistory:l}}=Z();return t.showLoading?i(De,{}):c(F,{children:[n?i(De,{}):null,c(Xi.Provider,{value:t,children:[i(w,{onClick:()=>a("/"),size:"small",variant:"outlined",sx:{my:1},startIcon:i(It,{}),children:"Kembali ke dashboard"}),i(pu,{}),i(uu,{}),i(cu,{}),i(lu,{}),c(h,{sx:{display:["block","flex"]},children:[i(h,{sx:{width:["100%","30%"]},children:c(h,{sx:{pt:2,mb:1},children:[i(y,{variant:"subtitle1",sx:{fontWeight:"bolder"},children:"Progress quis"}),i(mu,{history:l,quizes:(p=t.video.quizes)!=null?p:[]})]})}),i(h,{sx:{width:["100%","70%"]},children:i(hu,{})})]}),i(h,{sx:{mb:3},children:i(Ki,{exluded:[t.video.id],onItemClick:d,width:"33%"})})]})]})}),xu={component:fu,path:"/video/:id",name:"video-student",icon:u.exports.Fragment,key:"video-student"},yu=!0,vu=[{path:"classroom/:slug/:id",component:ws,groups:[{path:"videos",component:Vs,name:"batch-show-video"},{path:"add-video",component:Xs,name:"batch-show-add-vide"},{path:"students",component:cd,name:"batch-show-student"},{path:"quiz-check",component:pd,name:"batch-show-quiz-check"},{path:"discussion",component:Dd,name:"batch-show-discussion"}],key:"classroom-show",icon:u.exports.Fragment,name:"classroom show"},{path:"classroom",component:bs,name:"menagement batch",key:"batch-index",icon:no},{path:"admin/video/:id",component:Cs,name:"admin-video-page",key:"admin-video-page",icon:u.exports.Fragment,hideInMenu:yu,groups:[{path:"*",component:Ei,name:"Informasi video"},{path:"info",component:Ei,name:"Informasi video"},{path:"quiz",component:Rl,name:"Quis"},{path:"edit",component:Wl,name:"Edit"}]}],_u=[{path:"/login",component:Oa,name:"login",key:"login",icon:u.exports.Fragment},{path:"/",component:()=>u.exports.createElement(io,{to:"/login"}),name:"login",key:"login",icon:u.exports.Fragment}],bu=[nu,ru,Jl,xu],wu=e=>{if(!e)return"/login";const{role:t}=e;return t===fe.ADMIN?"classroom":"/"},Cu=()=>{const e=r=>r?r.role===fe.ADMIN?vu:bu:_u,t=Ut(),n=u.exports.useCallback(async()=>{const r=await t.queryAuth().currentPromise();if(r.auth){const{auth:a}=r;return{id:a.id,name:a.name,email:a.email,role:a.role}}return null},[]);return c(lo,{getRoutes:e,authFunctions:n,children:[i(Da,{children:i(Fa,{children:i(uo,{getFallback:wu})})}),i(Sa,{})]})},Zi=document.getElementById("root");Zi&&ro.exports.render(i(oo,{children:i(ao,{anchorOrigin:{horizontal:"right",vertical:"top"},children:i(_a,{url:"/graphql",children:i(Cu,{})})})}),Zi);
