var Xi=Object.defineProperty,Zi=Object.defineProperties;var er=Object.getOwnPropertyDescriptors;var Ze=Object.getOwnPropertySymbols;var an=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable;var vt=(e,t,n)=>t in e?Xi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))an.call(t,n)&&vt(e,n,t[n]);if(Ze)for(var n of Ze(t))sn.call(t,n)&&vt(e,n,t[n]);return e},x=(e,t)=>Zi(e,er(t));var U=(e,t)=>{var n={};for(var r in e)an.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ze)for(var r of Ze(e))t.indexOf(r)<0&&sn.call(e,r)&&(n[r]=e[r]);return n};var _=(e,t,n)=>(vt(e,typeof t!="symbol"?t+"":t,n),n);import{r as l,j as i,u as et,A as ue,m as H,R as tr,a as dn,M as nr,t as o,Q as $,w as G,b as q,h as _t,c as ir,d as rr,e as or,f as un,g as ar,o as bt,i as ge,k as N,l as sr,L as dr,n as ur,p as Ve,F as S,S as lr,q as cr,s as pr,V as hr,v as ln,x as Ge,y as cn,z as wt,B as gr,C as Le,D as C,E as B,G as p,H as mr,I as h,J as te,T as y,K as fr,P as pn,N as we,O as hn,U as w,W as xr,X as L,Y as Fe,Z as yr,_ as Ct,$ as gn,a0 as tt,a1 as St,a2 as mn,a3 as Ue,a4 as ne,a5 as fn,a6 as K,a7 as He,a8 as vr,a9 as R,aa as xn,ab as F,ac as Q,ad as It,ae as _r,af as nt,ag as yn,ah as vn,ai as br,aj as it,ak as Pt,al as wr,am as Cr,an as Ce,ao as _n,ap as rt,aq as O,ar as Sr,as as Ir,at as Pr,au as kr,av as bn,aw as $r,ax as qr,ay as Dr,az as Er,aA as zr,aB as Mr,aC as Ar,aD as Y,aE as wn,aF as Tr,aG as Vr,aH as Gr,aI as Lr,aJ as kt,aK as Cn,aL as Ne,aM as $t,aN as Fr,aO as Sn,aP as Ur,aQ as In,aR as Hr,aS as qt,aT as Nr,aU as Pn,aV as kn,aW as $n,aX as ie,aY as Br,aZ as qn,a_ as Dn,a$ as En,b0 as zn,b1 as Dt,b2 as Rr,b3 as Mn,b4 as Be,b5 as An,b6 as Tn,b7 as Vn,b8 as Gn,b9 as Ln,ba as Qr,bb as Et,bc as Fn,bd as Un,be as Or,bf as Wr,bg as Jr,bh as jr,bi as Kr,bj as Yr,bk as Xr,bl as Zr,bm as eo}from"./vendor.js";const to=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}};to();const Hn=l.exports.createContext(null);function re(){return l.exports.useContext(Hn)}class no extends l.exports.Component{constructor(t){super(t);_(this,"setUser",t=>{this.setState(n=>x(g({},n),{user:t,routes:[...this.props.getRoutes(t)]}))});_(this,"getContext",()=>x(g({},this.state),{setUser:this.setUser}));this.state={routes:[],user:null,initilizing:!0}}componentDidMount(){const{authFunctions:t,getRoutes:n}=this.props;t().then(r=>{this.setState({initilizing:!1,routes:n(r),user:r})})}render(){return i(Hn.Provider,{value:this.getContext(),children:this.state.initilizing?"Initializing":this.props.children})}}const Nn=({children:e})=>{const{pathname:t}=et();return i(ue,{exitBeforeEnter:!0,children:i(H.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},transition:{opacity:{type:"tween"}},style:{minHeight:"100vh"},children:e},t)})},io=({getFallback:e})=>{const{routes:t,user:n}=re(),r=e(n);if(!t.find(s=>s.path.replaceAll("/*","")===r))throw new Error(`Path ${r} is not exist in routes`);return i(tr,{children:t.map(({path:s,component:d,groups:u})=>{const c=u!=null?u:[];return i(dn,{path:s,element:i(Nn,{children:i(d,{})}),children:c.map(({path:f,component:m})=>i(dn,{path:f,element:i(Nn,{children:i(m,{})})},f))},s)})})},D=nr;var me;(function(e){e.ADMIN="ADMIN",e.STUDENT="STUDENT"})(me||(me={}));const ro=o.enumeration("AppRole",["ADMIN","STUDENT"]),oo=D.named("User").props({__typename:o.optional(o.literal("User"),"User"),id:o.identifier,name:o.union(o.undefined,o.string),email:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),role:o.union(o.undefined,ro),need_change_password:o.union(o.undefined,o.boolean),active:o.union(o.undefined,o.null,o.boolean)}).views(e=>({get store(){return e.__getStore()}}));class W extends ${get id(){return this.__attr("id")}get name(){return this.__attr("name")}get email(){return this.__attr("email")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get role(){return this.__attr("role")}get need_change_password(){return this.__attr("need_change_password")}get active(){return this.__attr("active")}}function ao(){return new W}const fe=ao().name.email.created_at.updated_at.role.need_change_password.active,Se=oo.actions(e=>({log(){console.log(JSON.stringify(e))}})),so=G()(D.named("Progress").props({__typename:o.optional(o.literal("Progress"),"Progress"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,q(o.late(()=>Se))),video_histories:o.union(o.undefined,o.string),quiz_histories:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}})));class le extends ${get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get video_histories(){return this.__attr("video_histories")}get quiz_histories(){return this.__attr("quiz_histories")}user(t){return this.__child("user",W,t)}}function uo(){return new le}const Re=uo().user_id.video_histories.quiz_histories,ot=so.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get videoHistories(){return e.video_histories?JSON.parse(e.video_histories):[]},get quizHistories(){return e.quiz_histories?JSON.parse(e.quiz_histories):[]}})),lo=G()(D.named("StudentGrade").props({__typename:o.optional(o.literal("StudentGrade"),"StudentGrade"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),student:o.union(o.undefined,o.null,q(o.late(()=>Se))),grade:o.union(o.undefined,o.null,q(o.late(()=>Oe))),progress:o.union(o.undefined,q(o.late(()=>ot)))}).views(e=>({get store(){return e.__getStore()}})));class at extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}student(t){return this.__child("student",W,t)}grade(t){return this.__child("grade",ce,t)}progress(t){return this.__child("progress",le,t)}}function co(){return new at}const po=co().created_at.updated_at,st=lo.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get studentName(){return e.student?e.student.name:""},get gradeName(){return e.grade?e.grade.name:""}})),ho=G()(D.named("Grade").props({__typename:o.optional(o.literal("Grade"),"Grade"),id:o.identifier,student_count:o.union(o.undefined,o.integer),video_count:o.union(o.undefined,o.integer),name:o.union(o.undefined,o.string),students:o.union(o.undefined,o.array(q(o.late(()=>st)))),videos:o.union(o.undefined,o.array(q(o.late(()=>ut)))),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class ce extends ${get id(){return this.__attr("id")}get student_count(){return this.__attr("student_count")}get video_count(){return this.__attr("video_count")}get name(){return this.__attr("name")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}students(t){return this.__child("students",at,t)}videos(t){return this.__child("videos",X,t)}}function go(){return new ce}const Qe=go().student_count.video_count.name.created_at.updated_at,Oe=ho.actions(e=>({log(){console.log(JSON.stringify(e))}})),mo=D.named("MultipleChoise").props({__typename:o.optional(o.literal("MultipleChoise"),"MultipleChoise"),id:o.identifier,image:o.union(o.undefined,o.string),text:o.union(o.undefined,o.string),index:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class Bn extends ${get id(){return this.__attr("id")}get image(){return this.__attr("image")}get text(){return this.__attr("text")}get index(){return this.__attr("index")}}function fo(){return new Bn}fo().image.text.index;const zt=mo.actions(e=>({log(){console.log(JSON.stringify(e))}}));var T;(function(e){e.IMAGE_MATCH="IMAGE_MATCH",e.LETTER_SEQUENCE="LETTER_SEQUENCE",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE"})(T||(T={}));const xo=o.enumeration("QuizType",["IMAGE_MATCH","LETTER_SEQUENCE","MULTIPLE_CHOICE"]),yo=G()(D.named("Quiz").props({__typename:o.optional(o.literal("Quiz"),"Quiz"),id:o.identifier,video_id:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),show_at:o.union(o.undefined,o.number),type:o.union(o.undefined,xo),choises:o.union(o.undefined,o.array(q(o.late(()=>zt)))),question:o.union(o.undefined,o.string),questionAnswer:o.union(o.undefined,o.integer),additional_image:o.union(o.undefined,o.string),image_matcher:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}})));class oe extends ${get id(){return this.__attr("id")}get video_id(){return this.__attr("video_id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get show_at(){return this.__attr("show_at")}get type(){return this.__attr("type")}get question(){return this.__attr("question")}get questionAnswer(){return this.__attr("questionAnswer")}get additional_image(){return this.__attr("additional_image")}get image_matcher(){return this.__attr("image_matcher")}choises(t){return this.__child("choises",Bn,t)}}function vo(){return new oe}const Ie=vo().video_id.created_at.updated_at.show_at.type.question.questionAnswer.additional_image.image_matcher;_t.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){if(e===12&&(e=0),t==="pagi")return e;if(t==="siang")return e>=11?e:e+12;if(t==="sore"||t==="malam")return e+12},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}});function _o(e){var n;const t=_t((n=e.createdAt)!=null?n:e.created_at).locale("id");return{get isMoreThan3Days(){return _t(new Date).diff(t,"days")>3},get hummanize(){return e.isMoreThan3Days?t.format("LL"):t.fromNow()},get createdMoment(){return t}}}function bo(e){let t=e,n=0;for(;t>=60;)n+=1,t-=60;const r=e%60;return{minute:n,modulo:r}}function We(e){const{minute:t,modulo:n}=bo(e),r=t<10?`0${t}`:`${t}`,a=n<10?`0${n}`:`${n}`;return`${r}:${a}`}const wo={MULTIPLE_CHOICE:"Pilihan ganda",IMAGE_MATCH:"Pencocokan gambar",LETTER_SEQUENCE:"Urut gambar"},dt=yo.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get typeLabel(){return wo[e.type]}})).views(_o).views(e=>({get durationText(){var t;return We((t=e.show_at)!=null?t:0)}})),Co=G()(D.named("Video").props({__typename:o.optional(o.literal("Video"),"Video"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),title:o.union(o.undefined,o.string),caption:o.union(o.undefined,o.string),description:o.union(o.undefined,o.string),content:o.union(o.undefined,o.string),thumbnail:o.union(o.undefined,o.string),duration:o.union(o.undefined,o.integer),grades:o.union(o.undefined,o.array(q(o.late(()=>Oe)))),quizes:o.union(o.undefined,o.array(q(o.late(()=>dt)))),student_progress:o.union(o.undefined,o.array(q(o.late(()=>ot)))),quiz_count:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}})));class X extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get title(){return this.__attr("title")}get caption(){return this.__attr("caption")}get description(){return this.__attr("description")}get content(){return this.__attr("content")}get thumbnail(){return this.__attr("thumbnail")}get duration(){return this.__attr("duration")}get quiz_count(){return this.__attr("quiz_count")}grades(t){return this.__child("grades",ce,t)}quizes(t){return this.__child("quizes",oe,t)}student_progress(t){return this.__child("student_progress",le,t)}}function So(){return new X}const xe=So().created_at.updated_at.title.caption.description.content.thumbnail.duration.quiz_count,ut=Co.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get durationText(){var t;return We((t=e.duration)!=null?t:0)}})),Io=D.named("QuizAnswer").props({__typename:o.optional(o.literal("QuizAnswer"),"QuizAnswer"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),user_id:o.union(o.undefined,o.string),quiz_id:o.union(o.undefined,o.string),to:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),from:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),items:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),selected:o.union(o.undefined,o.null,o.string)}).views(e=>({get store(){return e.__getStore()}}));class Mt extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get user_id(){return this.__attr("user_id")}get quiz_id(){return this.__attr("quiz_id")}get to(){return this.__attr("to")}get from(){return this.__attr("from")}get items(){return this.__attr("items")}get selected(){return this.__attr("selected")}}function Po(){return new Mt}const Rn=Po().created_at.updated_at.user_id.quiz_id.to.from.items.selected,Qn=Io.actions(e=>({log(){console.log(JSON.stringify(e))}})),ko=D.named("PaginatorInfo").props({__typename:o.optional(o.literal("PaginatorInfo"),"PaginatorInfo"),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),firstItem:o.union(o.undefined,o.null,o.integer),hasMorePages:o.union(o.undefined,o.boolean),lastItem:o.union(o.undefined,o.null,o.integer),lastPage:o.union(o.undefined,o.integer),perPage:o.union(o.undefined,o.integer),total:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class ye extends ${get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get firstItem(){return this.__attr("firstItem")}get hasMorePages(){return this.__attr("hasMorePages")}get lastItem(){return this.__attr("lastItem")}get lastPage(){return this.__attr("lastPage")}get perPage(){return this.__attr("perPage")}get total(){return this.__attr("total")}}function $o(){return new ye}$o().count.currentPage.firstItem.hasMorePages.lastItem.lastPage.perPage.total;const Pe=ko.actions(e=>({log(){console.log(JSON.stringify(e))}})),qo=G()(D.named("VideoPaginator").props({__typename:o.optional(o.literal("VideoPaginator"),"VideoPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Pe)),data:o.union(o.undefined,o.array(q(o.late(()=>ut))))}).views(e=>({get store(){return e.__getStore()}})));class On extends ${paginatorInfo(t){return this.__child("paginatorInfo",ye,t)}data(t){return this.__child("data",X,t)}}function Do(){return new On}const Eo=Do(),zo=qo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Mo=G()(D.named("QuizPaginator").props({__typename:o.optional(o.literal("QuizPaginator"),"QuizPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Pe)),data:o.union(o.undefined,o.array(q(o.late(()=>dt))))}).views(e=>({get store(){return e.__getStore()}})));class Wn extends ${paginatorInfo(t){return this.__child("paginatorInfo",ye,t)}data(t){return this.__child("data",oe,t)}}function Ao(){return new Wn}const To=Ao(),Vo=Mo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Go=G()(D.named("StudentGradePaginator").props({__typename:o.optional(o.literal("StudentGradePaginator"),"StudentGradePaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Pe)),data:o.union(o.undefined,o.array(q(o.late(()=>st))))}).views(e=>({get store(){return e.__getStore()}})));class lt extends ${paginatorInfo(t){return this.__child("paginatorInfo",ye,t)}data(t){return this.__child("data",at,t)}}function Lo(){return new lt}const At=Lo(),Fo=Go.actions(e=>({log(){console.log(JSON.stringify(e))}})),Uo=G()(D.named("GradePaginator").props({__typename:o.optional(o.literal("GradePaginator"),"GradePaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Pe)),data:o.union(o.undefined,o.array(q(o.late(()=>Oe))))}).views(e=>({get store(){return e.__getStore()}})));class Jn extends ${paginatorInfo(t){return this.__child("paginatorInfo",ye,t)}data(t){return this.__child("data",ce,t)}}function Ho(){return new Jn}const No=Ho(),Bo=Uo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Ro=G()(D.named("DiscussionReply").props({__typename:o.optional(o.literal("DiscussionReply"),"DiscussionReply"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,q(o.late(()=>Se))),discussion:o.union(o.undefined,q(o.late(()=>ct))),content:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class Je extends ${get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get content(){return this.__attr("content")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}user(t){return this.__child("user",W,t)}discussion(t){return this.__child("discussion",ke,t)}}function Qo(){return new Je}const Tt=Qo().user_id.content.created_at.updated_at,Vt=Ro.actions(e=>({log(){console.log(JSON.stringify(e))}})),Oo=G()(D.named("Discussion").props({__typename:o.optional(o.literal("Discussion"),"Discussion"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,q(o.late(()=>Se))),content:o.union(o.undefined,o.string),replies:o.union(o.undefined,o.array(o.union(o.null,q(o.late(()=>Vt))))),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class ke extends ${get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get content(){return this.__attr("content")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}user(t){return this.__child("user",W,t)}replies(t){return this.__child("replies",Je,t)}}function Wo(){return new ke}const Gt=Wo().user_id.content.created_at.updated_at,ct=Oo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Jo=G()(D.named("DiscussionPaginator").props({__typename:o.optional(o.literal("DiscussionPaginator"),"DiscussionPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>Pe)),data:o.union(o.undefined,o.array(q(o.late(()=>ct))))}).views(e=>({get store(){return e.__getStore()}})));class jn extends ${paginatorInfo(t){return this.__child("paginatorInfo",ye,t)}data(t){return this.__child("data",ke,t)}}function jo(){return new jn}const Ko=jo(),Yo=Jo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Xo=D.named("VideoGrade").props({__typename:o.optional(o.literal("VideoGrade"),"VideoGrade"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),video_id:o.union(o.undefined,o.string),grade_id:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}}));class Kn extends ${get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get video_id(){return this.__attr("video_id")}get grade_id(){return this.__attr("grade_id")}}function Zo(){return new Kn}const ea=Zo().created_at.updated_at.video_id.grade_id,Yn=Xo.actions(e=>({log(){console.log(JSON.stringify(e))}}));var Xn;(function(e){e.ASC="ASC",e.DESC="DESC"})(Xn||(Xn={}));o.enumeration("SortOrder",["ASC","DESC"]);const ta=D.named("SimplePaginatorInfo").props({__typename:o.optional(o.literal("SimplePaginatorInfo"),"SimplePaginatorInfo"),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),firstItem:o.union(o.undefined,o.null,o.integer),lastItem:o.union(o.undefined,o.null,o.integer),perPage:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class na extends ${get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get firstItem(){return this.__attr("firstItem")}get lastItem(){return this.__attr("lastItem")}get perPage(){return this.__attr("perPage")}}function ia(){return new na}ia().count.currentPage.firstItem.lastItem.perPage;const ra=ta.actions(e=>({log(){console.log(JSON.stringify(e))}})),oa=D.named("PageInfo").props({__typename:o.optional(o.literal("PageInfo"),"PageInfo"),hasNextPage:o.union(o.undefined,o.boolean),hasPreviousPage:o.union(o.undefined,o.boolean),startCursor:o.union(o.undefined,o.null,o.string),endCursor:o.union(o.undefined,o.null,o.string),total:o.union(o.undefined,o.integer),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),lastPage:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class aa extends ${get hasNextPage(){return this.__attr("hasNextPage")}get hasPreviousPage(){return this.__attr("hasPreviousPage")}get startCursor(){return this.__attr("startCursor")}get endCursor(){return this.__attr("endCursor")}get total(){return this.__attr("total")}get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get lastPage(){return this.__attr("lastPage")}}function sa(){return new aa}sa().hasNextPage.hasPreviousPage.startCursor.endCursor.total.count.currentPage.lastPage;const da=oa.actions(e=>({log(){console.log(JSON.stringify(e))}}));var Zn;(function(e){e.ONLY="ONLY",e.WITH="WITH",e.WITHOUT="WITHOUT"})(Zn||(Zn={}));o.enumeration("Trashed",["ONLY","WITH","WITHOUT"]);var ae;(function(e){e.queryAuth="queryAuth",e.queryVideo="queryVideo",e.queryGetVideoByGrade="queryGetVideoByGrade",e.queryVideoNotInGrade="queryVideoNotInGrade",e.queryQuizAnswers="queryQuizAnswers",e.queryIsUniqueEmail="queryIsUniqueEmail",e.queryUserByGrade="queryUserByGrade",e.queryVideoByGrade="queryVideoByGrade",e.queryQuizByGrade="queryQuizByGrade",e.queryProgressByGrade="queryProgressByGrade",e.queryGradeAll="queryGradeAll",e.queryGradeById="queryGradeById",e.queryGradeQuizes="queryGradeQuizes",e.queryProgress="queryProgress",e.queryGradeByAuth="queryGradeByAuth",e.queryStudentProgress="queryStudentProgress",e.queryVideos="queryVideos",e.queryQuizes="queryQuizes",e.queryStudents="queryStudents",e.queryGrades="queryGrades",e.queryGetStudentByGrade="queryGetStudentByGrade",e.queryStudentGrades="queryStudentGrades",e.queryDiscussion="queryDiscussion"})(ae||(ae={}));var P;(function(e){e.mutateLogin="mutateLogin",e.mutateLogout="mutateLogout",e.mutateVideo="mutateVideo",e.mutateVideoUpdate="mutateVideoUpdate",e.mutateVideoDelete="mutateVideoDelete",e.mutateQuizDelete="mutateQuizDelete",e.mutateMultipleChoiseQuiz="mutateMultipleChoiseQuiz",e.mutateImageMatchQuiz="mutateImageMatchQuiz",e.mutateLetterSequenceQuiz="mutateLetterSequenceQuiz",e.mutateQuizAnswer="mutateQuizAnswer",e.mutateUser="mutateUser",e.mutateLoginWithInvitation="mutateLoginWithInvitation",e.mutateUserChangeUserPassword="mutateUserChangeUserPassword",e.mutateSentInvitation="mutateSentInvitation",e.mutateUserEdit="mutateUserEdit",e.mutateUserActivation="mutateUserActivation",e.mutateUserDelete="mutateUserDelete",e.mutateGrade="mutateGrade",e.mutateGradeEdit="mutateGradeEdit",e.mutateAddVideoInGrade="mutateAddVideoInGrade",e.mutateUpdateVideoProgress="mutateUpdateVideoProgress",e.mutateUpdateQuizProgress="mutateUpdateQuizProgress",e.mutateDiscussion="mutateDiscussion",e.mutateDiscussionReply="mutateDiscussionReply",e.mutateUpdateDiscussion="mutateUpdateDiscussion",e.mutateUpdateDiscussionReply="mutateUpdateDiscussionReply",e.mutateDeleteDiscussion="mutateDeleteDiscussion",e.mutateDeleteDiscussionReply="mutateDeleteDiscussionReply"})(P||(P={}));const ua=G()(ir.named("RootStore").extend(rr([["User",()=>Se],["Video",()=>ut],["Grade",()=>Oe],["StudentGrade",()=>st],["Progress",()=>ot],["Quiz",()=>dt],["MultipleChoise",()=>zt],["QuizAnswer",()=>Qn],["VideoPaginator",()=>zo],["PaginatorInfo",()=>Pe],["QuizPaginator",()=>Vo],["StudentGradePaginator",()=>Fo],["GradePaginator",()=>Bo],["DiscussionPaginator",()=>Yo],["Discussion",()=>ct],["DiscussionReply",()=>Vt],["VideoGrade",()=>Yn],["SimplePaginatorInfo",()=>ra],["PageInfo",()=>da]],["User","Video","Grade","StudentGrade","Progress","Quiz","MultipleChoise","QuizAnswer","Discussion","DiscussionReply","VideoGrade"],"js")).props({users:o.optional(o.map(o.late(()=>Se)),{}),videos:o.optional(o.map(o.late(()=>ut)),{}),grades:o.optional(o.map(o.late(()=>Oe)),{}),studentGrades:o.optional(o.map(o.late(()=>st)),{}),progresses:o.optional(o.map(o.late(()=>ot)),{}),quizzes:o.optional(o.map(o.late(()=>dt)),{}),multipleChoises:o.optional(o.map(o.late(()=>zt)),{}),quizAnswers:o.optional(o.map(o.late(()=>Qn)),{}),discussions:o.optional(o.map(o.late(()=>ct)),{}),discussionReplies:o.optional(o.map(o.late(()=>Vt)),{}),videoGrades:o.optional(o.map(o.late(()=>Yn)),{})}).actions(e=>({queryAuth(t,n=fe.toString(),r={}){return e.query(`query auth { auth {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},queryVideo(t,n=xe.toString(),r={}){return e.query(`query video($id: ID!) { video(id: $id) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},queryGetVideoByGrade(t,n=xe.toString(),r={}){return e.query(`query getVideoByGrade($gradeId: ID!) { getVideoByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},queryVideoNotInGrade(t,n=xe.toString(),r={}){return e.query(`query videoNotInGrade($id: ID!) { videoNotInGrade(id: $id) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},queryQuizAnswers(t,n=Rn.toString(),r={}){return e.query(`query quizAnswers { quizAnswers {
        ${typeof n=="function"?n(new Mt).toString():n}
      } }`,t,r)},queryIsUniqueEmail(t,n={}){return e.query("query isUniqueEmail($email: String!) { isUniqueEmail(email: $email) }",t,n)},queryUserByGrade(t,n=fe.toString(),r={}){return e.query(`query userByGrade($gradeId: ID!) { userByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},queryVideoByGrade(t,n=xe.toString(),r={}){return e.query(`query videoByGrade($gradeId: ID!) { videoByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},queryQuizByGrade(t,n=Ie.toString(),r={}){return e.query(`query quizByGrade($gradeId: ID!) { quizByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new oe).toString():n}
      } }`,t,r)},queryProgressByGrade(t,n=Re.toString(),r={}){return e.query(`query progressByGrade($gradeId: ID!) { progressByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new le).toString():n}
      } }`,t,r)},queryGradeAll(t,n=Qe.toString(),r={}){return e.query(`query gradeAll { gradeAll {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},queryGradeById(t,n=Qe.toString(),r={}){return e.query(`query gradeById($id: ID!) { gradeById(id: $id) {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},queryGradeQuizes(t,n=Ie.toString(),r={}){return e.query(`query gradeQuizes($gradeId: ID!) { gradeQuizes(grade_id: $gradeId) {
        ${typeof n=="function"?n(new oe).toString():n}
      } }`,t,r)},queryProgress(t,n=Re.toString(),r={}){return e.query(`query progress { progress {
        ${typeof n=="function"?n(new le).toString():n}
      } }`,t,r)},queryGradeByAuth(t,n=po.toString(),r={}){return e.query(`query gradeByAuth { gradeByAuth {
        ${typeof n=="function"?n(new at).toString():n}
      } }`,t,r)},queryStudentProgress(t,n=Re.toString(),r={}){return e.query(`query studentProgress($userId: ID!) { studentProgress(user_id: $userId) {
        ${typeof n=="function"?n(new le).toString():n}
      } }`,t,r)},queryVideos(t,n=Eo.toString(),r={}){return e.query(`query videos($gradeId: ID, $search: String, $first: Int, $page: Int) { videos(grade_id: $gradeId, search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new On).toString():n}
      } }`,t,r)},queryQuizes(t,n=To.toString(),r={}){return e.query(`query quizes($videoId: String!, $first: Int, $page: Int) { quizes(videoId: $videoId, first: $first, page: $page) {
        ${typeof n=="function"?n(new Wn).toString():n}
      } }`,t,r)},queryStudents(t,n=At.toString(),r={}){return e.query(`query students($search: String, $gradeId: String, $first: Int, $page: Int) { students(search: $search, grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new lt).toString():n}
      } }`,t,r)},queryGrades(t,n=No.toString(),r={}){return e.query(`query grades($search: String, $first: Int, $page: Int) { grades(search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new Jn).toString():n}
      } }`,t,r)},queryGetStudentByGrade(t,n=At.toString(),r={}){return e.query(`query getStudentByGrade($gradeId: ID!, $first: Int, $page: Int) { getStudentByGrade(grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new lt).toString():n}
      } }`,t,r)},queryStudentGrades(t,n=At.toString(),r={}){return e.query(`query studentGrades($gradeId: String, $search: String, $first: Int, $page: Int) { studentGrades(grade_id: $gradeId, search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new lt).toString():n}
      } }`,t,r)},queryDiscussion(t,n=Ko.toString(),r={}){return e.query(`query discussion($gradeId: ID!, $first: Int, $page: Int) { discussion(grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new jn).toString():n}
      } }`,t,r)},mutateLogin(t,n){return e.mutate("mutation login($email: String!, $password: String!) { login(email: $email, password: $password) }",t,n)},mutateLogout(t,n){return e.mutate("mutation logout { logout }",t,n)},mutateVideo(t,n=xe.toString(),r){return e.mutate(`mutation video($gradeId: String!, $title: String!, $caption: String!, $description: String!, $content: Upload!) { video(grade_id: $gradeId, title: $title, caption: $caption, description: $description, content: $content) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},mutateVideoUpdate(t,n=xe.toString(),r){return e.mutate(`mutation videoUpdate($id: ID!, $title: String!, $caption: String!, $description: String!) { videoUpdate(id: $id, title: $title, caption: $caption, description: $description) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},mutateVideoDelete(t,n=xe.toString(),r){return e.mutate(`mutation videoDelete($id: ID!) { videoDelete(id: $id) {
        ${typeof n=="function"?n(new X).toString():n}
      } }`,t,r)},mutateQuizDelete(t,n=Ie.toString(),r){return e.mutate(`mutation quizDelete($id: ID!) { quizDelete(id: $id) {
        ${typeof n=="function"?n(new oe).toString():n}
      } }`,t,r)},mutateMultipleChoiseQuiz(t,n=Ie.toString(),r){return e.mutate(`mutation multipleChoiseQuiz($videoId: String!, $showAt: Int!, $options: [MultipleChoiseInput!]!, $answer: Int!, $additionalFile: Upload, $question: String!) { multipleChoiseQuiz(video_id: $videoId, show_at: $showAt, options: $options, answer: $answer, additionalFile: $additionalFile, question: $question) {
        ${typeof n=="function"?n(new oe).toString():n}
      } }`,t,r)},mutateImageMatchQuiz(t,n=Ie.toString(),r){return e.mutate(`mutation imageMatchQuiz($videoId: String!, $showAt: Int!, $text: String!) { imageMatchQuiz(video_id: $videoId, show_at: $showAt, text: $text) {
        ${typeof n=="function"?n(new oe).toString():n}
      } }`,t,r)},mutateLetterSequenceQuiz(t,n=Ie.toString(),r){return e.mutate(`mutation letterSequenceQuiz($videoId: String!, $showAt: Int!, $text: String!) { letterSequenceQuiz(video_id: $videoId, show_at: $showAt, text: $text) {
        ${typeof n=="function"?n(new oe).toString():n}
      } }`,t,r)},mutateQuizAnswer(t,n=Rn.toString(),r){return e.mutate(`mutation quizAnswer($args: CreateQuizAnswerInput!) { quizAnswer(args: $args) {
        ${typeof n=="function"?n(new Mt).toString():n}
      } }`,t,r)},mutateUser(t,n=fe.toString(),r){return e.mutate(`mutation user($args: CreateUserInput!) { user(args: $args) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},mutateLoginWithInvitation(t,n){return e.mutate("mutation loginWithInvitation($invitation: String!, $password: String!) { loginWithInvitation(invitation: $invitation, password: $password) }",t,n)},mutateUserChangeUserPassword(t,n){return e.mutate("mutation userChangeUserPassword($password: String!, $passwordConfirmation: String!) { userChangeUserPassword(password: $password, password_confirmation: $passwordConfirmation) }",t,n)},mutateSentInvitation(t,n){return e.mutate("mutation sentInvitation($id: String!) { sentInvitation(id: $id) }",t,n)},mutateUserEdit(t,n=fe.toString(),r){return e.mutate(`mutation userEdit($id: String!, $name: String, $email: String) { userEdit(id: $id, name: $name, email: $email) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},mutateUserActivation(t,n=fe.toString(),r){return e.mutate(`mutation userActivation($id: String!, $password: String!) { userActivation(id: $id, password: $password) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},mutateUserDelete(t,n=fe.toString(),r){return e.mutate(`mutation userDelete($id: String!) { userDelete(id: $id) {
        ${typeof n=="function"?n(new W).toString():n}
      } }`,t,r)},mutateGrade(t,n=Qe.toString(),r){return e.mutate(`mutation grade($name: String!) { grade(name: $name) {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},mutateGradeEdit(t,n=Qe.toString(),r){return e.mutate(`mutation gradeEdit($id: ID!, $name: String) { gradeEdit(id: $id, name: $name) {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},mutateAddVideoInGrade(t,n=ea.toString(),r){return e.mutate(`mutation addVideoInGrade($videoId: ID!, $gradeId: ID!) { addVideoInGrade(video_id: $videoId, grade_id: $gradeId) {
        ${typeof n=="function"?n(new Kn).toString():n}
      } }`,t,r)},mutateUpdateVideoProgress(t,n=Re.toString(),r){return e.mutate(`mutation updateVideoProgress($videoId: ID!, $play: Float!) { updateVideoProgress(video_id: $videoId, play: $play) {
        ${typeof n=="function"?n(new le).toString():n}
      } }`,t,r)},mutateUpdateQuizProgress(t,n=Re.toString(),r){return e.mutate(`mutation updateQuizProgress($quizId: ID!, $correct: Boolean!) { updateQuizProgress(quiz_id: $quizId, correct: $correct) {
        ${typeof n=="function"?n(new le).toString():n}
      } }`,t,r)},mutateDiscussion(t,n=Gt.toString(),r){return e.mutate(`mutation discussion($gradeId: ID!, $userId: ID!, $content: String!) { discussion(grade_id: $gradeId, user_id: $userId, content: $content) {
        ${typeof n=="function"?n(new ke).toString():n}
      } }`,t,r)},mutateDiscussionReply(t,n=Tt.toString(),r){return e.mutate(`mutation discussionReply($userId: ID!, $discussionId: ID!, $content: String!) { discussionReply(user_id: $userId, discussion_id: $discussionId, content: $content) {
        ${typeof n=="function"?n(new Je).toString():n}
      } }`,t,r)},mutateUpdateDiscussion(t,n=Gt.toString(),r){return e.mutate(`mutation updateDiscussion($id: ID!, $content: String!) { updateDiscussion(id: $id, content: $content) {
        ${typeof n=="function"?n(new ke).toString():n}
      } }`,t,r)},mutateUpdateDiscussionReply(t,n=Tt.toString(),r){return e.mutate(`mutation updateDiscussionReply($id: ID!, $content: String!) { updateDiscussionReply(id: $id, content: $content) {
        ${typeof n=="function"?n(new Je).toString():n}
      } }`,t,r)},mutateDeleteDiscussion(t,n=Gt.toString(),r){return e.mutate(`mutation deleteDiscussion($id: ID!) { deleteDiscussion(id: $id) {
        ${typeof n=="function"?n(new ke).toString():n}
      } }`,t,r)},mutateDeleteDiscussionReply(t,n=Tt.toString(),r){return e.mutate(`mutation deleteDiscussionReply($id: ID!) { deleteDiscussionReply(id: $id) {
        ${typeof n=="function"?n(new Je).toString():n}
      } }`,t,r)}}))),la=ua.actions(e=>({log(){console.log(JSON.stringify(e))}})),ei=or(un),M=ar(ei,un),ca=bt(ge({email:N().required().email(),password:N().required().min(6)})),pa=e=>[{name:"email",type:"email",label:"Masukan email anda",icon:sr},{name:"password",type:"password",label:"Password",icon:dr}].map(t=>x(g({},t),{disabled:e,fullWidth:!0})),ti=l.exports.createContext(null),Lt=()=>l.exports.useContext(ti);function ni(){const e=Lt();return l.exports.useCallback(async t=>{const n=await e.queryAuth();if(t&&n&&n.auth){const{auth:r}=n;return t({id:r.id,name:r.name,email:r.email,role:r.role})}if(n&&n.auth){const{auth:r}=n;return{name:r.name,email:r.email,role:r.role}}return null},[])}function ha(e){const t=Ve({resolver:ca}),{setQuery:n,loading:r,data:a}=M(),s=a&&!a.login&&!r;l.exports.useEffect(()=>{a&&a.login&&e()},[a]);const d=t.handleSubmit(u=>n(c=>c.mutateLogin(u)));return{form:t,onSubmit:d,loading:r,isCredentialInvalid:s}}class ga extends l.exports.Component{constructor(t){super(t);_(this,"rootStore");this.rootStore=la.create(void 0,{gqlHttpClient:new ur.GraphQLClient(this.props.url,{credentials:"include"})})}render(){return i(ei.Provider,{value:this.rootStore,children:i(ti.Provider,{value:this.rootStore,children:this.props.children})})}}const ma="imandidikr@gmail.com",fa="password";var xa={email:ma,password:fa};function E(e=!1){const[t,n]=l.exports.useState(e),r=l.exports.useCallback(s=>()=>n(s),[]),a=l.exports.useCallback(()=>{n(!t)},[t]);return[t,{force:r,toggle:a,inline:n}]}const ya=()=>{const[e,{force:t}]=E(),{user:n,setUser:r}=re(),a=ni(),s=Lt(),d=l.exports.useCallback(()=>s.mutateLogin(xa).then(({login:u})=>{if(u)return a(r)}),[]);return i(S,{children:i(lr,{ariaLabel:"SpeedDial example",open:e,sx:{position:"fixed",bottom:"1rem",right:"1rem"},onMouseEnter:t(!0),onMouseLeave:t(!1),icon:i(cr,{}),children:i(pr,{onClick:d,FabProps:{disabled:Boolean(n)},tooltipTitle:"Login",icon:i(hr,{})})})})};function va(){const[e]=ln("admin-sidebar-open"),[t,n]=ln("admin-sidebar-open"),r=()=>n(!0),a=()=>n(!1),[s,d]=l.exports.useState(""),u=Ge(),c=cn(u.breakpoints.down("md"));return l.exports.useEffect(()=>{c&&e&&n(!1)},[e,c]),{title:s,setTitle:d,sidebaropen:Boolean(t),handleCloseDrawer:a,handleOpenDrawer:r}}const ii=l.exports.createContext(null),Ft=()=>l.exports.useContext(ii);function Ut(){const e=Ge();return cn(e.breakpoints.down("sm"))}function $e(e){return wt(e).replaceAll("query","").replaceAll("mutate","").camelCase().value()}function qe({api:e,merge:t={},parser:n}){const{data:r,loading:a,error:s,setQuery:d}=M(),u=$e(e),c=f=>(n&&(f=g({},n(f))),d(m=>m[e](g(g({},f),t))));return[{loading:a,response:r?r[u]:null,error:s},c]}const _a=240,ba=gr(Le,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:t})=>g({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},t&&{marginLeft:_a,[e.breakpoints.down("sm")]:{marginLeft:0,width:"100%"},transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})})),wa={paddingLeft:[0,0],paddingRight:[0,0],display:["block","flex"],color:"#2c3e50","& > .page-info":{paddingX:2,display:"flex",alignItems:"center"},"& > .search-bar":{borderRadius:1,display:"flex",bgcolor:"red",alignItems:"center",border:"solid 1px #f8f8f8",boxShadow:"inset 0 1px 2px #eee","& > .icon-container":{alignItems:"center",display:"flex",paddingX:2,background:"#f9f9f9",height:42}}},Ca=C(()=>{const{user:e}=re(),t=Ut(),[n,r]=l.exports.useState(null),[{loading:a,response:s},d]=qe({api:P.mutateLogout}),{setUser:u}=re(),c=B();l.exports.useEffect(()=>{s&&(c("/"),u(null))},[s]);const f=()=>{d({})},m=b=>{r(n?null:b.target)};if(!e)return i(S,{});const{name:v}=e;return p(S,{children:[i(mr,{sx:{zIndex:100*100,color:"white"},open:a,children:p(h,{sx:{textAlign:"center"},children:[i(te,{color:"inherit"}),i(y,{children:"Mengeluarkan akun anda"})]})}),i(fr,{PaperProps:{elevation:1,sx:{width:200}},onClose:()=>r(null),open:Boolean(n),anchorEl:n,children:i(pn,{onClick:f,children:"Logout"})}),i(h,{sx:{marginLeft:"auto",position:["absolute","static"],top:0,right:0},children:t?i(we,{onClick:m,children:i(hn,{})}):i(w,{onClick:m,endIcon:i(xr,{}),startIcon:i(hn,{}),children:t?"":v})})]})}),ri=()=>i(S,{children:i(ba,{sx:{borderLeft:"none",background:"white",color:"black"},variant:"outlined",elevation:0,position:"fixed",open:!1,children:i(L,{children:p(Fe,{sx:wa,children:[i(h,{className:"page-info",children:p(h,{sx:{display:"flex",alignItems:"center",bgcolor:e=>e.palette.grey.A100,borderRadius:2},children:[i(yr,{sx:{flex:1,paddingLeft:2},placeholder:"Pencarian"}),i(Ct,{sx:{mr:2}})]})}),i(Ca,{})]})})})}),oi=()=>{const{user:e}=re();return e?i(h,{sx:{minHeight:"10vh",display:"flex",alignItems:"center",bgcolor:"primary.dark",color:"white",py:3},children:p(L,{children:[p(y,{sx:{fontWeight:"bolder"},variant:"h4",children:["Selamat datang, ",e.name]}),i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:e.role})]})}):i(S,{})},ai=l.exports.createContext(null),se=()=>l.exports.useContext(ai);class Sa extends l.exports.Component{constructor(t){super(t);_(this,"updateNav",t=>{this.setState({navs:[...t]})});_(this,"updateBackUrl",(t=null)=>{this.setState({backurl:t})});_(this,"getContextValue",()=>x(g({},this.state),{updateNavs:this.updateNav,updateBackUrl:this.updateBackUrl}));this.state={navs:[],backurl:null}}render(){return i(ai.Provider,{value:this.getContextValue(),children:this.props.children})}}const si=()=>{const{navs:e,backurl:t}=se(),n=B(),{pathname:r}=et(),a=u=>{n(u)};console.log(r),l.exports.useEffect(()=>{document.body.scroll({top:0});const u=document.getElementById("root");u&&(u.scrollTo(0,0),window.scrollTo({top:0,behavior:"smooth"}))},[r]);const s=()=>{t&&n(t.url)},d=()=>{const u=e.findIndex(c=>c.path===r.replaceAll("%20"," "));return console.log(e),u===-1?0:u};return i(Le,{component:H.div,animate:{height:e.length?"fit-content":0},sx:{overflow:"hidden"},position:"static",color:"transparent",elevation:0,variant:"outlined",children:p(L,{sx:{"& > *":{color:"white"},py:0,minHeight:"fit-content",display:"flex",alignItems:"center"},children:[i(gn,{sx:{py:0},value:d(),children:e.map((u,c)=>i(tt,{onClick:()=>a(u.path),sx:{py:0,my:0,textTransform:"none",fontWeight:"bolder"},label:u.label,value:c},u.path))}),i(H.div,{style:{flex:1,marginLeft:"auto",width:"fit-content",textAlign:"right"},animate:{opacity:t?1:0},children:i(w,{onClick:s,startIcon:i(St,{}),sx:{textTransform:"none"},children:t==null?void 0:t.label})})]})})},Ia=({children:e})=>{const t=va();return t.sidebaropen,t.handleOpenDrawer,Ut(),se(),l.exports.useEffect(()=>{},[]),i(ii.Provider,{value:t,children:p(h,{sx:{background:"#f9f9f9",minHeight:"100vh"},children:[i(mn,{}),i(ri,{}),p(h,{id:"main-component",component:"main",sx:{flexGrow:1,minHeight:"100vh"},children:[i(Fe,{}),i(oi,{}),i(si,{}),e]})]})})},Pa=({children:e})=>i(S,{children:e});function ka(){const{user:e}=re(),{loading:t,data:n}=M(d=>{var u;return d.queryStudentProgress({userId:(u=e==null?void 0:e.id)!=null?u:""})});console.log("Data : ",n);const r=()=>{var d;return n&&((d=n.studentProgress)==null?void 0:d.videoHistories)?n.studentProgress.videoHistories:[]},a=()=>{var d;return n&&((d=n.studentProgress)==null?void 0:d.videoHistories)?n.studentProgress.quizHistories:[]},s=d=>{const u=r().find(c=>c.video_id.toString()===d);return u?u.time:0};return{progress:n?n.studentProgress:null,loading:!n||t,videoHistory:r(),quizHistory:a(),getPlaying:s}}function $a(){const{loading:e,data:t}=M(n=>n.queryGradeByAuth({},r=>r.id.grade(a=>a.id.name.video_count)));return{studentGrade:t?t.gradeByAuth:null,loading:!t||e}}function qa({studentGrade:e}){const{data:t,loading:n,setQuery:r}=M(),a=t?t.getVideoByGrade:[],s=(d,u)=>{const c=a.find(m=>m.id===d);if(!c)return 0;const f=u/c.duration*100;return isFinite(f)?Math.floor(f):0};return l.exports.useEffect(()=>{e&&r(d=>d.queryGetVideoByGrade({gradeId:e.grade.id}))},[e]),{videos:a,loading:!t||n,getPlayingPercentage:s}}function Da(){const e=ka(),t=$a(),n=qa(t),r=[e.loading,t.loading,n.loading].find(Boolean);return{progressInfo:e,videoList:n,gradeInfo:t,isPageLoading:Boolean(r)}}const di=l.exports.createContext(null);function ve(){return l.exports.useContext(di)}const je=()=>i(h,{sx:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%,-50%)",zIndex:100*100},children:i(te,{size:150})}),Ea=C(({children:e})=>{const t=Da();return i(di.Provider,{value:t,children:p(h,{sx:{background:"#f9f9f9",minHeight:"100vh"},children:[i(mn,{}),i(ri,{}),p(h,{id:"main-component",component:"main",sx:{flexGrow:1,minHeight:"100vh"},children:[i(Fe,{}),i(oi,{}),i(si,{}),t.isPageLoading?i(je,{}):e]})]})})});function Ht(e){const{updateNavs:t,navs:n}=se();l.exports.useEffect(()=>{!e.length&&!n.length&&t([{label:"Dashboard",path:"/"},{label:"Diskusi",path:"/discussion"}])},[e])}const za={[me.ADMIN]:Ia,[me.STUDENT]:Ea,GUEST:Pa},Ma=e=>{const{user:t}=re(),n=t?t.role:"GUEST",r=za[n];return i(r,g({},e))};class ui extends l.exports.Component{constructor(){super(...arguments);_(this,"getValue",()=>{const{type:t="text",select:n,controller:r}=this.props;switch(t){case"number":return 0;case"money":return 0;default:{if(n)return"__default__";if(r){const{value:a}=r.field;if(!(a instanceof File))return a!=null?a:""}return this.props.value?this.props.value:""}}});_(this,"handleChange",t=>{const n=t.target.value,{onChange:r}=this.props;r&&r(n),this.props.controller&&this.props.controller.field.onChange(n)})}propBuilder(){var c;const a=this.props,{controller:t}=a,n=U(a,["controller"]),r={onChange:this.handleChange,value:this.getValue()};if(t){const s=t,{field:d}=s,u=d,{ref:f}=u,m=U(u,["ref"]),{fieldState:v}=s;if(v.error){const{message:b}=v.error;r.helperText=b,r.error=!0}return r.onChange=b=>{m==null||m.onChange(b),this.handleChange(b)},x(g(g(g({},n),m),r),{inputRef:f,inputProps:g({},(c=n.inputProps)!=null?c:{})})}return g(g({},n),r)}render(){return i(fn,g({},this.propBuilder()))}}const A=n=>{var r=n,{noUseForm:e}=r,t=U(r,["noUseForm"]);const a=Ue();if(!a&&!e&&!t.onChange)throw new Error("Please provide onChange props if without use useForm");if(e)return i(ui,g({},t));const s=ne({name:t.name,control:a.control});return i(ui,g({controller:s},t))},Aa=({component:e,makeProps:t,getKey:n,data:r})=>i(S,{children:r.map(a=>{let s=n?n(a):a;typeof a=="object"&&"key"in a&&(s=a.key);const d=x(g({},t?t(a):a),{key:s});return i(e,g({},d))})});function Ta(e){return l.exports.useCallback(()=>i(Aa,g({},e)),[e])}const Va={display:{sm:"block",md:"flex"},bgcolor:"primary.main",height:"100vh",overflow:"hidden","& > .content":{display:"flex",alignItems:"center",justifyContent:"center",width:{sm:"100%",md:"50%"},height:"100%"}},Ga=n=>{var r=n,{icon:e}=r,t=U(r,["icon"]);return i(h,{sx:{marginY:2,padding:2},children:i(A,x(g({},t),{InputProps:{endAdornment:i(xn,{position:"end",children:i(e,{})})}}))})},La=()=>{const e=ni(),{enqueueSnackbar:t}=R(),n=re(),r=B();return()=>{e().then(a=>{if(a){const{name:s}=a;t(`Selamat datang ${s}`),r(a.role===me.ADMIN?"/classroom":"/"),n.setUser(a)}})}},Fa=C(()=>{const e=La(),{isCredentialInvalid:t,form:n,onSubmit:r,loading:a}=ha(e),s=pa(a),d=Ta({getKey({name:u}){return u},component:Ga,data:s});return i(K,x(g({},n),{children:p("form",{onSubmit:r,children:[i(d,{}),p(h,{textAlign:"right",padding:2,children:[i(He,{in:t,timeout:"auto",children:i(y,{sx:{color:"error.light",marginY:2},variant:"subtitle2",children:"Kombinasi email & password salah"})}),i(w,{variant:"contained",size:"large",type:"submit",endIcon:a?i(te,{sx:{color:"white"},size:15}):i(vr,{}),children:"Masuk"})]})]})}))}),Ua=()=>p(h,{component:"main",sx:Va,children:[i("div",{className:"content",children:p(h,{sx:{color:"white"},children:[i(y,{variant:"h1",children:"Bisindo"}),i(y,{variant:"h5",children:"Selamat datang"}),i(y,{children:"Kami adalah platform kursus online untuk pembelajaran bahasa isyarat."})]})}),i("div",{className:"content",children:p(F,{sx:{padding:2,width:"80%",height:"60%",color:"#2c3e50"},children:[i(y,{align:"center",variant:"h5",sx:{fontWeight:"light"},children:"Login dengan email & password anda"}),i(Q,{sx:{marginY:2}}),i(Fa,{})]})})]});function Ha(e){return e?{data:e.data,paginator:e.paginatorInfo}:{data:[],paginator:{perPage:10,currentPage:0,count:0,lastPage:0,lastItem:0,firstItem:0,hasMorePages:!1,total:0,__typename:"PaginatorInfo"}}}const Na=(e,t)=>{const n=$e(e),{data:r,loading:a,setQuery:s}=M(),d=c=>s(f=>f[e](c,m=>m.data(t).paginatorInfo(new ye().currentPage.hasMorePages.lastPage.perPage.count.total.lastItem.firstItem)));return{result:Ha(r&&r[n]?r[n]:null),fetch:d,loading:a,hasResponse:Boolean(r)}},Ba=({include:e,callback:t})=>{const[n,r]=l.exports.useState(e);return{updateParameter:d=>u=>{const c=x(g({},n),{[d]:u});r(g({},c)),t(x(g({},c),{page:1,first:10}))},removeParam:d=>{let u={};r(c=>(delete c[d],u=c,g({},c))),t(x(g({},u),{page:1,first:10}))},parameter:n}},Ra=({callback:e,paginator:t,merge:n})=>{const r=l.exports.useCallback((d,u)=>{e(x(g({},n),{page:d,first:u}))},[n]);return{go:r,next:()=>r(t.currentPage+1,10),prev:()=>r(t.currentPage+1,10)}};function Qa({includeQuery:e,api:t,selector:n}){const{fetch:r,loading:a,result:s,hasResponse:d}=Na(t,n),{parameter:u,updateParameter:c,removeParam:f}=Ba({include:e,callback:r}),m=Ra({callback:r,paginator:s.paginator,merge:u}),v=l.exports.useCallback(()=>{r(g({page:1,first:10},e))},[e]),b=d&&s.data.length===0;return{result:s,actions:x(g({},m),{updateParameter:c,parameter:u,removeParam:f}),loading:a,initialFetch:v,isEmpty:b,hasResponse:d}}function pt(e,t){return(n={})=>Qa({includeQuery:n,api:e,selector:t})}const Oa={quizByVideo:pt(ae.queryQuizes,e=>e.show_at.id.type.additional_image.question.questionAnswer.image_matcher.choises(t=>t.id.image.text.index)),grades:pt(ae.queryGrades,Qe),students:pt(ae.queryStudents,e=>e.id.student(fe).grade(t=>t.id.name)),discussion:pt(ae.queryDiscussion,e=>e.id.content.created_at.user_id.user(t=>t.name.id).replies(t=>t.user_id.id.user(n=>n.name).content.user_id.created_at))},li=l.exports.createContext(null);function V(){return l.exports.useContext(li)}const ht=C(({dataKey:e,includes:t={},children:n})=>{const r=Oa[e];if(!r)throw new Error(`Paginator for ${e} is not defined`);const a=r(t);return i(li.Provider,{value:a,children:n})}),Wa=["videos","student","editor","discussion"],Ja=()=>{const[e,t]=l.exports.useState({selected:null,mobileControlTab:"list",tab:"videos"}),{selected:n,mobileControlTab:r}=e;Ut();const a=l.exports.useCallback(c=>{t(f=>x(g({},f),{selected:c,mobileControlTab:"manage"}))},[r]),s=l.exports.useCallback(c=>{t(f=>x(g({},f),{tab:c}))},[]),d=l.exports.useCallback(c=>{t(f=>x(g({},f),{mobileControlTab:c}))},[]);l.exports.useEffect(()=>{n&&s("videos")},[n]);const u=l.exports.useCallback(c=>()=>a(c),[]);return{selected:n,tablist:Wa,activeTab:e.tab,mobileControlTab:r,setMobileControlTab:d,setActiveTab:s,setModel:u}},ci=l.exports.createContext(null);function ja(){return l.exports.useContext(ci)}function Ka({api:e,rule:t,parser:n,merge:r={}}){const a=Ve({resolver:bt(t)}),s=$e(e),{data:d,store:u}=M(),[c,f]=l.exports.useState(!1),[m,v]=l.exports.useState(!1),[b,k]=l.exports.useState({response:null}),I=l.exports.useCallback(ee=>{v(!1),k({response:null});const de=n?n(g(g({},ee),r)):g(g({},ee),r);return f(!0),u[e](de).currentPromise().then(Te=>{f(!1),Te&&Te[s]&&k({response:Te}),v(!1)}).catch(()=>{console.log("Error"),v(!0),f(!1)})},[e]),z=a.handleSubmit(I),Z=l.exports.useCallback(()=>{a.reset({})},[]),he=l.exports.useCallback(ee=>{Object.values(de=>{a.setValue(de,ee[de])})},[]);return{response:b.response,form:a,setFormValue:he,reset:Z,loading:c,handler:z,error:m}}function J({api:e,rule:t}){return(n={},r)=>Ka({api:e,rule:t,merge:n,parser:r})}const Nt=ge({name:N().required()}),Bt={videos:{required:"Silahkan pilih video terlebih dahulu"},title:{required:"Silahkan isi judul video"},caption:{required:"Silahkan isi caption video"},description:{required:"Silahkan isi deskripsi video"}},Ya=It().test("video",Bt.videos.required,e=>e&&e instanceof File),pi=It().test("description validator",Bt.description.required,e=>{try{return e.blocks.length===1?e.blocks[0].text!=="":e.blocks.length>0}catch{return!1}}),Xa=ge({content:Ya.required(Bt.videos.required),title:N().required(),caption:N().required(),description:pi.required()}),Za=ge({title:N().required(),caption:N().required(),description:pi.required()}),hi=ge({email:N().required().email(),name:N().required()}),es=ge({password:N().required("Password wajib disi").min(6,"Minimal password  6 karakter"),passwordConfirmation:N().required("Silahkan konfirmasi password").oneOf([_r("password")],"Konfirmasi password salah")}),ts={description:{required:"Silahkan isi konten diskusi"}},ns=It().test("description validator",ts.description.required,e=>{try{return e.blocks.length===1?e.blocks[0].text!=="":e.blocks.length>0}catch{return!1}}),gt=ge({content:ns.required()}),is={createBatch:J({api:P.mutateGrade,rule:Nt}),editBatch:J({api:P.mutateGrade,rule:Nt}),addVideo:J({api:P.mutateVideo,rule:Xa}),addUser:J({api:P.mutateUser,rule:hi}),addDiscussion:J({api:P.mutateDiscussion,rule:gt}),editDiscussion:J({api:P.mutateUpdateDiscussion,rule:gt}),addDiscussionReply:J({api:P.mutateDiscussionReply,rule:gt}),editDiscussionReply:J({api:P.mutateUpdateDiscussionReply,rule:gt}),editVideo:J({api:P.mutateVideoUpdate,rule:Za}),activation:J({api:P.mutateUserActivation,rule:es}),editUser:J({api:P.mutateUserEdit,rule:hi})},gi=l.exports.createContext(null);function _e(){return l.exports.useContext(gi)}const De=C(({mutateKey:e,merge:t={},parser:n,children:r})=>{const a=is[e];if(!a)throw new Error(`Please implemented mutation ${e}`);const s=a(t,n);return i(gi.Provider,{value:s,children:r})}),rs=C(({onSuccess:e,model:t})=>{const{setFormValue:n,response:r,form:a,handler:s,loading:d}=_e();return l.exports.useEffect(()=>{r&&e(r)},[r]),l.exports.useEffect(()=>{t&&n({name:t.name})},[t]),i(K,x(g({},a),{children:p("form",{onSubmit:s,children:[i(A,{fullWidth:!0,name:"name",label:"Nama batch"}),i(w,{sx:{marginY:2},variant:"contained",size:"large",type:"submit",endIcon:d?i(te,{sx:{color:"white"},size:15}):i(nt,{}),children:"Simpan"})]})}))}),os={marginTop:2,textTransform:"none",mb:2},as=()=>{const[e,{toggle:t,inline:n}]=E(),{enqueueSnackbar:r}=R(),{initialFetch:a}=V();return p(S,{children:[i(w,{onClick:t,startIcon:e?i(yn,{}):i(vn,{}),sx:os,variant:"outlined",children:e?"Tutup":"Tambah batch baru"}),i(He,{in:e,sx:{mb:2},timeout:"auto",children:i(De,{mutateKey:"createBatch",children:i(F,{sx:{padding:2,borderRadius:0},children:i(rs,{onSuccess:d=>{r(`${d.name} berhasil di tambahkan`,{variant:"success"}),n(!1),a()}})})})})]})},ss=()=>{const[e,t]=l.exports.useState(""),n=v=>t(v),{actions:{removeParam:r,parameter:a,updateParameter:s},result:d,loading:u,hasResponse:c}=V();return i(L,{children:p("form",{onSubmit:v=>{s("search")(`%${e}%`),v.preventDefault()},onReset:()=>{r("search"),t("")},children:[i(A,{fullWidth:!0,disabled:u,variant:"standard",InputProps:{startAdornment:i(xn,{sx:{px:2},position:"start",children:i(Ct,{})})},sx:{bgcolor:"white","& input":{py:2}},placeholder:"Masukan kata kunci pencarian",name:"search",onChange:n,value:e,noUseForm:!0,size:"medium"}),p(h,{sx:{p:1,display:"flex",justifyContent:"flex-end"},children:[i(h,{sx:{display:c?"block":"none"},children:i(y,{variant:"caption",children:d.paginator.total?`Hasil pencarian : ${d.paginator.total} item`:`Data tidak di temukan dengan kata kunci "${a.search}"`})}),p(h,{sx:{ml:"auto"},children:[i(w,{type:"submit",startIcon:i(Ct,{}),disabled:u,children:"Cari"}),i(w,{type:"reset",startIcon:i(br,{}),disabled:u||!e,children:"Reset"})]})]})]})})},mi=({children:e,handleClose:t,open:n,isCloseDisabled:r})=>i(it,{open:n,PaperProps:{sx:{minWidth:["80vw","50vw"]}},onClose:r?void 0:t,children:i(Pt,{children:e})}),j=a=>{var s=a,{loading:e,disabled:t,icon:n}=s,r=U(s,["loading","disabled","icon"]);return i(w,x(g({},r),{startIcon:e?i(te,{size:20}):n,type:"submit",disabled:t||e}))};function Ee({message:e,show:t,variant:n,callback:r,autoShow:a}){const{enqueueSnackbar:s,closeSnackbar:d}=R(),u=()=>{const c=()=>typeof e=="function"?e():e;d(),s(c(),{variant:n})};return l.exports.useEffect(()=>(d(),()=>{d()}),[]),l.exports.useEffect(()=>{a&&t&&r&&r(),!a&&t&&(r&&r(),u())},[t,n]),u}function ds(e=""){const t=B();return{navigate:()=>{t(e)},to:a=>()=>t(a)}}const fi=({icon:e,text:t})=>p(h,{sx:{display:"inline-flex",alignItems:"center",mr:2},children:[i(h,{sx:{mr:2},children:e}),i(y,{variant:"caption",children:t})]}),us=C(({batch:e,onSelect:t})=>{const n=`/classroom/${wt(e.name).slugify().value()}/${e.id}/videos`,{navigate:r}=ds(n);return p(F,{sx:{p:2,mx:[1,0],mb:2,display:["block","flex"]},children:[p(h,{sx:{width:["100%","80%"]},children:[i(y,{variant:"h4",sx:{textTransform:"capitalize"},children:e.name}),i(fi,{text:`${e.student_count} siswa`,icon:i(wr,{})}),i(fi,{text:`${e.video_count} video`,icon:i(Cr,{})})]}),p(h,{sx:{width:["100%","20%"],"& >button":{mb:1}},children:[i(w,{onClick:r,size:"small",fullWidth:!0,variant:"outlined",children:"Manage"}),i(w,{onClick:t(e,"update"),size:"small",fullWidth:!0,variant:"outlined",children:"Ganti nama batch"}),i(w,{onClick:t(e,"delete"),size:"small",fullWidth:!0,variant:"outlined",children:"Hapus"})]})]})}),ls=C(({selected:e,action:t,handleClose:n})=>{const r=Ve({resolver:bt(Nt)}),[{response:a,loading:s},d]=qe({api:P.mutateGradeEdit,merge:{id:e?e.id:""}}),u=r.handleSubmit(d),c=Ee({show:Boolean(a&&t==="update"),message:"Perubahan berhasil disimpan",variant:"success",autoShow:!1});return l.exports.useEffect(()=>{a&&(n(),c())},[a]),l.exports.useEffect(()=>{e&&r.setValue("name",e.name)},[e]),i(mi,{handleClose:n,open:t==="update",isCloseDisabled:s,children:i(K,x(g({},r),{children:p("form",{onSubmit:u,children:[i(y,{variant:"subtitle1",children:"Ganti nama batch"}),i(A,{fullWidth:!0,name:"name"}),i(j,{icon:i(nt,{}),loading:s,children:"Simpan"})]})}))})}),cs=C(({selected:e,action:t,handleClose:n})=>{const[{response:r,loading:a},s]=qe({api:P.mutateGradeDelete,merge:{id:e?e.id:""}}),d=Ee({message:r?`${r.name} berhasil di hapus`:"",autoShow:!1,variant:"success",show:Boolean(r)}),{initialFetch:u}=V();return l.exports.useEffect(()=>{r&&(d(),u(),n())},[r]),p(mi,{handleClose:n,open:t==="delete",isCloseDisabled:a,children:[p(y,{variant:"h5",children:["Apakah anda yakin untuk menghapus ",e?e.name:""," ?"]}),p(h,{sx:{pt:4,width:["100%","50%"],"& > button":{textTransform:"capitalize"}},children:[i(j,{onClick:()=>s({}),icon:i(Ce,{}),loading:a,children:"Hapus"}),i(w,{variant:"outlined",disabled:a,onClick:n,children:"Batal"})]})]})}),ps=C(()=>{const{result:{data:e}}=V(),[t,n]=l.exports.useState({selected:null,action:null}),{selected:r,action:a}=t,s=(u,c)=>()=>n({selected:u,action:c}),d=()=>{n({action:null,selected:r}),setTimeout(()=>{n({selected:null,action:null})},1e3)};return p(L,{children:[e.map(u=>i(us,{batch:u,onSelect:s},u.id)),i(ls,x(g({},t),{handleClose:d})),i(cs,x(g({},t),{handleClose:d}))]})}),hs=()=>{const{initialFetch:e,loading:t,isEmpty:n,hasResponse:r}=V();return ja(),l.exports.useEffect(()=>{e()},[]),p(S,{children:[i(L,{children:i(as,{})}),i(ss,{}),i(ps,{})]})},gs=()=>{const{setTitle:e}=Ft(),{updateNavs:t}=se();l.exports.useEffect(()=>(e("Menagemen batch"),t([]),()=>{e("")}),[]);const n=Ja();return i(ht,{dataKey:"grades",children:i(ci.Provider,{value:n,children:i(hs,{})})})},ms=()=>i(gs,{}),fs=C(e=>{const{updateBackUrl:t}=se();return l.exports.useEffect(()=>(t({url:"classroom",label:"kembali ke ruang kelas"}),()=>t(null)),[]),i(L,{children:i(_n,{})})}),xs=C(e=>{const t=et(),{updateBackUrl:n}=se();return l.exports.useEffect(()=>{t.state&&t.state.backurl&&n(t.state.backurl)},[t]),i(L,{children:i(_n,{})})});function ys(e,t){const n=$e(e),{data:r,setQuery:a,loading:s}=M(),d=()=>{a(f=>f[e](t))};l.exports.useEffect(()=>{d()},[]);const u=()=>r?r[n]:[],c=()=>{if(s)return!1;const f=r&&r[n];return f?f.length===0:!1};return{data:u(),isEmpty:c(),loading:s,fetch:d,hasResponse:Boolean(r)}}function xi(e){return t=>ys(e,t)}const vs=xi(ae.queryVideoByGrade),_s={videoByGrade:vs,studentByGrade:xi(ae.queryStudents)},yi=l.exports.createContext(null);function bs(){return l.exports.useContext(yi)}const ws=C(({dataKey:e,props:t={},children:n})=>{const r=_s[e](t);return i(yi.Provider,{value:r,children:n})});function Cs({api:e,provider:t,id:n}){const r=$e(e),a=b=>b[e]({id:n}),{loading:s,error:d,setQuery:u,data:c}=M(a),f=()=>u(a),m={refreshModel:f,pageLoading:s,error:Boolean(d),modelId:n,model:c?c[r]:null,hasResponse:Boolean(c&&c[r])};return x(g({},(()=>t?t(m):{})()),{refreshModel:f,pageLoading:s,error:Boolean(d),modelId:n,model:c?c[r]:null,hasResponse:Boolean(c&&c[r])})}const Ss=e=>{const[t,n]=l.exports.useState({page:e[0],animate:"opacity",animateDirection:"left"});return[t,a=>{const s=e.findIndex(c=>c===a),d=e.findIndex(c=>c===t.page),u=s>d?"left":"right";n({page:a,animateDirection:u,animate:"x"})}]},mt=["VIDEOS","ADD-VIDEO","STUDENTS","QUIZ-CHECK","DISCUSSION"];function Is(){Ss(mt),B();const{pathname:e}=et(),[t,n]=l.exports.useState("Videos"),[r,a]=l.exports.useState({animate:"x",animateDirection:"left"});rt(),l.exports.useEffect(()=>{let d=e.split("/").pop();if(d==="batch"&&(d="videos"),d){if(!mt.includes(d.toLocaleUpperCase()))return;n(d.toLocaleUpperCase())}},[e]);const s=d=>{const u=mt.findIndex(m=>m===d),c=mt.findIndex(m=>m===t),f=u>c?"left":"right";a({animateDirection:f,animate:"x"})};return{pageControll:[x(g({},r),{page:t}),s]}}function Ps({pageLoading:e,model:t,hasResponse:n}){const[r,a]=l.exports.useState(!1),[s,d]=l.exports.useState(!1),u=()=>d(!0),c=()=>d(!1);l.exports.useEffect(()=>{!e&&t&&n&&setTimeout(()=>{a(!0)},1e3)},[e,n,t]);const{pageControll:f}=Is();return{showpage:r,progress:s,pageControll:f,showProgress:u,hideProgress:c}}const ks=e=>({api:ae.queryGradeById,id:e,provider:Ps}),vi=l.exports.createContext(null);function pe(){return l.exports.useContext(vi)}function $s(e){const{id:t,slug:n}=e,{setTitle:r}=Ft(),{updateNavs:a}=se();return l.exports.useEffect(()=>{r(" "),a([]);const s=({path:u,label:c})=>({path:`/classroom/${n}/${t}/${u}`,label:c}),d=[{label:"Video",path:"videos"},{label:"Tambah video",path:"add-video"},{label:"Siswa",path:"students"},{label:"Periksa quis",path:"quiz-check"},{label:"Diskusi",path:"discussion"}].map(s);return a(d),()=>{r("")}},[t]),Cs(ks(t))}const ft=e=>C(()=>{const t=rt(),n=$s(t);return l.exports.useEffect(()=>{n.refreshModel()},[]),i(vi.Provider,{value:n,children:i(ws,{dataKey:"videoByGrade",props:{gradeId:t.id},children:n.pageLoading||!n.model?i(je,{}):i(e,{})})})}),qs=({model:e})=>{const t=B(),{model:n}=pe(),r=()=>t(`/admin/video/${e.id}/info`,{state:{backurl:{url:`/classroom/${n.name}/${n.id}/videos`,label:`Manage ke kelas ${n.name}`}}});return i(F,{sx:{mb:2},children:p(O,{container:!0,children:[i(O,{item:!0,sm:12,md:2,children:i(h,{component:"img",src:e.thumbnail,sx:{width:"100%",height:"100%"}})}),i(O,{item:!0,sm:12,md:8,children:i(h,{sx:{p:1},children:i(y,{variant:"h4",children:e.title})})}),i(O,{item:!0,sm:12,md:2,sx:{display:"flex",alignItems:"center",p:2},children:i(w,{onClick:r,fullWidth:!0,children:"Manage video"})})]})})},Ds=ft(C(()=>{const{data:e,fetch:t}=bs();return l.exports.useEffect(()=>{t()},[]),i(h,{sx:{py:5},children:e.map(n=>i(qs,{model:n},n.id))})}));const Ke=({url:e,onPlaying:t,play:n=!1,playOnTime:r,playerRef:a})=>{const s=a||l.exports.useRef(null),[d,{toggle:u,inline:c}]=E(n);return l.exports.useEffect(()=>{r&&c(!1);const m=s.current;m&&r&&m.pause().then(()=>{m.callAdapter("setCurrentTime",r).catch(console.log)})},[r,s]),i(h,{children:p(Sr,{playsinline:!0,ref:s,onVmCurrentTimeChange:m=>{t&&setTimeout(()=>{t(parseInt(m.detail.toFixed(1)))},1e3)},children:[e?i(Ir,{crossOrigin:"use-credentials",children:i("source",{"data-src":e})}):i(S,{}),i(Pr,{children:p(kr,{fullWidth:!0,children:[i(bn,{children:i($r,{})}),p(bn,{space:"top",children:[i(qr,{}),i(Dr,{}),i(Er,{separator:"/"})]})]})})]})})},Es={noVideoText:"Silahkan pilih video terlebih dahulu",noVideoTextButton:"Pilih video",changeVideoTextButton:"Ganti video",changeVideoTextButton1:"Pilih video lainya",uploadVideoSuccess:"Video berhasil di tambahkan"};var zs={videos:Es};const Ms=({name:e})=>{const{errors:t}=zr();if(!t[e])return i(l.exports.Fragment,{});const{message:n}=t[e];return i(Mr,{error:!0,children:n})},As={backgroundColor:"white",position:"sticky",top:0,zIndex:10},_i=e=>{const t=JSON.parse(e);return typeof t!="object"?_i(t):t},Ts=e=>{const t=e.value;if(!t)return Y.EditorState.createEmpty();try{const n=_i(t);if(!("blocks"in n&&"entityMap"in n))return Y.EditorState.createEmpty();const a=Y.convertFromRaw(n);return Y.EditorState.createWithContent(a)}catch{return Y.EditorState.createEmpty()}};class Vs extends l.exports.Component{constructor(t){super(t);_(this,"EditorState");_(this,"reset",()=>{this.EditorState=Y.EditorState.createEmpty()});_(this,"onEditorChange",t=>{const{field:n}=this.props;this.EditorState=t,n.onChange(Y.convertToRaw(t.getCurrentContent()))});this.EditorState=Ts(this.props.field),typeof this.props.field.value=="string"&&this.props.field.onChange(Y.convertToRaw(this.EditorState.getCurrentContent())),this.props.editorRef&&(this.props.editorRef.current={reset:this.reset})}render(){const t=this.props.disableOptions?{options:[]}:{};return p(S,{children:[i(wn.exports.Editor,{onEditorStateChange:this.onEditorChange,toolbarHidden:this.props.disableOptions,toolbarStyle:As,editorState:this.EditorState,toolbar:t,editorStyle:{minHeight:300},placeholder:this.props.placeholder}),i(Ms,{name:this.props.field.name})]})}}const Gs=Ar(Vs),Rt=({name:e,editorRef:t,disableOptions:n=!1,placeholder:r=""})=>{const a=ne({name:e});return i(Gs,x(g({},a),{placeholder:r,editorRef:t,disableOptions:n}))},bi={value:"__disabled__",label:"Pilih salah satu opsi"};class wi extends l.exports.Component{constructor(t){super(t);_(this,"options");_(this,"handleFormChange",t=>{if(this.props.controller){const{controller:n}=this.props;if(n){const{onChange:r}=n.field;r(t)}}this.props.onChange&&this.props.onChange(t)});_(this,"handleChange",t=>{const n=t.target.value;this.handleFormChange(n)});_(this,"findInOption",t=>this.options.find(n=>n.value===t));_(this,"getErrorProps",()=>{var n,r;if(!this.props.controller)return{};const{fieldState:t}=this.props.controller;return{error:Boolean(t.error),helperText:(r=(n=t.error)==null?void 0:n.message)!=null?r:""}});_(this,"getValue",()=>{const t=r=>{if(!r)return"__disabled__";const a=this.findInOption(r);return a?a.value:"__disabled__"};if(this.props.controller){const{field:{value:r}}=this.props.controller;return t(r)}const{value:n}=this.props;return t(n)});_(this,"getFieldProps",()=>{var s;const a=this.props,{options:t,controller:n}=a,r=U(a,["options","controller"]);return x(g(g({},r),this.getErrorProps()),{SelectProps:x(g({},(s=r.SelectProps)!=null?s:{}),{inputRef:n==null?void 0:n.field.ref}),onChange:this.handleChange,value:this.getValue()})});this.options=[bi,...this.props.options]}render(){const t=this.getFieldProps();return i("div",{children:i(fn,x(g({},t),{select:!0,fullWidth:!0,children:this.options.map(n=>i(pn,{disabled:n.value===bi.value,value:n.value,children:n.label},n.value))}))})}}const xt=zs.videos,Ls=()=>{const e=Ue(),t=l.exports.useRef(null),[n,r]=l.exports.useState(""),a=d=>{const u=d.target.files?d.target.files[0]:null;if(u){e.setValue("content",u);const c=new FileReader;c.onloadend=()=>{r(c.result)},c.readAsDataURL(u)}},s=()=>{t.current&&t.current.click()};return Vr(()=>{var d;t.current&&((d=t.current)==null||d.addEventListener("change",a))}),[{inputRef:t,onClick:s},n]},Fs=e=>({minHeight:256,alignItems:"center",justifyContent:"center",display:e?"flex":"block","& > .video-wrapper":{width:"100%",background:"black"}}),Us=()=>{const[{onClick:e,inputRef:t},n]=Ls(),a=Ue().formState.errors,{enqueueSnackbar:s,closeSnackbar:d}=R();return l.exports.useEffect(()=>{a.content&&(d(),s(a.content.message,{variant:"error"}))},[a]),p(h,{sx:Fs(!n),children:[i("input",{style:{display:"none"},type:"file",accept:"video/*",ref:t}),n?i("div",{className:"video-wrapper",children:i(Ke,{url:n})}):i(S,{}),p("div",{children:[n?null:i(y,{children:xt.noVideoText}),i(w,{onClick:e,children:n?xt.changeVideoTextButton1:xt.changeVideoTextButton})]})]})},Hs=C(()=>{const{form:e,reset:t,response:n,loading:r,handler:a}=_e(),{pageControll:s,showProgress:d,hideProgress:u}=pe(),c=s[1];return l.exports.useEffect(()=>{(r?d:u)()},[r]),Ee({message:xt.uploadVideoSuccess,show:Boolean(n),callback(f){c("VIDEOS")},variant:"success"}),i(K,x(g({},e),{children:p(O,{container:!0,spacing:2,onSubmit:a,component:"form",children:[i(O,{item:!0,xs:12,md:8,children:i(Us,{})}),i(O,{item:!0,xs:12,md:4,children:p(h,{sx:{pt:2},children:[i(A,{sx:{mb:3},label:"Judul video",name:"title",fullWidth:!0}),i(A,{sx:{mb:3},label:"Caption video",name:"caption",fullWidth:!0})]})}),p(O,{item:!0,xs:12,children:[i(h,{sx:{p:[0,2]},children:i(Rt,{placeholder:"Deskripsi video",name:"description"})}),i(h,{sx:{p:[0,2],mt:3},children:i(j,{variant:"outlined",fullWidth:!0,icon:i(Tr,{}),loading:r,children:"Upload video"})})]})]})}))}),Ns=e=>(e.description=JSON.stringify(e.description),g({},e)),Bs=()=>{const{modelId:e}=pe();return i(De,{parser:Ns,merge:{gradeId:e},mutateKey:"addVideo",children:i(h,{sx:{mb:5},children:i(Hs,{})})})},Rs=C(({videos:e})=>{var k;const t=e.map(I=>({label:I.title,value:I.id})),{modelId:n,model:r}=pe(),a=B(),{enqueueSnackbar:s}=R(),[{loading:d,response:u},c]=qe({api:P.mutateAddVideoInGrade,merge:{gradeId:n}});l.exports.useEffect(()=>{u&&(s("Video berhasil di tambahkan",{variant:"success"}),a(`/batch/${r.name}/${r.id}/videos`))},[u]);const f=Ve(),m=ne({control:f.control,name:"videoId",defaultValue:t[0].value}),v=e.find(I=>I.id===m.field.value),b=f.handleSubmit(c);return p(h,{sx:{minHeight:"50vh",display:["block","flex"],"& > div":{p:1}},children:[i(h,{sx:{width:["100%","70%"],overflow:"hidden"},children:i(ue,{exitBeforeEnter:!0,children:i(H.div,{transition:{x:{type:"tween"}},initial:{x:"-200%"},animate:{x:0},exit:{x:"200%"},children:v&&i(Ke,{url:v.content})},(k=v==null?void 0:v.id)!=null?k:"video-id")})}),p(h,{component:"form",onSubmit:b,sx:{width:["100%","30%"]},children:[i(wi,x(g({noUseForm:!0,disabled:d,size:"small"},m.field),{options:t,name:"videoId"})),i(j,{sx:{mt:2,textTransform:"none"},fullWidth:!0,icon:i(nt,{}),loading:!1,children:"Simpan"})]})]})}),Qs=C(()=>{const{modelId:e}=pe(),{data:t,loading:n}=M(s=>s.queryVideoNotInGrade({id:e})),a=(()=>{var s;return t?(s=t.videoNotInGrade)!=null?s:[]:[]})();return i(ue,{exitBeforeEnter:!0,children:i(H.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n?i(h,{sx:{py:5,display:"flex",justifyContent:"center"},children:p(h,{sx:{textAlign:"center"},children:[i(te,{size:50}),i(y,{sx:{display:"block"},variant:"caption",children:"Loading"})]})}):i(F,{sx:{p:2},children:a.length?i(Rs,{videos:a}):i(y,{align:"center",variant:"subtitle1",children:"Tidak ada video yang dapat di pilih"})})},n?"loading":"oke")})}),Os=ft(()=>(pe(),p(S,{children:[i(y,{color:"primary",sx:{mt:2},variant:"h5",children:"Pilih dari video yang telah terupload"}),i(Q,{sx:{my:2}}),i(Qs,{}),i(y,{color:"primary",sx:{mt:2},variant:"h5",children:"Upload video baru"}),i(Q,{sx:{my:2}}),i(F,{sx:{p:1,mb:5},children:i(Bs,{})})]}))),Ws=C(({rows:e,columns:t,paginator:n,paginationHandler:r,onRowClick:a})=>i(S,{children:i(Gr,{pagination:!0,paginationMode:"server",onRowClick:u=>a&&a(u.row),onPageChange:u=>{r(u+1,n.perPage)},onPageSizeChange:u=>{r(1,u+1)},page:n.currentPage?n.currentPage-1:1,rowsPerPageOptions:[10,20,30],rowCount:n.total-1,pageSize:n.perPage,rows:[...e],columns:t,autoHeight:!0})}));function Js(){const[e,t]=l.exports.useState({user:null,action:"activation"}),n=s=>{t({user:s,action:s.status?"edit":"activation"})},r=()=>{t({user:null,action:"activation"})},a=s=>{t(x(g({},e),{action:s}))};return x(g({},e),{changeStudent:n,handleClose:r,changeAction:a})}const Ci=l.exports.createContext(null);function ze(){return l.exports.useContext(Ci)}const js={activation:"activation",edit:"editUser"},Ks=e=>t=>(e&&(e.name===t.name&&delete t.name,e.email===t.email&&delete t.email),t);function Qt(e,t){const{enqueueSnackbar:n}=R(),{handleClose:r}=ze(),{initialFetch:a}=V();l.exports.useEffect(()=>{e&&(r(),n(t,{variant:"success"}),a())},[e])}const Ys=C(({onLoading:e})=>{const{loading:t,form:n,handler:r,response:a}=_e();R();const{handleClose:s,user:d}=ze();return V(),Qt(a,`${d==null?void 0:d.name} berhasil di aktifkan`),l.exports.useEffect(()=>{e(t)},[t]),p(K,x(g({},n),{children:[i(h,{sx:{p:1,mb:3,border:"solid 1px gray",borderRadius:1},children:i(y,{children:"Gunakan form ini untuk mengaktifkan akun & memberikan password ke pada pengguna agar dapat login dengan password yang diberikan."})}),p("form",{onSubmit:r,children:[i(A,{autoComplete:"off",fullWidth:!0,variant:"outlined",name:"password",type:"password",label:"Password"}),i(A,{sx:{my:2},fullWidth:!0,type:"password",variant:"outlined",name:"passwordConfirmation",label:"Konfirmasi password"}),i(j,{icon:i(Lr,{}),loading:t,children:"Aktifkan akun"})]})]}))}),Xs=C(({onLoading:e})=>{const{loading:t,form:n,handler:r,response:a,error:s}=_e();Qt(a,"Perubahan berhasil di simpan"),l.exports.useEffect(()=>{s&&n.setError("email",{type:"backend",message:"Email telah di gunakan"})},[s]);const{user:d}=ze();return l.exports.useEffect(()=>{d&&(n.setValue("name",d.name),n.setValue("email",d.email))},[d]),l.exports.useEffect(()=>{e(t)},[t]),i(K,x(g({},n),{children:p("form",{onSubmit:r,children:[i(A,{sx:{mb:2},fullWidth:!0,variant:"outlined",name:"email",label:"Email"}),i(A,{sx:{mb:2},fullWidth:!0,variant:"outlined",name:"name",label:"Nama"}),i(j,{icon:i(kt,{}),loading:t,children:"Simpan perubahan"})]})}))}),Zs=C(()=>{const{user:e}=ze(),[{loading:t,response:n,error:r},a]=qe({api:P.mutateUserDelete,merge:{id:e==null?void 0:e.id}});return console.log(r),Qt(n,"Pengguna berhasil di hapus"),p("div",{children:[p(y,{variant:"subtitle1",children:["Apakah anda yakin untuk menhapus akun ",e==null?void 0:e.name," ?"]}),i(j,{onClick:()=>a({}),sx:{my:2},icon:i(Ce,{}),loading:t,children:"Hapus"})]})}),ed={activation:Ys,edit:Xs,delete:Zs},td=()=>{const{user:e,handleClose:t,action:n,changeAction:r}=ze(),a=e?ed[n]:l.exports.Fragment,[s,{inline:d}]=E(),u=!e||n==="delete"?"":js[n],c=e&&n!=="delete"?De:l.exports.Fragment,f=e&&n!=="delete"?{mutateKey:u,parser:Ks(e),merge:{id:e.id}}:{};return p(Cn,{sx:{zIndex:100*100},onClose:s?void 0:t,open:Boolean(e),PaperProps:{sx:{width:["100vw","20vw"],overflow:"hidden"}},anchor:"right",children:[p(gn,{onChange:(m,v)=>r(v),value:n,children:[i(tt,{sx:{textTransform:"none"},value:"edit",label:"Edit"}),i(tt,{sx:{textTransform:"none"},value:"activation",label:"Aktivasi akun",disabled:e&&e.status}),i(tt,{sx:{textTransform:"none"},value:"delete",label:"Hapus"})]}),i(ue,{exitBeforeEnter:!0,children:i(H.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},transition:{x:{type:"tween"}},children:i(h,{sx:{p:2},children:i(c,x(g({},f),{children:i(a,g({},e?{onLoading:d}:{}))}))})},n)})]})},nd=[{field:"name",headerName:"Nama siswa",flex:1},{field:"email",headerName:"Alamat email",flex:1},{field:"status",headerName:"Status",flex:.2,valueGetter(e){return e.row.status?"Aktif":"Non aktif"}}],id=C(()=>{const[e,{toggle:t,force:n}]=E(),{loading:r,form:a,handler:s,response:d}=_e(),{initialFetch:u}=V();return Ee({message:"Siswa berhasil di tambahkan",show:Boolean(d),variant:"success",callback(c){n(!1)(),a.reset(),u()}}),p(F,{sx:{p:2,mt:2},children:[i(w,{color:e?"error":"primary",onClick:t,children:e?"Tutup":"Tambahkan siswa"}),i(He,{sx:{mt:e?2:0},in:e,children:p(O,{container:!0,children:[i(O,{item:!0,xs:12,md:6,children:i(K,x(g({},a),{children:p("form",{onSubmit:s,children:[i(A,{sx:{mb:4},label:"Nama siswa",name:"name",fullWidth:!0}),i(A,{type:"email",label:"Alamat email",fullWidth:!0,name:"email"}),i(j,{sx:{mt:3},icon:i(vn,{}),loading:r,children:"Simpan"})]})}))}),i(O,{item:!0,xs:12,md:6,sx:{px:2},children:i(y,{variant:"subtitle1",children:"Tambahkan siswa dengan mengirim email invitasi yang akan di daftarkan, siswa dapat login dengan link yang di berikan untuk mengganti password."})})]})})]})}),rd=C(()=>{const{result:e,initialFetch:t,actions:{go:n}}=V();l.exports.useEffect(()=>{t()},[]);const r=e.data.map(s=>({name:s.student.name,email:s.student.email,id:s.student.id,status:s.student.active})),{changeStudent:a}=ze();return i(h,{sx:{py:2},children:i(Ws,{onRowClick:a,paginationHandler:n,paginator:e.paginator,columns:nd,rows:r})})}),od=ft(()=>{const{modelId:e}=pe(),t=Js();return p(ht,{dataKey:"students",includes:{gradeId:e},children:[i(De,{parser:n=>({args:n}),merge:{grade_id:e},mutateKey:"addUser",children:i(id,{})}),p(Ci.Provider,{value:t,children:[i(td,{}),i(rd,{})]})]})}),ad=e=>i("div",{children:i("h1",{children:"Quiz check"})});function sd(e){const{user:t}=re(),[n,r]=l.exports.useState(null),a=l.exports.useCallback(c=>(t==null?void 0:t.id)===c.user_id,[t]),[s,d]=l.exports.useState(null),u=()=>s&&(n==="edit"||n==="editReply")?s.content:null;return{enableCrud:a,setFormMode:r,formMode:n,gradeId:e,userId:t==null?void 0:t.id,setSelected:d,initialContent:u(),selectedId:s?s.id:""}}const Si=l.exports.createContext(null),Me=()=>l.exports.useContext(Si),dd="Thread berhasil ditambahkan",ud="Perubahan berhasil disimpan",ld="Balasan anda berhasil di tambahkan",cd="Perubahan berhasil disimpan";var pd={create:dd,edit:ud,addReply:ld,editReply:cd};const hd=C(()=>{const{formMode:e,setFormMode:t,initialContent:n,setSelected:r,selectedId:a}=Me(),{loading:s,form:d,response:u,handler:c,reset:f}=_e(),{initialFetch:m}=V();l.exports.useEffect(()=>{n&&e&&d.setValue("content",n)},[n,e]);const v=()=>{s||(f(),t(null))},b=l.exports.useCallback(()=>e?pd[e]:"",[e]);return Ee({message:b(),show:Boolean(u),callback:()=>{r(null),t(null),v(),m()},variant:"success"}),i(it,{fullWidth:!0,open:Boolean(e),onClose:v,children:i(K,x(g({},d),{children:i(h,{sx:{p:2},children:p("form",{onSubmit:c,children:[i(Ne,{children:"Konten diskusi : "}),i(Rt,{name:"content"}),i(j,{icon:i($t,{}),loading:s,children:"Simpan"})]})})}))})}),gd=Fr(e=>({root:{"& > *":{fontFamily:"Roboto!important"}},editor:{"& > *":{fontFamily:"Roboto!important"}}})),Ii=e=>{const t=JSON.parse(e);return typeof t=="string"?Ii(t):t},yt=({data:e})=>{const t=gd();try{const n=Y.convertFromRaw(Ii(e)),r=Y.EditorState.createWithContent(n);return i("div",{className:t.root,children:i(wn.exports.Editor,{editorClassName:t.editor,toolbarHidden:!0,readOnly:!0,toolbar:{},editorState:r})})}catch(n){return console.log(n),null}},Pi=l.exports.createContext(null),Ot=()=>l.exports.useContext(Pi),md=()=>{const{open:e,handleCloseDialog:t,getContentText:n,loading:r,onConfirm:a}=Ot();return p(it,{open:e,onClose:t,children:[i(Pt,{children:n()}),p(Sn,{children:[i(w,{disabled:r,onClick:t,startIcon:i(Ur,{}),children:"Batal"}),i(j,{color:"error",onClick:a,icon:i(Ce,{}),loading:r,children:"Hapus"})]})]})},fd=({api:e,callback:t,getSuccesMessage:n,getContentText:r})=>{const[a,s]=l.exports.useState(e),d=$e(a),{loading:u,data:c,setQuery:f}=M(),[m,v]=l.exports.useState(null),[b,k]=l.exports.useState(!0);Ee({message:n?n():"Data berhasil di hapus",callback(){v(null),t(),k(!0)},variant:"success",show:Boolean(c&&c[d])&&!b,autoShow:!1});const I=()=>{u||v(null)},z=(he,ee)=>()=>{s(ee||e),v(he.id)},Z=()=>(k(!1),f(he=>he[a]({id:m})));return{open:Boolean(m),loading:u,handleCloseDialog:I,handleOpenDialog:z,getContentText:r,Dialog:md,onConfirm:Z}},xd=({model:e})=>{const{setSelected:t,setFormMode:n}=Me(),{handleOpenDialog:r}=Ot(),a=r(e,P.mutateDeleteDiscussionReply);return p(h,{sx:{py:1,textAlign:"right"},children:[i(we,{color:"primary",onClick:()=>{t(e),n("editReply")},children:i(kt,{})}),i(we,{color:"error",onClick:a,children:i(Ce,{})})]})},yd=({model:e})=>{const{enableCrud:t}=Me();return p(h,{sx:{p:1,ml:[0,3,10]},children:[p(h,{sx:{display:"flex",py:1},children:[i(h,{children:i(In,{src:"/test.png",alt:e.user.name})}),p(h,{children:[i(y,{sx:{ml:1},variant:"subtitle2",children:e.user.name}),i(y,{sx:{ml:1},variant:"subtitle2",children:e.created_at})]})]}),i(Q,{}),i(yt,{data:e.content}),t(e)?i(xd,{model:e}):null,i(Q,{})]})},vd=({replies:e})=>i(S,{children:e.map(t=>i(yd,{model:t},t.id))}),_d=({model:e})=>{const{setSelected:t,setFormMode:n,enableCrud:r}=Me(),{handleOpenDialog:a}=Ot(),s=l.exports.useCallback(()=>{t(e),n("edit")},[]),d=a(e);return p(h,{sx:{display:"flex"},children:[p(h,{sx:{display:"flex",alignItems:"center"},children:[i(h,{children:i(In,{src:"/test.png",alt:e.user.name})}),p(h,{children:[i(y,{sx:{ml:1},variant:"subtitle2",children:e.user.name}),i(y,{sx:{ml:1},variant:"subtitle2",children:e.created_at})]})]}),r(e)?p(h,{sx:{ml:"auto"},children:[i(qt,{title:"Hapus",children:i(we,{color:"error",onClick:d,children:i(Ce,{})})}),i(qt,{title:"Edit",children:i(we,{color:"primary",onClick:s,children:i(kt,{})})})]}):null]})},bd=({model:e})=>{const{setSelected:t,setFormMode:n}=Me();l.exports.useCallback(()=>{t(e),n("edit")},[]);const[r,a]=l.exports.useState(!1),s=l.exports.useCallback(()=>{t(e),n("addReply")},[]);return p(F,{sx:{mb:2},children:[i(h,{sx:{p:2},children:i(_d,{model:e})}),i(Q,{}),i(h,{sx:{p:2},children:i(yt,{data:e.content})}),i(Q,{}),p(h,{sx:{p:2},children:[p(h,{sx:{display:"flex"},children:[i(w,{startIcon:i($t,{}),onClick:()=>a(!r),sx:{textTransform:"none"},children:"Tampilkan komentar"}),i(w,{startIcon:i(Hr,{}),onClick:s,sx:{textTransform:"none",ml:"auto"},children:"Buat komentar"})]}),p(He,{in:r,unmountOnExit:!0,children:[e.replies.length?null:i(y,{variant:"h5",align:"center",sx:{py:3},children:"Thread ini belum memiliki komentar"}),i(vd,{replies:e.replies})]})]})]})},wd=C(()=>{const{setFormMode:e}=Me(),{isEmpty:t,initialFetch:n,result:{data:r}}=V();l.exports.useEffect(()=>{n()},[]);const a=l.exports.useCallback(()=>{e("create")},[]),s=fd({api:P.mutateDeleteDiscussion,callback:n,getContentText(){return"Apakah anda yakin untuk menghapus thread diskusi ini ? "}});return p(Pi.Provider,{value:s,children:[i(s.Dialog,{}),t?p(h,{sx:{textAlign:"center",py:5},children:[i(y,{align:"center",variant:"h5",children:"Saat ini tidak ada thread diskusi"}),i(w,{onClick:a,sx:{textTransform:"none"},children:"Klik disini untuk menambahkan"})]}):null,p(L,{children:[i(h,{sx:{my:2},children:i(w,{startIcon:i($t,{}),onClick:a,children:"Buat thread diskusi"})}),r.map(d=>i(bd,{model:d},d.id))]})]})}),Cd={addReply:"addDiscussionReply",create:"addDiscussion",edit:"editDiscussion",editReply:"editDiscussionReply"},ki=({gradeId:e})=>{const t=sd(e),n=t.formMode?Cd[t.formMode]:"addDiscussion",r=({content:a})=>{const s={content:JSON.stringify(a),userId:t.userId,gradeId:e};return t.formMode==="addReply"&&t.selectedId?s.discussionId=t.selectedId:t.selectedId&&(t.formMode==="edit"||t.formMode==="editReply")&&(s.id=t.selectedId),s};return i(Si.Provider,{value:t,children:p(ht,{dataKey:"discussion",includes:{gradeId:e},children:[i(De,{mutateKey:n,parser:r,children:i(hd,{})}),i(wd,{})]})})},Sd=ft(()=>{const{modelId:e}=pe();return i(ki,{gradeId:e})}),Id=({id:e})=>{const{data:t,loading:n,setQuery:r}=M(),a=()=>{r(d=>d.queryVideo({id:e},u=>u.id.content.caption.description.duration.quiz_count.thumbnail.title.grades(c=>c.id.name)))},{setTitle:s}=Ft();return l.exports.useEffect(()=>(s("Menagamen video"),()=>s("")),[]),l.exports.useEffect(()=>{a()},[e]),{video:t?t.video:null,isNotFound:t&&!t.video,loading:n}},$i=l.exports.createContext(null);function Ye(){return l.exports.useContext($i)}const Pd=[{path:"info",name:"Informasi video"},{path:"quiz",name:"Quis"},{path:"edit",name:"Edit"}];function Wt(e){return C(()=>{const t=rt(),n=Id(t),{updateNavs:r}=se();return l.exports.useEffect(()=>{const a=d=>`/admin/video/${t.id}${d?`/${d}`:""}`,s=Pd.map(d=>({label:d.name,path:a(d.path==="/"?"":d.path)}));r([...s])},[]),i($i.Provider,{value:n,children:!n.video||n.loading?i(je,{}):i(e,{})})})}const qi=Wt(()=>{const{video:e}=Ye(),t=B(),n=({id:a,name:s})=>()=>t(`/classroom/${s}/${a}/videos`),r=`/admin/video/${e==null?void 0:e.id}/quiz`;return p("div",{children:[i(h,{sx:{mb:2},children:i(Ke,{url:e==null?void 0:e.content})}),p(h,{sx:{display:"flex",mb:5},children:[i(h,{sx:{width:"70%"},children:p(h,{sx:{p:2,pl:0},children:[p(h,{sx:{p:1,border:"solid 1px",borderColor:a=>a.palette.grey.A400,borderRadius:1},children:[i(y,{variant:"h5",children:e==null?void 0:e.title}),i(y,{variant:"subtitle1",children:e==null?void 0:e.caption})]}),i(y,{sx:{my:1},variant:"subtitle1",children:"Deskripsi video"}),i(h,{sx:{p:1,border:"solid 1px",borderColor:a=>a.palette.grey.A400,borderRadius:1},children:i(yt,{data:e==null?void 0:e.description})})]})}),i(h,{sx:{width:"30%"},children:p(F,{sx:{p:1,minHeight:500},children:[i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:"Jumlah quiz"}),p(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{variant:"button",sx:{cursor:"pointer",display:"block",textTransform:"none"},children:(e==null?void 0:e.quiz_count)?`${e.quiz_count} kuis`:"-"}),i(w,{to:r,sx:{textTransform:"none"},component:Nr,children:(e==null?void 0:e.quiz_count)?"Tampilkan quis":"Buat quis"})]}),i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:"Batch / Kelas"}),i(Q,{}),i(Pn,{dense:!0,children:e==null?void 0:e.grades.map(a=>i(kn,{dense:!0,onClick:n(a),sx:{bgcolor:s=>s.palette.grey["200"]},button:!0,children:i($n,{primary:a.name})},a.id))})]})})]})]})}),be=["A","B","C","D"],Di=be.map((e,t)=>({content:"",type:"text",index:t})),kd=be.map((e,t)=>({content:null,type:"image",index:t}));function $d({video:e}){const[t,n]=l.exports.useState({type:T.IMAGE_MATCH,text:"",multipleChoise:{answer:0,question:"",additionalFile:null,type:"text"}}),[r,a]=l.exports.useState(Di);return l.exports.useEffect(()=>{console.log("called"),t.multipleChoise.type==="text"?a([...Di]):a([...kd])},[t.multipleChoise]),{multipleChoiseOptions:r,formValues:t,callbacks:{onMultipleChoiseChange:m=>v=>{const b=x(g({},t.multipleChoise),{[m]:v});n(x(g({},t),{multipleChoise:g({},b)}))},onTextChange:m=>{n(x(g({},t),{text:m}))},changeMultipleChoiseOptions:m=>v=>{const b=[...r];b[m].content=v,a([...b])}},changeType:m=>{const v=x(g({},t),{text:"",type:m});m===T.MULTIPLE_CHOICE&&(v.multipleChoise={answer:0,type:"text",question:"",additionalFile:null}),n(g({},v))},video:e}}const Ei=l.exports.createContext(null);function zi(){return ie({name:"type",defaultValue:T.IMAGE_MATCH})}function Mi(){return l.exports.useContext(Ei)}const qd=()=>{const{video:e}=Mi(),[t,n]=l.exports.useState(0),r=(u,c)=>n(c),[a,{toggle:s}]=E(!1),d=ne({name:"showAt",defaultValue:0});return l.exports.useEffect(()=>{d.field.onChange(t)},[t]),p(h,{paddingY:2,children:[i(Ke,{url:e.content,play:a,playOnTime:t}),p(h,{marginTop:1,children:[i(Ne,{children:"Di tampilkan pada menit"}),i(h,{children:i(Br,{min:0,max:e.duration,track:!1,onChange:r,valueLabelDisplay:"off"})}),p(h,{display:"flex",justifyContent:"space-between",children:[i(y,{variant:"subtitle2",children:We(0)}),i(y,{variant:"subtitle2",children:We(t)}),i(y,{variant:"subtitle2",children:We(e.duration)})]})]})]})},Dd=[{label:"Pilihan ganda",value:T.MULTIPLE_CHOICE},{label:"Pencocokan gambar",value:T.IMAGE_MATCH},{label:"Pengurutan huruf",value:T.LETTER_SEQUENCE}],Ed=()=>{Mi();const e=ie({name:"type",defaultValue:T.IMAGE_MATCH}),{field:{onChange:t}}=ne({name:"type",defaultValue:T.IMAGE_MATCH}),n=Ue();return l.exports.useEffect(()=>{n.setValue("text","")},[e]),i(h,{sx:{py:2},children:p(qn,{component:"fieldset",children:[i(Ne,{component:"legend",children:"Jenis quis"}),i(Dn,{value:e,onChange:t,row:!0,name:"row-radio-buttons-group",children:Dd.map(r=>i(En,{value:r.value,control:i(zn,{}),label:r.label},r.value))})]})})},Ai=({label:e,onlyUnique:t=!1})=>{const[n,{inline:r}]=E(),a=ie({name:"text"}),s=u=>{if(wt(u.key).isNumeric()){u.preventDefault();return}n&&r(!1),a.includes(u.key)&&(u.preventDefault(),r(!0))};let d={size:"small",fullWidth:!0,helperText:n?"Huruf telah di gunakan":"",error:n,name:"text"};return t&&(d.onKeyDown=s),i(h,{sx:{pr:2},children:i(A,x(g({name:"text"},d),{label:e}))})},zd=()=>i(S,{children:i(Ai,{label:"Masukan huruf yang digunakan",onlyUnique:!0})}),Md=()=>i(S,{children:i(Ai,{label:"Masukan Kata yang di gunakan"})}),Ti=l.exports.createContext(null),Vi=()=>l.exports.useContext(Ti);class Ad extends l.exports.Component{constructor(t){super(t);_(this,"fileRef");_(this,"handler",()=>{this.fileRef.current&&this.fileRef.current.click()});_(this,"getContext",()=>g({clickHandler:this.handler,reset:this.reset},this.state));_(this,"setFormValue",t=>{const{field:n}=this.props.controller;n.onChange(t)});_(this,"reset",()=>{const{field:t}=this.props.controller;t.onChange(void 0),this.setState({previewUrl:"",type:""})});_(this,"onChange",t=>{const n=t.target.files;if(n&&n.length){const r=n[0],a=URL.createObjectURL(r);this.setState({previewUrl:a,type:r.type},()=>{this.props.controller&&this.setFormValue(r)})}});var n;this.fileRef=l.exports.createRef(),this.state={previewUrl:(n=this.props.initialUrl)!=null?n:"",type:""}}render(){return p(Ti.Provider,{value:this.getContext(),children:[this.props.children,i("input",{ref:this.fileRef,onChange:this.onChange,type:"file",accept:this.props.accept,style:{display:"none"}})]})}}const Td=r=>{var a=r,{children:e,name:t}=a,n=U(a,["children","name"]);const s=ne({name:t});return i(Ad,x(g({name:t},n),{controller:s,children:e}))},Vd=()=>{const{previewUrl:e,reset:t,clickHandler:n}=Vi();return p(h,{sx:{position:"relative",backgroundColor:"black",display:"flex",justifyContent:"center"},children:[i(h,{component:"img",src:e,sx:{maxHeight:144,maxWidth:256}}),i(qt,{title:"Ganti foto",children:i(we,{color:"secondary",onClick:()=>{t(),n()},size:"small",style:{top:0,right:0,position:"absolute"},children:i(Ce,{})})})]})},Gd=({label:e})=>{const{clickHandler:t,previewUrl:n}=Vi();return p(S,{children:[i(w,{fullWidth:!0,size:"small",variant:"contained",color:"primary",onClick:t,children:e}),i(h,{textAlign:"center",paddingY:2,children:n?i(Vd,{}):null})]})},Gi=({name:e,label:t})=>i(Td,{accept:"image/*",name:e,children:i(Gd,{label:t})}),Ld=[{label:"Text",value:"text"},{label:"Gambar",value:"image"}],Fd=()=>{ie({name:"multipleChoice.type",defaultValue:"text"});const{field:e}=ne({name:"multipleChoice.type",defaultValue:"text"});return p(qn,{component:"fieldset",children:[i(Ne,{component:"legend",children:"Jenis pilihan ganda"}),i(Dn,x(g({},e),{row:!0,children:Ld.map(t=>i(En,{value:t.value,control:i(zn,{}),label:t.label},t.value))}))]})},Ud={init:{y:"-350%",opacity:0},exit:{y:"350%",opacity:0},animate:{y:0,opacity:1}},Hd=s=>{var d=s,{index:e,delay:t,value:n,type:r}=d,a=U(d,["index","delay","value","type"]);const u=`multipleChoice.options.[${e}].content`,c=`Opsi ${be[e]}`;return i(H.div,{style:{overflowX:"hidden"},transition:{y:{delay:t,type:"tween"},opacity:{delay:t}},variants:Ud,animate:"animate",initial:"init",exit:"exit",children:i(h,{sx:{my:2,pr:2},children:r==="image"?p(S,{children:[i(y,{children:c}),i(Gi,{name:u,label:"Pilih gambar"})]}):i(A,{size:"small",label:c,fullWidth:!0,name:`multipleChoice.options.[${e}].content`})})})},Nd=()=>{const{field:e}=ne({name:"multipleChoice.answer",defaultValue:0});return i(wi,x(g({noUseForm:!0},e),{label:"Opsi jawaban yang benar",size:"small",sx:{my:2,pr:2},options:be.map((t,n)=>({value:n+1,label:`Opsi ${t}`}))}))},Bd=()=>{const e=ie({name:"multipleChoice.type",defaultValue:"text"});ne({name:"multipleChoice.additionalFile",defaultValue:""});const t=Ue();return l.exports.useEffect(()=>{be.forEach((n,r)=>{const a=`multipleChoice.options.[${r}].content`;t.setValue(a,"")})},[e]),p("div",{style:{overflow:"hidden"},children:[p(h,{sx:{pr:2,mb:2},children:[i(A,{sx:{my:2},label:"Masukan pertanyaan quis",name:"multipleChoice.question",size:"small",fullWidth:!0}),i(Gi,{name:"multipleChoice.additionalFile",label:"Upload foto soal tambahan"})]}),i("div",{children:i(Fd,{})}),p("div",{children:[i(h,{children:i(ue,{exitBeforeEnter:!0,children:be.map((n,r)=>l.exports.createElement(Hd,x(g({},n),{type:e,index:r,width:e==="image"?"100%":"50%",key:`${n}-${e}`,delay:(r+1)*.1,label:be[r]})))})}),i(Nd,{})]})]})},Li=l.exports.createContext(null),Ae=()=>l.exports.useContext(Li),Jt=n=>{var r=n,{children:e}=r,t=U(r,["children"]);const{show:a,handleClose:s}=t,d=l.exports.useRef(null),[u,c]=l.exports.useState({height:0,width:0});return l.exports.useEffect(()=>{if(d.current&&a){const f=d.current;c({height:window.innerHeight-f.clientHeight,width:"100vw"})}},[a,d]),p(Cn,{keepMounted:!0,open:a,anchor:"bottom",sx:{zIndex:1e3*1e3},PaperProps:{sx:{minHeight:"100vh",width:"100vw"}},onClose:()=>s(!1),children:[i(Le,{color:"transparent",variant:"outlined",elevation:0,ref:d,sx:{position:"static"},children:i(Fe,{children:i(w,{onClick:()=>s(!1),children:"Tutup"})})}),i(Li.Provider,{value:x(g({},u),{show:a,handleClose:s}),children:i(h,{sx:x(g({},u),{overflow:"hidden"}),children:u.height?e:i("p",{children:"lol"})})})]})},Fi=[];Object.keys(Dt).forEach(e=>{e!=="transparent"&&Object.keys(Dt[e]).forEach(t=>{Fi.push(Dt[e][t])})});const Ui=Fi,Hi=e=>{const t=Mn.random.arrayElement(Ui);return Be.exports.find(e,t)?Hi(e):t},Rd=(e,t,n)=>({id:`rect-${e}-node`,text:t,bg:Hi(n)});function Qd({stage:e,text:t}){return(n,r)=>{if(!e)return[0,0];const s=(e.width()-t.length)/t.length;return{x:r?s*r:0,y:0,width:s,height:s/2}}}const Od=(e,t)=>new Rr.Arrow({stroke:e,strokeWidth:5,globalCompositeOperation:"source-over",points:t}),Wd=e=>[e.getClientRect().x+e.getClientRect().width/2,e.height()];function Jd({x:e,y:t},n){const r=n.y(),a=n.x()+n.width(),s=n.x(),d=n.y()+n.width(),u=e>=s&&e<=a,c=t>=r&&t<=d;return u&&c}const jd=(e,t,n)=>{const{bgColor:r}=n,a=[...Wd(e),t.x,t.y];return Od(r,a)},Kd=(e,t="text")=>e==null?void 0:e.find("Group").toArray().filter(n=>n.getAttr("data-role")===t),Yd=({index:e,stage:t,nodes:n,layer:r})=>a=>{if(n[e].hasArrow)return new Promise(b=>b({nodes:n,arrow:null}));const d=a.currentTarget,u=t.getPointerPosition(),f=n[e].bg,m=jd(a.target,u,{bgColor:f});m.setAttr("data-from",d.getAttr("data-letter"));const v=(b,k)=>{b.points(k),r.batchDraw()};return r.add(m),new Promise(b=>{t.on("mouseup touchend",()=>{const I=Kd(t,"image").find(Z=>Jd(t.getPointerPosition(),Z));let z=null;if(I){const Z=I.x()+I.width()/2;m.points()[0],m.points()[1],I.y(),z={points:[m.points()[0],m.points()[1],I.x()+I.width()/2,I.y()],from:m.getAttr("data-from"),to:I.getAttr("data-letter"),bg:m.stroke(),arrowIndex:e,fromId:d.getAttr("id"),toId:I.getAttr("id")},n[e].hasArrow=!0}b({arrow:z,nodes:n}),m.remove(),r.batchDraw(),t.off("mouseup touchend mousemove touchmove")}),t.on("mousemove touchmove",()=>{const k=t.getPointerPosition();k&&v(m,[m.points()[0],m.points()[1],k.x,k.y])})})},jt=l.exports.createContext(null);function Kt(){return l.exports.useContext(jt)}const Yt=l.exports.createContext(null);function Xt(){return l.exports.useContext(Yt)}const Xd=({x:e,y:t,bg:n,text:r,width:a,height:s,pos:d,index:u,hasArrow:c})=>{const f=Ge(),{stage:m}=Kt(),{arrows:v}=Xt(),b=m.current.height(),{mouseHandler:k}=Xt(),I=k(u),z=d==="start"?"text":"image",Z="/letters/"+r.toLocaleLowerCase()+"0.png",[he]=An(Z),ee=`item-${z}-${u}`,de=v.find(Yi=>Yi.toId===ee),Te=()=>de||z==="text"?de?de.bg:n:f.palette.grey["200"];return p(Tn,{id:`item-${z}-${u}`,"data-letter":r,"data-role":z,height:s,width:a,onTouchStart:z==="image"?void 0:I,onDragStart:z==="image"?void 0:I,onMouseDown:z==="image"?void 0:I,x:e,y:d==="start"?0:b-(s+20),children:[i(Vn,{height:s,width:a,fill:Te()}),z==="image"?i(Gn,{height:s,width:a,image:he}):i(Ln,{text:r,fill:"white",height:s,fontSize:s,width:a,align:"center"})]})},Ni=({pos:e="start",items:t})=>i(S,{children:t.map((n,r)=>l.exports.createElement(Xd,x(g({},n),{index:r,key:n.id,pos:e})))}),Zd=({arrows:e,showHint:t})=>{let n=e;const{stage:{current:r}}=Kt();if(t&&r){const a=r.find("Group").toArray().filter(d=>d.getAttr("data-role")==="text"),s=r.find("Group").toArray().filter(d=>d.getAttr("data-role")==="image");n=n.map(d=>{const u=a.find(f=>f.id()===d.fromId),c=s.find(f=>f.id()===d.toId);return x(g({},d),{points:[u.x()+u.width()/2,u.y()+u.height(),c.x()+c.width()/2,c.y()]})})}return i(S,{children:n.map((a,s)=>i(Qr,{points:a.points,stroke:a.bg},s))})};function Zt({isCorrect:e,onSuccess:t,onSubmit:n}){const[r,{inline:a}]=E(),[s,{inline:d}]=E();return{loading:r,onSubmitHandler:()=>{n?(a(!0),n(e).then(()=>{t(),d(!0),a(!1)})):(t(),d(!0))},submitted:s}}const eu=()=>{const{popArrow:e,arrows:t,toggleHint:n,isSubmitDisabled:r,isAnswerCorrect:a,onSubmit:s,showHint:d}=Xt(),[u,{force:c}]=E(),{onSubmitHandler:f,submitted:m,loading:v}=Zt({isCorrect:a,onSuccess:c(!0),onSubmit:s});return p(Fe,{children:[i(y,{sx:{mr:"auto"},children:"Samakan huruf & gambar berikut sesuai hurufnya"}),p(h,{sx:{mr:2,display:"flex",alignItems:"center"},children:[m?i(y,{sx:{display:"inline-block",mr:2},children:a?"Jawaban anda benar":"Maaf jawaban anda tidak tepat"}):null,p(Et,{sx:{display:"block"},children:[i(w,{onClick:e,disabled:v||m||t.length===0,size:"small",variant:"outlined",sx:{textTransform:"none"},startIcon:i(St,{}),children:"Batalkan pilihan"}),i(w,{onClick:f,disabled:r||m,size:"small",variant:"outlined",sx:{textTransform:"none"},children:"Simpan jawaban"})]})]}),i(w,{onClick:n,disabled:!u||a,size:"small",variant:"outlined",sx:{textTransform:"none"},children:d?"Jawaban saya":"Tampilkan kunci jawaban"})]})};class tu extends l.exports.Component{constructor(t){super(t);_(this,"stage");_(this,"layer");_(this,"headerRef");_(this,"getNodes",(t=!0)=>{const{text:n}=this.props,r=this.stage.current,a=n.split(" ").join("").split("").filter(c=>c!==" "),s=[],d=[],u=Qd({stage:r,text:a.join("")});return(t?Be.exports.shuffle(a):a).forEach((c,f)=>{const m=Rd(f,c,d);s.push(x(g(g({},m),u("",f)),{hasArrow:!1})),d.push(m.bg)}),s});_(this,"prepareNodes",()=>{const t=this.getNodes(!1),n=this.getNodes(!0).map((r,a)=>x(g({},r),{bg:t[a].bg}));this.setState({nodes:t,shufledNodes:n})});_(this,"getArrows",()=>this.state.showHint?this.state.nodes.map((t,n)=>{const r=this.state.shufledNodes.findIndex(s=>s.text===t.text),a=this.state.shufledNodes[r];return{toId:`item-image-${r}`,fromId:`item-text-${n}`,bg:t.bg,to:t.text,from:t.text,arrowIndex:n,points:[a.x+t.width/2,t.height,a.x+a.width/2,this.stage.current.height()-t.height]}}):this.state.arrows);_(this,"componentDidMount",()=>{this.prepareNodes()});_(this,"componentDidUpdate",(t,n,r)=>{t.text!==this.props.text&&this.prepareNodes()});_(this,"mouseHandler",t=>n=>Yd({index:t,stage:this.stage.current,layer:this.layer.current,nodes:this.state.nodes})(n).then(a=>{a.arrow&&this.setState(s=>(a.arrow&&s.arrows.push(a.arrow),x(g({},s),{nodes:a.nodes})))}));_(this,"getStageHeight",()=>this.headerRef.current?this.props.stageHeight-this.headerRef.current.clientHeight:0);_(this,"popArrow",()=>{this.setState(t=>{const n=t.arrows.pop();return n&&(t.nodes[n.arrowIndex].hasArrow=!1),g({},t)})});_(this,"toggleHint",()=>{this.setState({showHint:!this.state.showHint})});_(this,"isAnswerCorrect",()=>this.state.arrows.length===this.props.text.length?!this.state.arrows.find(n=>n.from!==n.to):!1);_(this,"getContextValues",()=>({mouseHandler:this.mouseHandler,arrows:this.getArrows(),popArrow:this.popArrow,nodes:this.state.nodes,toggleHint:this.toggleHint,isSubmitDisabled:this.state.arrows.length!==this.props.text.length,isAnswerCorrect:this.isAnswerCorrect(),onSubmit:this.props.onSubmit,showHint:this.state.showHint}));this.state={nodes:[],shufledNodes:[],showHint:!1,arrows:[]},this.stage=l.exports.createRef(),this.layer=l.exports.createRef(),this.headerRef=l.exports.createRef()}render(){return p(Yt.Provider,{value:this.getContextValues(),children:[i(Le,{color:"transparent",position:"static",ref:this.headerRef,children:i(eu,{})}),i(Fn,{ref:this.stage,width:window.innerWidth,height:this.getStageHeight(),children:i(Un,{ref:this.layer,children:i(jt.Provider,{value:{stage:this.stage,layer:this.layer},children:p(Yt.Provider,{value:this.getContextValues(),children:[i(Ni,{items:this.state.nodes}),i(Ni,{pos:"end",items:this.state.shufledNodes}),i(Zd,{showHint:this.state.showHint,arrows:this.getArrows()})]})})})})]})}}const nu=({text:e,onSubmit:t})=>{const{height:n,width:r}=Ae();return i(S,{children:i(tu,{text:e,onSubmit:t,stageHeight:n})})};function iu(e){const[t,n]=l.exports.useState(-1),[r,{inline:a}]=E(),{show:s}=Ae();l.exports.useEffect(()=>{n(-1),a(!1)},[s]);const d=()=>{t!==-1&&a(!0)},u=c=>{r||n(c)};return console.log(t,e.answer),{isSubmitted:r,isTouched:t!==-1,changeAnswer:u,onSubmitted:d,selected:t,isAnswerCorrect:t?t===e.answer-1:!1,onSubmit:e.onSubmit}}const Bi=l.exports.createContext(null);function en(){return l.exports.useContext(Bi)}const ru=["A","B","C","D"],ou=({index:e,content:t})=>{const{selected:n,changeAnswer:r}=en();return console.log(t),p(h,{role:"button",onClick:()=>r(e),className:"item","data-selected":n===e,children:[i(h,{sx:{height:100,width:"100%",backgroundImage:`url(${t})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),i(y,{align:"center",variant:"h2",children:ru[e]})]})},au=["A","B","C","D"],su=({index:e,content:t})=>{const{selected:n,changeAnswer:r}=en();return p("div",{role:"button",onClick:()=>r(e),className:"item","data-selected":n===e,children:[p(y,{variant:"subtitle2",sx:{fontWeight:"bolder"},children:["Opsi ",au[e]]}),i(y,{variant:"subtitle1",children:t})]})},du=()=>{const{selected:e,onSubmitted:t,isAnswerCorrect:n,onSubmit:r}=en(),{handleClose:a}=Ae(),{loading:s,onSubmitHandler:d,submitted:u}=Zt({isCorrect:n,onSubmit:r,onSuccess:t});return p(h,{sx:{display:"flex",alignItems:"center",width:"90%"},children:[i(y,{sx:{color:n?"success.main":u?"error,main":"inherit"},children:u?n?"Jawaban anda benar":"Maaf jawaban anda kurang tepat":"Klik kunci jawaban untuk melihat hasil jawaban anda"}),i(ue,{exitBeforeEnter:!0,children:i(H.div,{style:{marginLeft:"auto"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?i(te,{sx:{ml:"auto"},size:20}):i(w,{onClick:u?()=>a(!1):d,disabled:e===-1,sx:{textTransform:"none",ml:"auto"},children:u?"Tutup":"Kunci jawaban"})},s?"loading":"not-loading")})]})},uu={display:"flex",width:"100%","& > div":{width:["100%","50%"],display:"flex",alignItems:"center",justifyContent:"center"}},lu={display:"flex",flexWrap:"wrap",width:"90%","& > .item":{cursor:"pointer",transition:"all ease .2s",background:"white",width:"50%",p:2,zIndex:1,"&[data-selected='true']":{boxShadow:3,zIndex:2,bgcolor:"primary.main",color:"white"},"&:hover":{bgcolor:"primary.main",color:"white"}}},cu={text:su,image:ou},pu=e=>{const t=cu[e.type];return i(t,g({},e))},hu=e=>{const t=Ae(),{question:n,image:r,options:a,answer:s}=e,d=iu(e);return i(Bi.Provider,{value:d,children:p(h,{sx:x(g({},uu),{height:t.height,width:t.width}),children:[i("div",{children:p(h,{sx:{width:"100%",textAlign:"center"},children:[r?i(h,{component:"img",src:r,sx:{maxHeight:256}}):null,i(y,{children:n})]})}),i("div",{children:p(h,{sx:{width:"100%"},children:[p(h,{children:[i(y,{variant:"h5",sx:{mb:2},children:"Pilih jawaban anda :"}),i(h,{sx:lu,children:a.map((u,c)=>i(pu,g({index:c},u),c))})]}),i(du,{})]})})]})})},gu=(e,t)=>t.find("Group").toArray().filter(n=>n.getAttr("id")!==e.getAttr("id"));function mu(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}function fu({stage:e,target:t,swap:n,original:r}){return a=>{const s=a.target,u=gu(s,e).findIndex(c=>mu(s.getClientRect(),c.getClientRect()));console.log(u===-1),u!==-1?n(t,u):(console.log("go original"),s.setPosition({x:r.x,y:r.y}))}}function xu({stage:e,text:t}){return(n,r)=>{if(!e)return[0,0];const a=e.height(),s=e.height()/t.length,u=a/2-s/2,c=e.width(),f=(s+30)*t.length,m=(c-f)/2;return{x:r?r*(s+30)+m:m,y:u,width:s,height:s}}}const tn=l.exports.createContext(null);function Ri(){return l.exports.useContext(tn)}const yu=({index:e,text:t})=>{const{stage:n}=Kt(),{getNodeState:r,swap:a,mode:s,enableDrag:d}=Ri(),[u]=r(e),c="/letters/"+t.toLocaleLowerCase()+"0.png",f=Ge(),m=l.exports.useRef(null),[v]=An(c);l.exports.useEffect(()=>{m.current&&m.current.to({x:u.x,y:u.y,duration:.2})},[m.current,u]);const b=fu({stage:n.current,target:e,original:u,swap:a});return p(Tn,x(g({},u),{id:u.id,ref:m,onDragEnd:d?b:void 0,draggable:d,children:[i(Vn,{width:u.width,height:u.height,cornerRadius:12,strokeWidth:1,stroke:f.palette.primary.main}),s==="image"?i(Gn,{image:v,height:u.height,width:u.width}):i(Ln,{fill:"black",fontSize:u.height-10,align:"center",width:u.width,text:t})]}))},vu=()=>{const{height:e}=Ae(),{text:t,toggleHint:n,toggleMode:r,toggleDrag:a,nodes:s,mode:d,showHint:u,onSubmit:c}=Ri(),f=window.innerHeight-e,m=Be.exports.sortBy(s,"x").map(z=>z.text),v=t===m.join(""),{loading:b,onSubmitHandler:k,submitted:I}=Zt({isCorrect:v,onSubmit:c,onSuccess(){a()}});return i(Le,{elevation:0,variant:"outlined",color:"transparent",sx:{position:"fixed",top:f,width:"100%",height:"fit-content",p:1},children:p(h,{sx:{display:"flex"},children:[p(y,{variant:"h6",children:['Susunlah kata "',t,'" dengan menggunakan bisindo']}),i(h,{sx:{ml:"auto",display:"flex",alignItems:"center"},children:i(ue,{exitBeforeEnter:!0,children:i(H.div,{exit:{opacity:0},animate:{opacity:1},initial:{opacity:0},children:b?i(S,{children:i(te,{size:20})}):I?p(S,{children:[p(w,{onClick:r,sx:{textTransform:"none",mr:2},variant:"outlined",children:["Tampilkan ",d==="letter"?"gambar":"huruf"]}),i(w,{onClick:n,sx:{textTransform:"none"},variant:"outlined",children:"Kunci jawaban"})]}):i(w,{onClick:k,sx:{textTransform:"none"},variant:"outlined",children:u?"Jawaban anda":"Kunci jawaban"})},I?"submitted":"not-submitted")})})]})})},Qi=e=>{const t=Mn.random.arrayElement(Ui);return Be.exports.find(e,t)?Qi(e):t},_u=(e,t,n)=>({id:`rect-${e}-node`,text:t,bg:Qi(n)});class bu extends l.exports.Component{constructor(t){super(t);_(this,"stage");_(this,"layer");_(this,"toggleMode",()=>this.setState(x(g({},this.state),{mode:this.state.mode==="letter"?"image":"letter"})));_(this,"toggleHint",()=>this.setState(x(g({},this.state),{showHint:!this.state.showHint})));_(this,"getNodes",(t=!0)=>{const{text:n}=this.props,r=this.stage.current,a=n.split(" ").join("").split("").filter(c=>c!==" "),s=[],d=[],u=xu({stage:r,text:a.join("")});return(t?Be.exports.shuffle(a):a).forEach((c,f)=>{const m=_u(f,c,d);s.push(g(g({},m),u("",f))),d.push(m.bg)}),s});_(this,"prepareNodes",()=>{this.setState({nodes:[...this.getNodes()]})});_(this,"getItems",()=>this.state.showHint?this.getNodes(!1):this.state.nodes);_(this,"componentDidMount",()=>{this.prepareNodes()});_(this,"componentDidUpdate",(t,n,r)=>{t.text!==this.props.text&&this.prepareNodes()});_(this,"swap",(t,n)=>{const r=[...this.state.nodes],a=r[t],s=r[n];r[n]=x(g({},s),{y:a.y,x:a.x}),r[t]=x(g({},r[t]),{x:s.x,y:s.y}),this.setState({nodes:[...r]})});_(this,"getNodeState",t=>{const{nodes:n}=this.state,r=a=>{this.state;const s=[...this.state.nodes],d=s[t];s[t]=g(g({},d),a),this.setState({nodes:[...s]})};return[n[t],r]});_(this,"toggleDrag",()=>this.setState({enableDrag:!this.state.enableDrag}));_(this,"getContextValues",()=>({nodes:this.state.nodes,text:this.props.text,swap:this.swap,getNodeState:this.getNodeState,toggleHint:this.toggleHint,toggleMode:this.toggleMode,mode:this.state.mode,showHint:this.state.showHint,enableDrag:this.state.enableDrag,toggleDrag:this.toggleDrag,onSubmit:this.props.onSubmit}));this.state={nodes:[],mode:"image",showHint:!1,enableDrag:!0},this.stage=l.exports.createRef(),this.layer=l.exports.createRef()}render(){return p(tn.Provider,{value:this.getContextValues(),children:[i(Fn,{height:this.props.height,width:window.innerWidth,ref:this.stage,children:i(Un,{ref:this.layer,children:i(jt.Provider,{value:{stage:this.stage,layer:this.layer},children:i(tn.Provider,{value:this.getContextValues(),children:this.getItems().map((t,n)=>i(yu,g({index:n},t),t.id))})})})}),i(vu,{})]})}}const wu=({text:e,onSubmit:t})=>{const{height:n,width:r}=Ae();return i(bu,{width:r,height:n,onSubmit:t,text:e})},Cu={LETTER_SEQUENCE:wu,MULTIPLE_CHOICE:hu,IMAGE_MATCH:nu},nn=({type:e,viewerProps:t,onSubmit:n})=>{var a;const r=(a=Cu[e])!=null?a:l.exports.Fragment;return i(r,x(g({},t),{onSubmit:n}))};function rn(e,t){return e==="MULTIPLE_CHOICE"?{question:t.question,answer:t.answer,image:t.additionalFile&&t.additionalFile instanceof File?URL.createObjectURL(t.additionalFile):typeof t.additionalFile=="string"?t.additionalFile:"",options:t.options.map(n=>({content:n.content instanceof File?URL.createObjectURL(n.content):n.content,type:t.type}))}:{text:t.text}}const Su={answer:0,type:"text",question:"",additionalFile:null},Iu=({onSubmit:e,loading:t})=>{const n=ie({name:"multipleChoice",defaultValue:Su}),r=ie({name:"text",defaultValue:""}),a=ie({name:"multipleChoice.options",defaultValue:[]}),s=zi(),u={disabled:(()=>{if(s==="MULTIPLE_CHOICE"){const v=a.find(b=>!b.content);return Boolean(v)||!n.question}else return!Boolean(r)})(),sx:{my:2},variant:"outlined"},c=rn(s,x(g({},n),{text:r,options:a})),[f,{inline:m}]=E();return p(S,{children:[i(Jt,{show:f,handleClose:m,children:i(nn,{type:s,viewerProps:c})}),p(Et,{sx:{"& > button":{textTransform:"none"}},fullWidth:!0,children:[i(w,x(g({onClick:()=>m(!0)},u),{children:"Tampilkan quis"})),i(w,x(g({},u),{disabled:u.disabled||t,onClick:e,startIcon:t?i(te,{size:16}):void 0,children:"Simpan"}))]})]})},Pu={LETTER_SEQUENCE:Md,IMAGE_MATCH:zd,MULTIPLE_CHOICE:Bd},ku={animate:{y:0,opacity:1},initial:{y:"-200%",opacity:0},exit:{y:"200%",opacity:0}},$u=()=>{const e=zi(),t=Pu[e];return i(ue,{exitBeforeEnter:!0,children:i(H.div,x(g({},ku),{children:i(t,{})}),e)})},qu={LETTER_SEQUENCE:P.mutateLetterSequenceQuiz,IMAGE_MATCH:P.mutateImageMatchQuiz,MULTIPLE_CHOICE:P.mutateMultipleChoiseQuiz},Du=C(e=>{const t=$d(e),n=Ve();ie({control:n.control,defaultValue:T.IMAGE_MATCH,name:"type"});const r=c=>{if("multipleChoice"in c){const f=c,{multipleChoice:m}=f,v=U(f,["multipleChoice"]);return x(g(g({},c),m),{options:c.multipleChoice.options.map(({content:b},k)=>{const I=b instanceof File?"image":"text";return{index:k,[I]:b}})})}return c},[{loading:a,response:s},d]=qe({api:qu[n.getValues("type")],parser:r,merge:{videoId:e.video.id}}),u=n.handleSubmit(d);return l.exports.useEffect(()=>{s&&e.onSuccess()},[s]),i(K,x(g({},n),{children:p(Ei.Provider,{value:t,children:[i(Iu,{onSubmit:u,loading:a}),p(h,{sx:{display:"flex","& > div":{width:"50%"},overflow:"hidden",minHeight:"70vh"},children:[p("div",{children:[i(Ed,{}),i($u,{})]}),i("div",{children:i(qd,{})})]})]})}))}),Oi={selected:null,action:null};function Eu(){const[e,t]=l.exports.useState(Oi),n=a=>()=>t({selected:a,action:"quiz"}),r=a=>()=>t({selected:a,action:"delete"});return x(g({},e),{onDeleteSelected:r,handleSelected:n,handleClose:()=>t(Oi)})}const Wi=l.exports.createContext(null);function on(){return l.exports.useContext(Wi)}const zu={[T.MULTIPLE_CHOICE]:"Pilihan ganda",[T.IMAGE_MATCH]:"Pencocokan gambar",[T.LETTER_SEQUENCE]:"Pengurutan gambar"},Mu=()=>{const{initialFetch:e,result:t,isEmpty:n}=V();l.exports.useEffect(()=>{e()},[]);const{handleSelected:r,onDeleteSelected:a}=on();return p("div",{children:[n?i(y,{sx:{my:3},align:"center",variant:"h4",children:"Video ini tidak memiliki quis"}):null,i(h,{sx:{display:"flex",flexWrap:"wrap"},children:t.data.map((s,d)=>i(h,{sx:{width:["100%","33.25%"]},children:i(h,{sx:{p:1},children:p(F,{sx:{p:1},children:[p(y,{variant:"caption",children:["Quiz ",d+1]}),p(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{variant:"subtitle2",children:zu[s.type]}),p(y,{variant:"subtitle2",children:["Ditampilkan pada : ",s.durationText]})]}),p(Et,{fullWidth:!0,size:"small",children:[i(w,{onClick:r(s),sx:{textTransform:"none"},size:"small",variant:"outlined",fullWidth:!0,children:"Simulasi quis"}),i(w,{onClick:a(s),sx:{textTransform:"none"},size:"small",variant:"outlined",fullWidth:!0,color:"error",children:"Hapus"})]})]})})},s.id))})]})},Au=C(()=>i(S,{children:i(Mu,{})})),Tu=()=>{const{handleSelected:e,selected:t,handleClose:n,action:r}=on(),a=t?rn(t.type,{text:t.image_matcher,question:t.question,answer:t.questionAnswer,options:t.choises,additionalFile:t.additional_image,type:"text"}):{};return i(Jt,{show:Boolean(t&&r==="quiz"),handleClose:n,children:t?i(nn,{type:t.type,viewerProps:a}):null})},Vu=()=>{const{selected:e,action:t,handleClose:n}=on(),{store:r}=M(),[a,{inline:s}]=E(),{initialFetch:d}=V(),{enqueueSnackbar:u}=R(),c=()=>{e&&(s(!0),r.mutateQuizDelete({id:e.id}).then(()=>{s(!1),d(),u("Quiz berhasil di hapus",{variant:"success"}),n()}))};return p(it,{onClose:n,open:Boolean(e&&t==="delete"),children:[i(Pt,{children:i(y,{children:"Apakah anda yakin untuk menghapus ?"})}),p(Sn,{sx:{"& > button":{textTransform:"none"}},children:[i(w,{onClick:n,children:"Batal"}),i(w,{disabled:a,onClick:c,color:"error",children:"Hapus"})]})]})},Gu=()=>{const e=Eu(),{video:t}=Ye(),{initialFetch:n}=V(),[r,{toggle:a,force:s}]=E(),{enqueueSnackbar:d}=R(),u=()=>{n(),s(!1)(),d("Quis baru berhasil di tambahkan",{variant:"success"})};return p(Wi.Provider,{value:e,children:[p(h,{sx:{minHeight:"110vh"},children:[p(F,{sx:{p:2,m:1},children:[i(w,{sx:{textTransform:"none"},onClick:a,children:r?"Tutup":"Tambah quis baru"}),i(He,{in:r,timeout:"auto",mountOnEnter:!0,children:i(Du,{onSuccess:u,video:t})})]}),i(Au,{})]}),i(Tu,{}),i(Vu,{})]})},Lu=Wt(()=>{const{video:e}=Ye();return E(),i(ht,{dataKey:"quizByVideo",includes:{videoId:e.id},children:i(Gu,{})})}),Fu=C(()=>{const{form:e,loading:t,handler:n,response:r}=_e(),{video:a}=Ye(),{enqueueSnackbar:s,closeSnackbar:d}=R(),u=B();l.exports.useEffect(()=>{r&&(s("Video berhasil di update",{variant:"success"}),u(`/admin/video/${a.id}/info`))},[r]);const[c,{inline:f}]=E();return l.exports.useEffect(()=>{d(),e.setValue("title",a==null?void 0:a.title),e.setValue("caption",a==null?void 0:a.caption),e.setValue("description",a==null?void 0:a.description),f(!0)},[]),c?i(K,x(g({},e),{children:p(F,{component:"form",onSubmit:n,sx:{p:2,my:3},children:[p(h,{sx:{display:"flex","& > div":{width:"50%",p:1}},children:[i("div",{children:i(A,{fullWidth:!0,name:"title",label:"Judul video"})}),i("div",{children:i(A,{fullWidth:!0,name:"caption",label:"Caption video"})})]}),p(h,{sx:{my:2,p:1},children:[i(Ne,{children:"Deskripsi video"}),i(Rt,{name:"description"})]}),i(j,{variant:"outlined",fullWidth:!0,icon:i(nt,{}),loading:t,children:"Simpan"})]})})):i(S,{})}),Uu=e=>(e.description=JSON.stringify(e.description),g({},e)),Hu=Wt(()=>{const{video:e}=Ye();return i(De,{parser:Uu,mutateKey:"editVideo",merge:{id:e==null?void 0:e.id},children:i(Fu,{})})}),Nu=()=>{Ht([]);const{gradeInfo:e}=ve();return p(L,{children:[i(ki,{gradeId:e.studentGrade.grade.id}),";"]})},Bu={component:Nu,icon:l.exports.Fragment,path:"/discussion",name:"discussion",key:"discussion"},Ru=C(({model:e,onClick:t})=>{const n=Ge(),[r,{force:a}]=E(),{progressInfo:{getPlaying:s},videoList:{getPlayingPercentage:d}}=ve(),u=d(e.id,s(e.id)),{progressInfo:{quizHistory:c}}=ve(),f=c.filter(m=>m.videoId.toString()===e.id.toString());return i(h,{sx:{position:"relative"},children:p(h,{onClick:()=>t(e),onMouseEnter:a(!0),onMouseLeave:a(!1),component:H.div,animate:{boxShadow:r?n.shadows[10]:n.shadows[1]},sx:{borderRadius:1,cursor:"pointer"},children:[i(h,{sx:{width:"100%",borderRadius:1},component:"img",src:e.thumbnail,alt:""}),p(h,{sx:{p:2},children:[i(y,{sx:{color:m=>m.palette.grey["800"],fontWeight:"bolder"},variant:"subtitle1",children:e.title}),p(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{sx:{textAlign:"left"},variant:"caption",children:"Progress anda"}),i(y,{sx:{textAlign:"left"},variant:"caption",children:u?`${u}%`:""})]}),i(Or,{value:u,variant:"determinate"}),p(h,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{sx:{textAlign:"left"},variant:"caption",children:"Quis"}),p(y,{sx:{textAlign:"left"},variant:"caption",children:[f.length," / ",e.quiz_count]})]})]})]})})}),Ji=({width:e="50%",onItemClick:t,exluded:n=[]})=>{const{videoList:{videos:r}}=ve(),a=B(),s=t||(u=>{a(`/video/${u.id}`)});return p(h,{children:[i(y,{sx:{color:u=>u.palette.grey["700"]},variant:"h4",children:"Video pembelajaran"}),i(h,{sx:{display:["block","flex"],flexWrap:"wrap","& > div":{width:["100%",e],p:1}},children:(()=>r.filter(u=>!(n==null?void 0:n.includes(u.id))))().map(u=>i(Ru,{onClick:s,model:u},u.id))})]})},Qu=()=>{Ht([]);const{gradeInfo:{studentGrade:e}}=ve();return p(L,{sx:{py:2,display:"flex",flexWrap:"wrap"},children:[p(h,{sx:{width:["100%","30%"],p:2},children:[i(y,{variant:"h6",sx:{fontWeight:"lighter"},children:"Kelas / batch"}),i(Q,{}),i(y,{sx:{color:t=>t.palette.grey["700"]},variant:"h4",children:e.grade.name})]}),i(h,{sx:{width:["100%","70%"]},children:i(Ji,{})})]})},Ou={path:"/",component:Qu,icon:l.exports.Fragment,name:"progress",key:"progress"},Wu=()=>(Ht([]),i("div",{children:"video page"})),Ju={component:Wu,name:"videos",path:"/videos",icon:l.exports.Fragment,key:"videos"},ju=e=>e.content.id.title.thumbnail.caption.quiz_count.quizes(t=>t.id.type.choises(n=>n.id.text.image.index).image_matcher.additional_image.questionAnswer.question.show_at),Ku=e=>{const[t,n]=l.exports.useState(null),r=()=>n(null),a=s=>()=>n(s);return M(s=>s.queryQuizAnswers()),{show:Boolean(t),handleClose:r,handleOpen:a,selected:t}},Yu=(e=[],t)=>{const n=l.exports.useRef(null),[r,a]=l.exports.useState(null);E();const{enqueueSnackbar:s}=R();l.exports.useEffect(()=>{r&&(s("Quiz akan segera di mulai"),setTimeout(()=>{var u;console.log("called"),t.handleOpen(r)(),(u=n.current)==null||u.pause()},5e3))},[r]);const d=l.exports.useCallback(u=>{if(!r){const c=e.find(f=>f.show_at-5===Math.floor(u.detail));c&&a(c)}},[e,r]);return l.exports.useEffect(()=>{const u=n.current;if(u)return u.addEventListener("vmCurrentTimeChange",d),()=>{u.removeEventListener("vmCurrentTimeChange",d)}},[n.current]),{playerRef:n}};function Xu(){const e=rt(),{loading:t,data:n}=M(d=>d.queryVideo({id:e.id},ju));Wr(e);const r=n&&n.video?n.video.quizes:[],a=Ku();return{videoUtilities:Yu(r,a),video:n&&n.video?n.video:null,loading:t,showLoading:!n||!n.video,quiz:a}}const ji=l.exports.createContext(null);function Xe(){return l.exports.useContext(ji)}const Zu=()=>{const{video:e,videoUtilities:t}=Xe();return i("div",{children:i(Ke,{playerRef:t.playerRef,url:e.content})})},el=C(()=>{const{video:e,quiz:{handleOpen:t}}=Xe(),{progressInfo:{quizHistory:n}}=ve(),r=e.quizes,a=s=>Boolean(n.find(d=>d.id.toString()===s.id.toString()));return p(h,{sx:{pb:2},children:[i(Q,{}),r.map((s,d)=>p(w,{disabled:a(s),onClick:t(s),sx:{textTransform:"none"},children:["Quis ",d+1]},s.id)),i(Q,{})]})}),tl=()=>{const{quiz:{show:e,handleClose:t,selected:n},videoUtilities:r}=Xe(),a=n?rn(n.type,{text:n.image_matcher,question:n.question,answer:n.questionAnswer,options:n.choises,additionalFile:n.additional_image,type:"text"}):{},{store:s}=M(),d=async u=>{if(n)return s.mutateUpdateQuizProgress({quizId:n.id,correct:u}).currentPromise().then(()=>{var f;const c=(f=r.playerRef)==null?void 0:f.current;c&&c.play()})};return i(Jt,{show:e,handleClose:t,children:n?i(nn,{type:n.type,onSubmit:d,viewerProps:a}):null})},nl=()=>{const{video:e}=Xe();return p("div",{children:[i(y,{sx:{color:t=>t.palette.grey["700"]},variant:"h3",children:e==null?void 0:e.title}),i(y,{sx:{color:t=>t.palette.grey["700"]},variant:"subtitle1",children:e==null?void 0:e.caption})]})},il=()=>{const{video:e}=Xe();return p(h,{sx:{pt:2,mb:1},children:[i(y,{variant:"subtitle1",sx:{fontWeight:"bolder"},children:"Deskripsi video"}),i(h,{sx:{borderRadius:2,p:1,border:"solid 1px",borderColor:t=>t.palette.grey.A400},children:i(yt,{data:e.description})})]})},rl=({index:e,history:t,quiz:n})=>p(kn,{children:[i(Jr,{children:i(()=>t?t.correct?i(jr,{}):i(yn,{}):i(S,{}),{})}),i($n,{secondary:t?t.correct?"Jawaban benar":"Jawaban tidak tepat":"Belum di kerjakan",primary:`Quis ${e+1}`})]}),ol=({history:e,quizes:t})=>i(Pn,{children:t.map((n,r)=>i(rl,{quiz:n,history:e.find(a=>a.id.toString()===n.id.toString()),index:r},n.id))}),al=C(()=>{var c;const{updateNavs:e}=se();l.exports.useEffect(()=>{e([])},[]);const t=Xu(),{store:n}=M(),[r,{inline:a}]=E(),s=B(),d=f=>{const m=t.videoUtilities.playerRef.current;if(m&&t.video){const v={videoId:t.video.id,play:m.currentTime};a(!0),n.mutateUpdateVideoProgress(v).currentPromise().then(()=>{a(!1),s(`/video/${f.id}`)}).catch(()=>{a(!1),s(`/video/${f.id}`)})}},{progressInfo:{quizHistory:u}}=ve();return t.showLoading?i(je,{}):p(L,{children:[r?i(je,{}):null,p(ji.Provider,{value:t,children:[i(w,{onClick:()=>s("/"),size:"small",variant:"outlined",sx:{my:1},startIcon:i(St,{}),children:"Kembali ke dashboard"}),i(nl,{}),i(el,{}),i(tl,{}),i(Zu,{}),p(h,{sx:{display:["block","flex"]},children:[i(h,{sx:{width:["100%","30%"]},children:p(h,{sx:{pt:2,mb:1},children:[i(y,{variant:"subtitle1",sx:{fontWeight:"bolder"},children:"Progress quis"}),i(ol,{history:u,quizes:(c=t.video.quizes)!=null?c:[]})]})}),i(h,{sx:{width:["100%","70%"]},children:i(il,{})})]}),i(h,{sx:{mb:3},children:i(Ji,{exluded:[t.video.id],onItemClick:d,width:"33%"})})]})]})}),sl={component:al,path:"/video/:id",name:"video-student",icon:l.exports.Fragment,key:"video-student"},dl=!0,ul=[{path:"classroom/:slug/:id",component:fs,groups:[{path:"videos",component:Ds,name:"batch-show-video"},{path:"add-video",component:Os,name:"batch-show-add-vide"},{path:"students",component:od,name:"batch-show-student"},{path:"quiz-check",component:ad,name:"batch-show-quiz-check"},{path:"discussion",component:Sd,name:"batch-show-discussion"}],key:"classroom-show",icon:l.exports.Fragment,name:"classroom show"},{path:"classroom",component:ms,name:"menagement batch",key:"batch-index",icon:Kr},{path:"admin/video/:id",component:xs,name:"admin-video-page",key:"admin-video-page",icon:l.exports.Fragment,hideInMenu:dl,groups:[{path:"*",component:qi,name:"Informasi video"},{path:"info",component:qi,name:"Informasi video"},{path:"quiz",component:Lu,name:"Quis"},{path:"edit",component:Hu,name:"Edit"}]}],ll=[{path:"/login",component:Ua,name:"login",key:"login",icon:l.exports.Fragment},{path:"/",component:()=>l.exports.createElement(Yr,{to:"/login"}),name:"login",key:"login",icon:l.exports.Fragment}],cl=[Ou,Ju,Bu,sl],pl=e=>{if(!e)return"/login";const{role:t}=e;return t===me.ADMIN?"classroom":"/"},hl=()=>{const e=r=>r?r.role===me.ADMIN?ul:cl:ll,t=Lt(),n=l.exports.useCallback(async()=>{const r=await t.queryAuth().currentPromise();if(r.auth){const{auth:a}=r;return{id:a.id,name:a.name,email:a.email,role:a.role}}return null},[]);return p(no,{getRoutes:e,authFunctions:n,children:[i(Sa,{children:i(Ma,{children:i(io,{getFallback:pl})})}),i(ya,{})]})},Ki=document.getElementById("root");Ki&&Xr.exports.render(i(Zr,{children:i(eo,{anchorOrigin:{horizontal:"right",vertical:"top"},children:i(ga,{url:"/graphql",children:i(hl,{})})})}),Ki);
